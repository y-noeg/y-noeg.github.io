(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4635],{14593:function(e,t,n){"use strict";var r=n(67294);t.Z=e=>{let{data:t,saveData:n,idField:o="id"}=e;const i=(0,r.useRef)(null),l=(0,r.useRef)(n);return(0,r.useEffect)((()=>{l.current=n}),[n]),(0,r.useEffect)((()=>{t&&i.current&&i.current[o]===t[o]&&!t.__skipSave&&l.current(t),i.current=t}),[t,o]),null}},38156:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(59016),l=n(26190),a=n(34136),s=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=(0,i.ZP)(a.Z).withConfig({displayName:"ActionButton__StyledActionButton",componentId:"sc-1cm3d24-0"})(["min-width:0;padding:0 10px;"]);t.Z=e=>{const{onClick:t,actionText:n}=e,r=(0,o.useRef)(!1),i=(0,o.useCallback)((e=>{r.current||(r.current=!0,null===t||void 0===t||t(e),r.current=!1)}),[r,t]);return(0,s.jsx)(u,d(d({"data-testid":"upload_button",onDoubleClick:l.Z,onClick:i},e),{},{children:n}))}},58975:function(e,t,n){"use strict";var r=n(59499),o=n(51718),i=n(70371),l=n(85893);const a=e=>{let{canvas:t}=e;return(0,l.jsx)("div",{style:{height:"100%",width:"100%",position:"absolute"},ref:e=>{e&&e.appendChild(t)}})};t.Z=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,r.Z)(this,"canvas",void 0),(0,r.Z)(this,"context",void 0),(0,r.Z)(this,"width",void 0),(0,r.Z)(this,"height",void 0),(0,r.Z)(this,"pixelDensity",1),this.canvas=document.createElement("canvas");const o=this.canvas.getContext("2d");if(!o)throw new Error("Could not get canvas context");this.context=o,this.width=e,this.height=t,this.pixelDensity=n,this.updatePixelDensity()}getWidth(){return this.width}setWidth(e){this.width=e,this.updatePixelDensity()}getHeight(){return this.height}setHeight(e){this.height=e,this.updatePixelDensity()}getElement(){return a({canvas:this.canvas})}async getBlobData(){return new Promise((e=>{this.canvas.toBlob((t=>{e(t)}))}))}async getBase64PNGData(){return new Promise(((e,t)=>{this.getBlobData().then((n=>{if(!n)return void t(new Error("The canvas had no data"));const r=new FileReader;r.onloadend=()=>{r.result?e(r.result.toString()):t(new Error("Could not read canvas data"))},r.readAsDataURL(n)}))}))}async drawImageUrl(e,t,n,r,o){return new Promise(((i,l)=>{const a=new Image;a.src=e,a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{this.drawImage(a,t,n,r,o),i()},a.onerror=()=>{l()}}))}async drawImageUrlFromTileWithCrop(e,t,n,r,o,i){return new Promise(((l,a)=>{const s=new Image;s.src=e,s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{this.drawImageFromTileWithCrop(s,t,n,r,o,i),l()},s.onerror=()=>{a()}}))}drawImageFromTileWithCrop(e,t,n,r,o,i){const l=Math.max(n,r),a=Math.max(this.width,this.height)/l,s=(l*a-r*a)/2,c=(l*a-n*a)/2;this.drawImageWithConfig(e,t,n,r,o,i,a,c,s)}async drawImageUrlWithConfig(e,t,n,r,o,i){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return new Promise(((d,u)=>{const p=new Image;p.setAttribute("crossorigin","anonymous"),p.src=e,p.onload=()=>{this.drawImageWithConfig(p,t,n,r,o,i,l,a,s,c),d()},p.onerror=()=>{u()}}))}drawImageWithConfig(e,t,n,r,l,a){let s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;s=a||(t===o.EwX.Fill?(0,i.iI)({width:r,height:r},l):t===o.EwX.Fit?(0,i.Lj)({width:n,height:r},l):(0,i.Zn)({width:n,height:r},l));const f=(0,i.X6)(s,{width:n,height:r},l);e.width=f.size.width*c,e.height=f.size.height*c,this.drawImage(e,f.position.x*c+d,f.position.y*c+u,e.width,e.height,p)}drawImage(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!e.src)throw new Error("Can't draw image without a source");const l=e.naturalWidth||e.width,a=e.naturalHeight||e.height;if(!r||!o)throw new Error("Can't draw image without a width or height");const s=r/l,c=o/a;this.context.drawImage(e,i,i,l-2*i,a-2*i,t+s*i,n+c*i,r-s*i*2,o-c*i*2)}clear(){this.context.clearRect(0,0,this.width,this.height)}teardown(){this.canvas.remove()}updatePixelDensity(){const e=this.width,t=this.height;this.canvas.setAttribute("style",`width:${e}px; height:${t}px`),this.canvas.setAttribute("width",""+e*this.pixelDensity),this.canvas.setAttribute("height",""+t*this.pixelDensity),this.canvas.setAttribute("left","0"),this.canvas.setAttribute("top","0"),this.canvas.setAttribute("position","absolute"),this.context.scale(this.pixelDensity,this.pixelDensity)}}},92010:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(67294),o=n(59016),i=n(77493),l=n(96391),a=n(57645),s=n(18156),c=n(36409),d=n(50576),u=n(59499),p=n(4730),f=n(85893);const h=["as","onBlur","onFocus","readOnly"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const m=e=>{let{as:t,onBlur:n,onFocus:o,readOnly:i}=e,a=(0,p.Z)(e,h);const s=(0,l.ui)(),c=(0,r.useRef)(),d=(0,r.useCallback)((()=>{null===n||void 0===n||n(),c.current=!1;const e=l.F3.toDOMNode(s,s);e.scrollTop=0,e.scrollLeft=0}),[n,s,c]),m=(0,r.useCallback)((e=>{null===o||void 0===o||o(e),c.current=!0}),[o,c]);return(0,r.useEffect)((()=>{c.current&&i&&d()}),[c,i,d]),(0,r.useEffect)((()=>{i&&(l.F3.blur(s),s.selection&&l.F3.deselect(s))}),[i,s]),(0,f.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({readOnly:i,onBlur:d,onFocus:m},a))};m.defaultProps={onBlur:void 0};var b=m,y=n(25180),v=n(26072),w=n(23402),x=n(60864),C=n(38938),O=n(70585),j=n(58874);const P=(0,o.ZP)(l.CX).withConfig({displayName:"EditableTextLabel__StyledEditable",componentId:"sc-9s690m-0"})(["width:100%;caret-color:",";"," "," &[contenteditable]{*{user-select:text;}}&:not(:focus) *,&:not([contenteditable]) *{overflow:hidden;text-overflow:ellipsis;}div{user-select:text;cursor:",";}*::selection{background-color:",";}",""],(e=>{let{theme:t,$error:n}=e;return n?t.colors.errorText:t.colors.uiAccent}),(e=>e.$isEmpty&&e.$emptyStateLength&&`\n    // A hack so that the placeholder displays correctly\n    min-width: ${e.$emptyStateLength}px;\n  `),(e=>!e.$isEmpty&&"\n    text-align: center;\n  "),(e=>{let{$selectable:t}=e;return t?"text":"default"}),(e=>e.theme.colors.textSelection),(e=>!e.$wrapText&&y.r)),T={disabled:!1,placeholder:"",selectAllOnFocus:!1,shouldSetGlobalState:!1,emptyStateLength:void 0,maxCharacterLimit:void 0,editorInFocusRef:void 0,dataTestId:void 0,keyBindings:{},selectable:!0},I=(0,r.forwardRef)(((e,t)=>{const{labelId:n,plainContent:o,onContentChange:u,onContentChangeDebounce:p,disabled:h=!1,placeholder:g,emptyStateLength:m,maxCharacterLimit:y,editorInFocusRef:T,selectAllOnFocus:I=!1,shouldSetGlobalState:k=!1,dataTestId:E,keyBindings:D,selectable:S=!0,wrapText:R=!1,error:Z,style:_,componentLifeCycleStateTracker:$}=e,L=(0,r.useRef)();L.current||(L.current=(0,j.Z)((0,w.Z)(y)((0,l.BU)((0,a.VC)((0,i.Jh)())))));const M=L.current,{0:A,1:N}=(0,r.useState)((()=>(0,v.Tj)(o))),z=(0,r.useRef)(A),F=e=>0===e.length?"":e.map((e=>i.NB.string(e))).join(""),B=(0,r.useMemo)((()=>0===F(A).length),[A]),U=(0,r.useCallback)((e=>{const t=(0,v.Tj)(e);N(t),z.current=[...t]}),[]),H=(0,r.useMemo)((()=>(0,c.Z)((e=>{const t=F(e);z.current=[...e],null===u||void 0===u||u(t)}),p??500)),[u,p]),V=(0,r.useCallback)((e=>{N(e),H(e)}),[N,H]);(0,r.useEffect)((()=>(null===$||void 0===$||$(!0),()=>{null===$||void 0===$||$(!1)})),[$]);const W=(0,r.useRef)((()=>{}));(0,r.useEffect)((()=>{W.current=()=>{k&&(0,x.ii)(!1)}}),[k]),(0,r.useEffect)((()=>()=>{W.current()}),[]);const Y=(0,r.useCallback)((()=>{const e=null===u||void 0===u?void 0:u(F(z.current));T&&(T.current=!1),e&&U(e),k&&(0,x.ii)(!1)}),[u,T,k,U]),X=(0,r.useCallback)((e=>{for(const n in D)if((0,s.ZP)(n,e)&&L.current&&D[n](L.current))return void e.preventDefault();const t=e.currentTarget;["Enter","Escape"].includes(e.key)&&t.blur(),y&&t.textContent&&t.textContent.length>=y?t.style["caret-color"]="red":t.style["caret-color"]=""}),[y,D]);(0,r.useEffect)((()=>{o!==F(z.current)&&U(o)}),[o,U]),(0,r.useEffect)((()=>{const e=document.querySelector('[data-slate-editor="true"]');e&&(e.style.minHeight="auto")}),[]);const G=(0,r.useCallback)((()=>{T&&(T.current=!0),k&&(0,x.ii)(!0),L.current&&I&&i.YR.select(L.current,{anchor:i.ML.point(L.current,[],{edge:"start"}),focus:i.ML.point(L.current,[],{edge:"end"})})}),[T,L,I,k]),J=(0,r.useCallback)((()=>{L.current&&(l.F3.focus(L.current),i.YR.select(L.current,{anchor:i.ML.point(L.current,[],{edge:"end"}),focus:i.ML.point(L.current,[],{edge:"end"})}))}),[L]),q=(0,r.useCallback)((()=>{L.current&&l.F3.blur(L.current)}),[L]),K=(0,r.useCallback)((()=>F(A)),[A]);return(0,r.useImperativeHandle)(t,(()=>({focus:J,blur:q,updateContent:U,getContent:K}))),(0,r.useEffect)((()=>{(0,d.Z)(M.children,A)||(0,C.zg)(M,{nodes:A})}),[A,M]),(0,f.jsx)(l.mH,{editor:M,value:A,onChange:V,children:(0,f.jsx)(b,{as:P,"data-testid":E,placeholder:g,renderPlaceholder:O.Z,readOnly:h,onBlur:Y,onFocus:G,onKeyDown:X,spellCheck:l.F3.isFocused(M),$isEmpty:B,$emptyStateLength:m,$selectable:S,$wrapText:R,$error:Z,style:_})})}));I.defaultProps=T;var k=I},2372:function(e,t,n){"use strict";const r=n(59016).vJ`
// A powerful override that is only present when dragging
body, body * {
  cursor: grabbing !important;
  user-select: none !important;
}
`;t.Z=r},29334:function(e,t,n){"use strict";var r=n(95421),o=n(13285),i=n(80375),l=n(85893);t.Z=e=>{let{presentMode:t,skipPresentModeAnimation:n,children:a,transition:s=i.Z2}=e;return(0,l.jsx)(r.M,{children:!t&&(0,l.jsx)(o.E.div,{initial:{opacity:1},animate:{opacity:t?0:1},exit:{opacity:0},transition:n?{type:!1}:s,children:a})})}},77717:function(e,t,n){"use strict";var r=n(67294),o=n(73935);t.Z=e=>{const{children:t,left:n,top:i,zIndex:l,fullscreen:a=!1}=e,{0:s,1:c}=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=document.createElement("div");return e.style.position="absolute",c(e),document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]),s?(s.style.top=`${i}px`,s.style.left=`${n}px`,l&&(s.style.zIndex=`${l}`),a&&(s.style.width="100%",s.style.height="100%"),(0,o.createPortal)(t,s)):null}},8595:function(e,t,n){"use strict";var r=n(59016),o=n(85893);const i=r.ZP.div.withConfig({displayName:"UploadProgressCircle__UploadProgressContainer",componentId:"mmkuup-0"})(["width:","px;height:","px;"],(e=>e.$width),(e=>e.$height)),l=r.ZP.div.withConfig({displayName:"UploadProgressCircle__UploadProgressBackingCircle",componentId:"mmkuup-1"})(["width:100%;height:100%;border:","px solid ",";border-radius:100%;"],(e=>e.$circleWidth),(e=>e.$light?e.theme.colors.contrast20:e.theme.colors.uploadCircle)),a=(0,r.F4)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),s=r.ZP.div.attrs((e=>{const t=46.75*Math.PI*2;let n=(1-e.$progress)*t;return e.$infinite&&(n=.75*t),{style:{strokeDasharray:t,strokeDashoffset:n}}})).withConfig({displayName:"UploadProgressCircle__UploadProgressCircleContainer",componentId:"mmkuup-2"})(["width:100%;height:100%;position:relative;top:-100%;stroke:",";stroke-width:","px;transform:rotate(-90deg);animation:",";stroke-linecap:round;fill:none;"],(e=>{let{theme:t}=e;return t.colors.uploadCircleStroke}),(e=>{let{$spinnerWidth:t}=e;return t}),(e=>{let{$infinite:t}=e;return t&&(0,r.iv)([""," 2s linear infinite"],a)})),c=()=>(0,o.jsx)("svg",{style:{position:"absolute"},viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("circle",{cx:"50",cy:"50",r:"46.75"})});t.Z=e=>{let{width:t,height:n,progress:r=0,infinite:a,light:d=!0,circleWidth:u=2,spinnerWidth:p=10}=e;return(0,o.jsxs)(i,{$height:n,$width:t,children:[(0,o.jsx)(l,{$light:d,$circleWidth:u}),(0,o.jsx)(s,{$progress:r,$infinite:a,$spinnerWidth:p,children:(0,o.jsx)(c,{})})]})}},34136:function(e,t,n){"use strict";n.d(t,{e:function(){return m}});var r=n(59499),o=n(4730),i=n(67294),l=n(59016),a=n(13285),s=n(38621),c=n(48997),d=n(88554),u=n(85893);const p=["children","color","disabled","endIcon","opacity","iconOpacity","iconStyles","selected","size","icon","startIcon","variant","onZ0","isSegment","customButtonPalette","animationControls","borderRadius"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g=(0,l.ZP)((0,a.E)(s.Z)).withConfig({displayName:"TomeButton__ButtonWrapper",componentId:"sc-1vamjj4-0"})([""," line-height:1;white-space:nowrap;",""],(e=>{switch(e.color){case"primary":case"destructive":return(0,l.iv)(["color:",";"],e.theme.colors.white);default:return(0,l.iv)(["color:",";"],e.theme.colors.buttonText)}}),(e=>{if("text"===e.variant)switch(e.size){case"large":return`\n              border-radius: ${d.n.small};\n              font-size: ${e.theme.fontSizes.smmd};\n              font-weight: 400;\n              height: 32px;\n              min-width: 40px;\n              padding: 0 16px;\n          `;case"small":return`\n              border-radius: ${d.n.small};\n              font-size: ${e.theme.fontSizes.sm};\n              font-weight: 400;\n              height: 24px;\n              min-width: 40px;\n              padding: 0 8px;\n          `;default:return`\n              border-radius: ${d.n.small};\n              font-size: ${e.theme.fontSizes.smmd};\n              font-weight: 400;\n              // tall is a special case of medium.\n              height: ${"tall"===e.size?"56px":"28px"};\n              min-width: 40px;\n              padding: 0 10px;\n            `}switch(e.size){case"large":return`\n              border-radius: ${d.n.large};\n              font-size: ${e.theme.fontSizes.smmd};\n              font-weight: 600;\n              height: 40px;\n              min-width: 188px;\n              padding: 0 48px;\n          `;case"small":return`\n              border-radius: ${d.n.small};\n              font-size: ${e.theme.fontSizes.sm};\n              font-weight: 400;\n              height: 24px;\n              min-width: 40px;\n              padding: 0 8px;\n          `;default:return`\n              border-radius: ${d.n.default};\n              font-size: ${e.theme.fontSizes.sm};\n              font-weight: 400;\n              // tall is a special case of medium.\n              height: ${"tall"===e.size?"56px":"28px"};\n              min-width: 104px;\n              padding: 0 21px;\n            `}})),m=(0,l.ZP)((0,a.E)("span")).withConfig({displayName:"TomeButton__ButtonBackground",componentId:"sc-1vamjj4-1"})(["display:block;position:absolute;top:0px;left:0px;width:100%;height:100%;"," ",""],(e=>{switch(e.size){case"large":return`\n          border-radius: ${e.$borderRadius??d.n.large};\n      `;case"small":return`\n          border-radius: ${e.$borderRadius??d.n.small};\n      `;default:return`\n          border-radius: ${e.$borderRadius??d.n.default};\n        `}}),(e=>"text"===e.variant?null:e.disabled?`background: ${e.$buttonPalette.disabled};`:`background: ${e.color};`)),b=(0,l.ZP)(m).withConfig({displayName:"TomeButton__ButtonHover",componentId:"sc-1vamjj4-2"})([""]),y=(0,l.ZP)(a.E.span).withConfig({displayName:"TomeButton__ButtonLabel",componentId:"sc-1vamjj4-3"})(["position:inherit;width:100%;display:inherit;align-items:inherit;justify-content:inherit;flex-direction:",";"],(e=>{let{size:t}=e;return"tall"===t?"column":"inherit"})),v=(0,l.ZP)("span").withConfig({displayName:"TomeButton__ButtonChildren",componentId:"sc-1vamjj4-4"})(["display:flex;",""],(e=>{if(e.disabled)return"opacity: 0.16";if("large"===e.size)return"opacity: 1.0";if(e.selected)return"opacity: 1.0";switch(e.color){case"primary":case"destructive":return"\n          opacity: 1.0;\n        ";default:return(0,l.iv)(["opacity:",";"],e.opacity)}})),w=(0,l.ZP)("span").withConfig({displayName:"TomeButton__ButtonIcon",componentId:"sc-1vamjj4-5"})(["display:flex;align-items:center;opacity:",";"," opacity:",";"],(e=>e.iconOpacity?e.iconOpacity:.4),(e=>{switch(e.size){case"large":return"\n          opacity: 1.0;\n          & > svg {\n            height: 20px;\n            width: 20px;\n          }\n        ";case"small":return"\n          & > svg {\n            height: 14px;\n            width: 14px;\n          }\n        ";default:return"\n          & > svg {\n            height: 16px;\n            width: 16px;\n          }\n        "}}),(e=>e.selected?1:null)),x=(0,l.ZP)(w).withConfig({displayName:"TomeButton__ButtonStartIcon",componentId:"sc-1vamjj4-6"})(["",""],(e=>{switch(e.size){case"small":return"\n          margin: 0 2px 0 0;\n        ";case"tall":return"\n          margin: 0 0 4px 0;\n        ";default:return"\n          margin: 0 4px 0 0;\n        "}})),C=(0,l.ZP)(w).withConfig({displayName:"TomeButton__ButtonEndIcon",componentId:"sc-1vamjj4-7"})(["",""],(e=>"small"===e.size?"\n          margin: 0 0 0 2px;\n        ":"\n          margin: 0 0 0 4px;\n        ")),O=(0,i.forwardRef)(((e,t)=>{const{children:n,color:r="default",disabled:i,endIcon:a,opacity:s,iconOpacity:d,iconStyles:f,selected:O=!1,size:j="medium",icon:P,startIcon:T,variant:I="contained",onZ0:k,isSegment:E=!1,customButtonPalette:D={},animationControls:S,borderRadius:R}=e,Z=(0,o.Z)(e,p),_=(0,l.Fg)(),$=h(h({},_.colors.buttonPalette),D),L=P&&(0,u.jsx)(w,{size:j,iconOpacity:d,selected:O,style:f,children:P}),M=T&&(0,u.jsx)(x,{size:j,iconOpacity:d,selected:O,style:f,children:T}),A=a&&(0,u.jsx)(C,{size:j,iconOpacity:d,selected:O,style:f,children:a});let N=O?"selected":"default";return i&&(N="disabled"),(0,u.jsxs)(g,h(h({initial:"default",whileTap:E?"segmentActive":"active",whileHover:"hover",variants:c.km,animate:S??N,color:i?"default":r,size:j,variant:I,disabled:i,selected:O,ref:t},Z),{},{children:[(0,u.jsx)(m,{variants:c.U1,color:"default"===r&&k?_.colors.onZ0ButtonBackground:r&&$[r],$buttonPalette:$,disabled:i,size:j,variant:I,$borderRadius:R}),(0,u.jsx)(b,{variants:c.kV,color:"text"===I&&k?_.colors.onZ0ButtonBackgroundHover:$.hover,$buttonPalette:$}),(0,u.jsxs)(y,{color:r,size:j,children:[L,M,(0,u.jsx)(v,{color:r,size:j,selected:O,disabled:i,opacity:s??_.button.defaultOpacity,children:n}),A]})]}))}));t.Z=O},48997:function(e,t,n){"use strict";n.d(t,{U1:function(){return o},kV:function(){return i},km:function(){return r}});const r={default:{opacity:1},hover:{opacity:1},active:{scale:.95,transition:{duration:.08}},segmentActive:{scale:1},selected:{scale:1},disabled:{opacity:1}},o={default:{opacity:1},hover:{opacity:1},active:{opacity:1},segmentActive:{opacity:1},selected:{opacity:1},disabled:{opacity:1}},i={default:{opacity:0},hover:{opacity:1,transition:{duration:.08}},segmentActive:{opacity:1,transition:{duration:.08}},active:{opacity:1,transition:{duration:.08}},selected:{opacity:1},disabled:{opacity:0}}},88554:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});const r={default:"8px",small:"6px",large:"10px"}},71893:function(e,t,n){"use strict";const r=(0,n(59016).iv)(["color:inherit;text-decoration:underline;"]);t.Z=r},20286:function(e,t,n){"use strict";n.d(t,{n:function(){return oc},g:function(){return dc}});var r=n(67294),o=n(5152),i=n.n(o),l=n(59499),a=n(4480),s=n(13433),c=n(1922),d=n(40312),u=n(43886),p=n(51718),f=n(24418),h=n(40556),g=n(60864),m=n(61505),b=n(86388);var y,v=e=>{let{ref:t,onResize:n,enabled:r,pixelsPerUnit:o,rowPadding:i}=e;(0,b.Z)({ref:t,round:e=>Math.ceil((e+i)/o),onResize:e=>{let{height:t}=e;r&&t&&n({height:t})}})},w=n(22449),x=n(78963),C=n(33340);!function(e){e.PIXELS="PIXELS",e.UNITS="UNITS"}(y||(y={}));class O{constructor(e,t){(0,l.Z)(this,"kind",void 0),(0,l.Z)(this,"value",void 0),this.kind=e,this.value=t}addPixelsIfAppropriate(e){return this.kind!==y.PIXELS||(this.value+=e),this}toUnits(e){let t;switch(this.kind){case y.UNITS:t=this.value;break;case y.PIXELS:t=this.value/e}return t}toRawPixels(){switch(this.kind){case y.PIXELS:return this.value;case y.UNITS:default:return}}static ofPixels(e){return new O(y.PIXELS,e)}static ofUnits(e){return new O(y.UNITS,e)}}var j=n(67156),P=n(4034),T=n(97210),I=n(83809),k=n(95821);function E(e,t){return Math.abs(e-t)<=20}var D=e=>{const t=(0,r.useRef)(null);return{onClick:n=>{var r,o;t.current&&(r=t.current,o={x:n.pageX,y:n.pageY},E(r.x,o.x)&&E(r.y,o.y))&&e(n),t.current=null},onMouseDown:e=>{t.current={x:e.pageX,y:e.pageY}}}};var S=n(64096);var R=n(20543),Z=n(64310);const _=e=>window.btoa(JSON.stringify(e)),$=e=>JSON.parse(window.atob(e));var L=n(57982);let M;!function(e){e.TILE="application/x-tome-tile-data"}(M||(M={}));var A=e=>{let{dataTransferType:t,disabled:n,handleCut:o,handleCopy:i,handlePaste:l}=e;const a=(0,r.useCallback)((()=>{if(t===M.TILE)return"data-tome-tile";throw new Error(`Unknown dataTransferType: ${t}`)}),[t]),s=(0,r.useCallback)((e=>{const t=document.createElement("span");return t.setAttribute(a(),e),t}),[a]),c=(0,r.useCallback)(((e,n)=>{const r=_(n);r&&(e.setData(t,r),e.setData("text/html",s(r).outerHTML))}),[t,s]),d=(0,r.useCallback)((e=>{const t=_(e);return t?[new ClipboardItem({"text/html":new Blob([s(t).outerHTML],{type:"text/html"})})]:null}),[s]),u=(0,r.useCallback)((async()=>{if(!o)return null;const e=o(null);if(!e)return null;(0,g.fz)(null);try{if(!e)return null;const t=d(e);if(!t||!navigator.clipboard)return null;try{await navigator.clipboard.write(t)}catch{}}catch(t){Z.v.addError(`Failed to perform cut action ${t}`)}return null}),[d,o]),p=(0,r.useCallback)((e=>{if(!o)return null;const t=o(e);if(!t)return null;(0,g.fz)(null),e.preventDefault();try{if(!e.clipboardData)return null;c(e.clipboardData,t)}catch(n){Z.v.addError(`Failed to perform cut action ${n}`)}return null}),[o,c]),f=(0,r.useCallback)((async()=>{if(!i)return null;const e=i(null);if(!e)return null;(0,g.fz)(null);try{if(!e)return null;const t=d(e);if(!t||!navigator.clipboard)return null;try{await navigator.clipboard.write(t)}catch{}}catch(t){Z.v.addError(`Failed to perform copy action ${t}`)}return null}),[d,i]),h=(0,r.useCallback)((e=>{if(!i)return null;const t=i(e);if(!t)return null;(0,g.fz)(null),e.preventDefault();try{if(!e.clipboardData)return null;c(e.clipboardData,t)}catch(n){Z.v.addError(`Failed to perform copy action ${n}`)}return null}),[i,c]),m=(0,r.useCallback)((async()=>{let e=!1;if(document.execCommand&&document.execCommand("paste")&&(e=!0),!l||e||!navigator.clipboard)return;let t=[];try{t=await navigator.clipboard.read()}catch{}if(!t.length)return;const n=t[0];let r=null;const o=await(await n.getType("text/html")).text();if(o){const e=new RegExp(`${a()}="([^"]+)"`,"g").exec(o);e&&(r=e[1])}if(r)try{const e=$(r);l(null,e)}catch(i){Z.v.addError(`Failed to perform paste action ${i}`)}}),[l,a]),b=(0,r.useCallback)((e=>{var n;if(!l)return;let r=(null===(n=e.clipboardData)||void 0===n?void 0:n.getData(t))||null;if(!r){var o;const t=null===(o=e.clipboardData)||void 0===o?void 0:o.getData("text/html");if(t){const e=new RegExp(`${a()}="([^"]+)"`,"g").exec(t);e&&(r=e[1])}}if(r){e.preventDefault();try{const t=$(r);l(e,t)}catch(i){Z.v.addError(`Failed to perform paste action ${i}`)}}}),[t,l,a]);return(0,L.Z)({disabled:n,onCut:p,onCopy:h,onPaste:b}),{performCutAction:u,performCopyAction:f,performPasteAction:m}},N=n(88902),z=n(94430);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){let{tileRef:t,tile:n,tomeId:o,sizes:i,page:l,preview:b,canEdit:y,isSingle:E,isMobile:Z,isPageActive:_,disableExpand:$,onTileResize:L,rowHeight:F,rowId:U,tileIndex:H,pageKind:V}=e;const{t:W}=(0,c.$G)(),{apolloClient:Y,clientId:X}=(0,f.bp)(),G=(0,f.TR)(),{getController:J}=(0,r.useContext)(h.Z),[q,K]=(0,a.FV)(T.tF),[Q,ee]=(0,a.FV)(g.DH),te=(0,s.l)(g.Dm),ne=(0,s.l)(g.oG),re=(0,a.sJ)(x.cm),oe=(0,a.sJ)(x.s5),ie=(0,a.sJ)((0,C.bP)(n.id)),le=(0,a.sJ)((0,C.TU)(n.id)),ae=G?G.expandedTileRef:null,se=(0,r.useRef)(null),ce=(0,r.useRef)(null),de=(0,r.useRef)(!1),{0:ue,1:pe}=(0,r.useState)({x:0,y:0}),fe=(0,P.f3)(),{tileData:he,updateTileData:ge}=(0,m.Z)(n,o),me=function(e){let{preview:t,expandedTileId:n,tile:o,page:i}=e;const{0:l,1:a}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{a(!(t||!n||n===o.id||!i||!i.tiles.map((e=>e.id)).includes(n)))}),[n,i,t,o.id]),l}({preview:b,expandedTileId:Q,page:l,tile:n}),be=function(e){let{expandedTileId:t}=e;const{0:n,1:o}=(0,r.useState)(null);return(0,r.useEffect)((()=>{t&&o(t)}),[t]),n}({expandedTileId:Q});v({ref:se,onResize:L??w.Z,enabled:!b,pixelsPerUnit:i.rowSizes.unitRowHeight,rowPadding:i.pageSizes.padding});const ye=te===n.id;!function(e){let{selected:t,tile:n}=e;const o=(0,a.rb)(g.uz);(0,r.useEffect)((()=>{t&&"TABLE"!==n.type&&o()}),[t,n.type,o])}({selected:ye,tile:n});const ve=(0,P.t2)(),we=(0,N.ye)(N.TT.TILE_CUT_COPY_PASTE),xe=!ye&&null!==te,Ce=!!ie,Oe=!b&&!!Q&&Q===n.id,je=$||!!fe,Pe=(0,r.useMemo)((()=>{var e,t;return(null===l||void 0===l||null===(e=l.tiles)||void 0===e||null===(t=e.slice(-1)[0])||void 0===t?void 0:t.id)===n.id}),[l,n.id]),Te=we&&_&&y&&!b&&(ye||!te&&Pe),{tileSizes:Ie}=i,ke=E?Ie.fullWidth:Ie.width,Ee=E?Ie.fullHeight:Ie.height,De=l?J(V,l.id):void 0,Se=(0,a._8)((e=>{let{set:t}=e;return e=>{if(!l||!De||!U)return;let n={kind:R.r.EXISTING_ROW,rowId:U,newTileIdx:H+1};te||(n={kind:R.r.END});const r=(0,k.xR)(o,null===l||void 0===l?void 0:l.id,De,e,Y,X,n);(0,g.Dm)(r),t((0,g.Eq)(r),!0)}}),[Y,X,l,De,U,te,H,o]),Re=(0,r.useCallback)((e=>{var t;if(!e)return!1;const n="cell"===(null===(t=document.activeElement)||void 0===t?void 0:t.children[0].role);return(0,z.V)(e.target)||n}),[]),Ze=(0,r.useCallback)((e=>{if(!ye||Re(e))return null;l&&De&&(0,I.A)(n.id,l,De,ve,o,Y,X,!1);const t=B({},n);return delete t.id,t}),[Y,X,l,De,ve,ye,Re,n,o]),_e=(0,r.useCallback)((e=>{if(!ye||Re(e))return null;const t=B({},n);return delete t.id,t}),[ye,Re,n]),$e=(0,r.useCallback)(((e,t)=>{Se(t)}),[Se]),Le=(0,r.useCallback)((()=>{const e=B({},n);delete e.id,Se(e)}),[Se,n]),{performCutAction:Me,performCopyAction:Ae,performPasteAction:Ne}=A({dataTransferType:M.TILE,handleCut:Ze,handleCopy:_e,handlePaste:$e,disabled:!Te}),ze=(0,r.useCallback)((()=>{const e=(0,u.q)(he);e&&window.open(e,"_blank","noopener noreferrer")}),[he]),Fe=(0,r.useCallback)((()=>{K(!!Q),Q&&(0,g.Dm)(null),ee(Q?null:n.id)}),[Q,n.id,K,ee]),Be=(null===De||void 0===De?void 0:De.getTileWidthInPx(n.id,i.pageSizes.width,i.pageSizes.padding))??ke,Ue=(null===De||void 0===De?void 0:De.getTileWidthInUnits(n.id))||0,He=(0,r.useCallback)((()=>{switch(he.type){case p.YUT.Table:case p.YUT.Twitter:case p.YUT.TextSlate:case p.YUT.Code:case p.YUT.Text:{var e;const t=null===(e=se.current)||void 0===e?void 0:e.scrollHeight;return O.ofPixels(t||0)}default:return O.ofUnits(j.Rv)}}),[se,he.type]);(0,r.useImperativeHandle)(t,(()=>({getHeight:He})),[He]);const{onClick:Ve,onMouseDown:We}=function(e){let{expanded:t,toggleExpand:n,canEdit:o,selectedTileId:i,tile:l,tileStylesRef:s}=e;const c=(0,a.rb)(T.Qf),d=(0,r.useCallback)((()=>{if(t)n();else if(o){var e;i!==l.id&&((0,g.Dm)(l.id),null===(e=s.current)||void 0===e||e.focus())}c()}),[o,t,c,i,l.id,s,n]),{onClick:u,onMouseDown:p}=D(d);return{onClick:u,onMouseDown:p}}({expanded:Oe,toggleExpand:Fe,selectedTileId:te,tile:n,tileStylesRef:ce,canEdit:y}),Ye=(0,r.useCallback)((()=>{l&&De&&(0,I.A)(n.id,l,De,ve,o,Y,X)}),[l,De,n.id,ve,o,Y,X]),Xe=(0,r.useCallback)((e=>{ge((t=>B(B({},t),{},{contentLink:e})))}),[ge]);if(de.current!==Oe&&ce.current){const e=ce.current.getBoundingClientRect();e.x&&pe({x:e.x+e.width/2,y:e.y+e.height/2}),de.current=Oe}const{fullscreenScale:Ge,expandTranslate:Je}=function(e){let{isMobile:t,tileWidth:n,layoutComputedTileWidth:o,rowHeight:i,expanded:l,tileCenter:a}=e;const{width:s,height:c}=(0,S.Z)(),d=(0,g.k6)();return{fullscreenScale:(0,r.useMemo)((()=>{let e=t?n:o,r=i,a=1;if(l){const t=s/e,n=c/r;a=Math.min(t,n),a/=d,e*=a,r*=a}return a}),[l,t,o,d,i,n,c,s]),expandTranslate:(0,r.useMemo)((()=>({x:(s/2-a.x)/d,y:(c/2-a.y)/d})),[d,a,c,s])}}({isMobile:Z,tileWidth:ke,layoutComputedTileWidth:Be,rowHeight:F,expanded:Oe,tileCenter:ue}),qe=(0,r.useCallback)((e=>{(0,k.Gs)(e,Y,X)}),[Y,X]),Ke=(0,r.useCallback)((()=>{(0,g.Dm)(n.id)}),[n.id]),Qe=(0,r.useMemo)((()=>{const e=[];U&&!(null===De||void 0===De?void 0:De.alreadyEvenlyDistributed(U))&&e.push({text:"Distribute widths",action:()=>null===De||void 0===De?void 0:De.distributeWidths(U)});const t=[];we&&t.push({text:W("hooks.tile.menu.cut"),action:Me,shortcut:(0,d.UN)(),variant:"default"},{text:W("hooks.tile.menu.copy"),action:Ae,shortcut:(0,d.Mg)(),variant:"default"},{text:W("hooks.tile.menu.paste"),action:Ne,shortcut:(0,d.Yt)(),variant:"default"},{text:W("hooks.tile.menu.duplicate"),action:()=>Le(),shortcut:(0,d.i_)(),variant:"default"});const n=[];return(0,u.f)(he)&&n.push({text:W("hooks.tile.menu.download"),action:()=>ze()}),(e.length||n.length)&&n.push({type:"separator"}),[...e,...n,...t,{text:W("hooks.tile.menu.delete"),action:()=>Ye(),shortcut:(0,d.Ct)(),variant:"destructive"}]}),[U,De,we,he,W,Me,Ae,Ne,Le,ze,Ye]),et=(0,r.useMemo)((()=>Oe?B({scale:Ge},Je):me?{opacity:0}:{x:0,scale:1,opacity:1}),[Je,Oe,Ge,me]),tt=(0,r.useCallback)((e=>ge((t=>B(B({},t),{},{content:e})))),[ge]);return{expanded:Oe,unexpanded:me,disableExpand:je,lastExpandedId:be,expandedTileId:Q,downloadTile:ze,duplicateTile:Le,expandedTileRef:ae,tileWidth:ke,tileHeight:Ee,layoutComputedTileWidth:Be,tileWidthUnits:Ue,pageController:De,tileData:he,updateTileData:ge,resizeRef:se,selectedTileId:te,presentMode:ne,selected:ye,isOtherTileSelected:xe,imageCropMode:re,videoCropMode:oe,isOutpaintPreviewInProgress:Ce,tileStylesRef:ce,onClick:Ve,onMouseDown:We,displayAnnotationsOverlays:q,toggleExpand:Fe,disableCustomDropdownPerTileState:le,fullscreenScale:Ge,updateContentLink:Xe,saveTileData:qe,onOpenDropdown:Ke,dropdownItems:Qe,tileStylesAnimate:et,codeTileHandleChange:tt}}var H=n(80375),V=n(84081),W=n(14593),Y=n(95421),X=n(13285),G=n(83942),J=n(59016),q=n(24306),K=n(85893);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=(0,r.forwardRef)(((e,t)=>(0,K.jsxs)(q.Z,ee(ee({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,K.jsx)("path",{d:"M30 28C30 29.1046 29.1046 30 28 30H16C14.8954 30 14 29.1046 14 28C14 26.8954 14.8954 26 16 26H23.1716L12.5858 15.4142C11.8047 14.6332 11.8047 13.3668 12.5858 12.5858C13.3668 11.8047 14.6332 11.8047 15.4142 12.5858L26 23.1716V16C26 14.8954 26.8954 14 28 14C29.1046 14 30 14.8954 30 16V28Z"}),(0,K.jsx)("path",{d:"M40.8284 38L51.4142 48.5858C52.1953 49.3668 52.1953 50.6332 51.4142 51.4142C50.6332 52.1953 49.3668 52.1953 48.5858 51.4142L38 40.8284V48C38 49.1046 37.1046 50 36 50C34.8954 50 34 49.1046 34 48V36C34 34.8954 34.8954 34 36 34H48C49.1046 34 50 34.8954 50 36C50 37.1046 49.1046 38 48 38H40.8284Z"})]}))));function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=(0,r.forwardRef)(((e,t)=>(0,K.jsxs)(q.Z,re(re({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,K.jsx)("path",{d:"M12 14C12 12.8954 12.8954 12 14 12H26C27.1046 12 28 12.8954 28 14C28 15.1046 27.1046 16 26 16H18.8284L29.4142 26.5858C30.1953 27.3668 30.1953 28.6332 29.4142 29.4142C28.6332 30.1953 27.3668 30.1953 26.5858 29.4142L16 18.8284V26C16 27.1046 15.1046 28 14 28C12.8954 28 12 27.1046 12 26V14Z"}),(0,K.jsx)("path",{d:"M34.5858 34.5858C35.3668 33.8047 36.6332 33.8047 37.4142 34.5858L48 45.1716V38C48 36.8954 48.8954 36 50 36C51.1046 36 52 36.8954 52 38V50C52 51.1046 51.1046 52 50 52H38C36.8954 52 36 51.1046 36 50C36 48.8954 36.8954 48 38 48H45.1716L34.5858 37.4142C33.8047 36.6332 33.8047 35.3668 34.5858 34.5858Z"})]})))),ie=n(53098);const le=(0,J.ZP)(X.E.div).withConfig({displayName:"ExpandButton__ExpandButtonBackground",componentId:"mja0v-0"})(["height:32px;font-size:",";position:absolute;bottom:16px;width:40px;border-radius:8px;background:",";right:16px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(100px);z-index:",";cursor:pointer;& ","{fill:",";}"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.overlayButtonGray),ie.Dl,q.K,(e=>e.theme.colors.white));var ae=(0,r.forwardRef)(((e,t)=>{let{expandedScale:n,toggleExpand:r}=e;const o=(0,a.sJ)(g.DH);return(0,K.jsx)(le,{"data-testid":"expand_mode_button","data-tome-bypass-tap-navigation":"ImageTile__ExpandButton",onClick:r,ref:t,animate:{scale:1/n},transition:H.Z2,children:o?(0,K.jsx)(te,{style:{width:"20px",height:"20px"}}):(0,K.jsx)(oe,{style:{width:"20px",height:"20px"}})})})),se=n(8595);const ce=(0,J.ZP)(X.E.div).withConfig({displayName:"TileUploadProgress__StatusBackground",componentId:"sc-4rnzqr-0"})(["height:24px;font-size:",";backdrop-filter:blur(50px);position:absolute;width:24px;",";border-radius:6px;background:",";",";display:flex;align-items:center;justify-content:center;"],(e=>e.theme.fontSizes.sm),(e=>e.$bottom?"bottom: 16px":"top: 16px"),(e=>e.theme.colors.uploadCircle),(e=>e.$right?"right: 16px":"left: 16px"));var de=e=>{let{progress:t=0,infinite:n,bottom:r,right:o}=e;return(0,K.jsx)(ce,{"data-testid":"tile_upload_progress",$bottom:r,$right:o,children:(0,K.jsx)(se.Z,{width:16,height:16,progress:Math.min(.9,t),infinite:n})})},ue=n(92010),pe=n(77717),fe=n(24955);function he(e,t){const n=e.right-e.left,r=e.bottom-e.top,o=Math.max(n/t,r),i=o*t,l=e.left+n/2-i/2,a=l+i,s=e.top+r/2-o/2;return{top:s,bottom:s+o,left:l,right:a}}function ge(e,t){const n=e.right-e.left,r=e.bottom-e.top,o=Math.min(n/t,r),i=o*t,l=e.left+n/2-i/2,a=l+i,s=e.top+r/2-o/2;return{top:s,bottom:s+o,left:l,right:a}}function me(e,t,n,r,o,i,l,a){let s;if(a===p.EwX.Fill||a===p.EwX.Fit){if(null===l)return;s=a===p.EwX.Fill?he(t,l):ge(t,l)}else s=t;if(!(e.right<s.left||e.left>s.right||e.bottom<s.top||e.top>s.bottom)){const t=e.top>s.top?(e.top-s.top)/(s.bottom-s.top):0,r=e.bottom<s.bottom?(e.bottom-s.top)/(s.bottom-s.top):1;if(i){n((0,fe.Qs)(i,t,r))}else(0,fe.xV)(o,n,t,r)}else{n((0,fe.$i)(r))}}var be=n(70371),ye=n(26190);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const xe=(0,J.ZP)(X.E.div).withConfig({displayName:"TileCaption__TileCaptionStyles",componentId:"sc-15ref2n-0"})(["position:absolute;"," "," left:50%;transform:translate(-50%,0);backdrop-filter:blur(100px);font-size:","px;line-height:1.3;padding:","px ","px;border-radius:","px;width:max-content;max-width:","px;font-family:",";font-weight:",";font-style:",";"],(e=>e.$style===p.ubC.Top&&`\n    top: ${e.$padding}px;\n  `),(e=>e.$style===p.ubC.Bottom&&`\n    bottom: ${e.$padding}px;\n  `),(e=>e.$fontSize),(e=>e.$verticalPadding),(e=>e.$sidePadding),(e=>e.$radius),(e=>e.$maxWidth),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}));var Ce=(0,r.forwardRef)(((e,t)=>{const{children:n,captionStyle:r,maxWidth:o,fontSize:i,padding:l,radius:a,sidePadding:s,verticalPadding:c,additionalBottomPadding:d=0,captionTheme:u,onClick:f,onMouseDown:h}=e,g=(0,J.Fg)();return(0,K.jsx)(xe,{ref:t,$style:r,$maxWidth:o,$fontSize:i,$padding:l,$radius:a,$sidePadding:s,$verticalPadding:c,transition:H.Z2,initial:{transform:"translate(-50%, 0)"},animate:we(we({},"bottom"===r?{transform:`translate(-50%, -${d}px)`}:{transform:"translate(-50%, 0)"}),{},{backgroundColor:u===p.dbt.Dark?g.colors.captionDarkBackground:g.colors.captionLightBackground,color:u===p.dbt.Dark?g.colors.captionLightText:g.colors.captionDarkText}),onMouseDown:h,onClick:f,onDoubleClick:ye.Z,"data-testid":"tile_caption",children:n})})),Oe=n(87582),je=n(50576),Pe=n(63520);const Te=J.ZP.div.withConfig({displayName:"Sliderstyles__SliderStyles",componentId:"f010u4-0"})(["position:relative;overflow:hidden;width:","px;height:28px;border-radius:8px;background-color:",";"],(e=>{let{$width:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.sliderBackground})),Ie=J.ZP.div.withConfig({displayName:"Sliderstyles__SliderHandle",componentId:"f010u4-1"})(["width:","px;height:28px;border-radius:8px;background-color:",";border:1px solid ",";position:absolute;left:","px;box-shadow:",";"],(e=>{let{$width:t}=e;return t-1}),(e=>{let{theme:t}=e;return t.colors.sliderHandle}),(e=>{let{theme:t}=e;return t.colors.sliderHandleBorder}),(e=>{let{$left:t}=e;return t}),(e=>{let{theme:t}=e;return t.boxShadow.small})),ke=J.ZP.div.withConfig({displayName:"Sliderstyles__SliderFill",componentId:"f010u4-2"})(["height:100%;width:","px;background-color:",";position:absolute;left:0;"],(e=>{let{$width:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.sliderFill}));function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=r.forwardRef(((e,t)=>{const{currentValue:n,segments:o,onDrag:i,onDrop:l,sliderWidth:a,handleWidth:s}=e,c=(0,r.useRef)(0),d=(0,r.useRef)(0),u=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useCallback)((e=>{const t=(0,Pe.Z)(e,o[0],o[o.length-1]),n=function(e,t){const n=1/(t.length-1);let r=0;for(let o=0;o<t.length-1;o+=1){const i=t[o],l=t[o+1];if(!(e>l)){r+=n*(e-i)/(l-i);break}r+=n}return r}(t,o),r=(a-s)*n;c.current=t,d.current=r,u.current&&p.current&&(u.current.style.left=`${r}px`,p.current.style.width=`${r+s/2}px`)}),[o]);f(n),(0,r.useImperativeHandle)(t,(()=>({updateHandle:f})));const h=(0,Oe.c0)((e=>{const{down:t,movement:[n]}=e;let r=d.current+n;r=(0,Pe.Z)(r,0,a-s),u.current&&(u.current.style.left=`${r}px`),p.current&&(p.current.style.width=`${r+s/2}px`);const f=function(e,t){if(1===e)return t[t.length-1];const n=1/(t.length-1),r=Math.floor(e/n),o=t[r];return o+(e-r*n)/n*(t[r+1]-o)}(r/(a-s),o);i(f),t||(c.current=f,d.current=r,l(f))}));return function(e){return e.length>=2}(o)?(0,K.jsxs)(Te,{$width:a,children:[(0,K.jsx)(ke,{ref:p,$width:d.current+s/2}),(0,K.jsx)(Ie,De({ref:u,$width:s,$left:d.current},h()))]}):null})),Re=n(34136);var Ze=(0,J.ZP)(Re.Z).withConfig({displayName:"HudButton",componentId:"e55wqx-0"})(["min-width:auto;width:67.5px;"]);const _e=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropBackground",componentId:"sc-198o7t-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,0.8);"]),$e=J.ZP.div.withConfig({displayName:"ElementCropstyles__TileCropper",componentId:"sc-198o7t-1"})(["overflow:hidden;position:absolute;top:","px;left:","px;width:","px;height:","px;border-radius:","px;background-color:",";"],(e=>e.$top),(e=>e.$left),(e=>e.$width),(e=>e.$height),(e=>e.$radius),(e=>"transparent"===e.$backgroundColor?e.theme.colors.cropModeTileBackground:e.$backgroundColor)),Le=J.ZP.div.withConfig({displayName:"ElementCropstyles__PreviewDiv",componentId:"sc-198o7t-2"})(["position:absolute;top:0;left:0;transform:translate(","px,","px);width:","px;height:","px;"],(e=>e.$left),(e=>e.$top),(e=>e.$width),(e=>e.$height)),Me=J.ZP.div.withConfig({displayName:"ElementCropstyles__DraftCanvas",componentId:"sc-198o7t-3"})(["position:absolute;top:","px;left:","px;"," "," ",""],(e=>e.$top),(e=>e.$left),(e=>e.$width&&`\n    width: ${e.$width}px;\n  `),(e=>e.$height&&`\n    height: ${e.$height}px;\n  `),(e=>e.$zIndex&&`\n    z-index: ${e.$zIndex};\n  `)),Ae=J.ZP.div.withConfig({displayName:"ElementCropstyles__DraftDiv",componentId:"sc-198o7t-4"})(["position:absolute;top:0;left:0;transform:translate(","px,","px);width:","px;height:","px;cursor:move;img{opacity:0.5;}video{opacity:0.5;}"],(e=>e.$left),(e=>e.$top),(e=>e.$width),(e=>e.$height)),Ne=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropHud",componentId:"sc-198o7t-5"})(["position:absolute;"," width:378px;height:","px;left:calc(50% - 189px);background-color:",";box-shadow:",";border-radius:20px;padding:12px;display:flex;backdrop-filter:blur(50px);flex-direction:column;z-index:",";"],(e=>{let{$top:t,$bottom:n}=e;return n+92+20>window.innerHeight?(0,J.iv)(["top:","px;"],window.innerHeight-t-92-20):(0,J.iv)(["top:calc(100% + ","px);"],20)}),92,(e=>e.theme.colors.sheetBg),(e=>{let{theme:t}=e;return t.colors.sheetBoxShadow}),ie.y$+3),ze=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropHudRow",componentId:"sc-198o7t-6"})(["height:50%;width:100%;display:flex;align-items:center;"]),Fe=(0,J.ZP)(Ze).withConfig({displayName:"ElementCropstyles__CropHudButton",componentId:"sc-198o7t-7"})(["margin-left:8px;"]),Be=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropHudLabel",componentId:"sc-198o7t-8"})(["color:",";font-size:",";line-height:19px;font-weight:700;flex:1;margin-left:4px;"],(e=>e.theme.colors.adjustPanelText),(e=>e.theme.fontSizes.smmd)),Ue=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropHudScaleLabel",componentId:"sc-198o7t-9"})(["height:28px;margin-right:8px;font-size:",";line-height:17px;color:",";border-radius:8px;background-color:",";text-align:center;display:flex;align-items:center;justify-content:center;flex:1;padding:6px 12px;"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.contrast40),(e=>e.theme.colors.adjustPanelInputBackground)),He=J.ZP.div.withConfig({displayName:"ElementCropstyles__CropHudScalePercentLabel",componentId:"sc-198o7t-10"})(["width:10px;"]),Ve=J.ZP.input.attrs({type:"number"}).withConfig({displayName:"ElementCropstyles__CropHudScalePercentInput",componentId:"sc-198o7t-11"})(["background-color:transparent;outline:none;border:none;color:",";width:30px;text-align:end;font-size:",";line-height:17px;-moz-appearance:textfield;::-webkit-outer-spin-button,::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}"],(e=>e.theme.colors.adjustPanelInputText),(e=>e.theme.fontSizes.sm)),We=16,Ye=12,Xe=J.ZP.div.withConfig({displayName:"ElementCropstyles__CornerDragHandle",componentId:"sc-198o7t-12"})(["width:","px;height:","px;background-color:",";border-style:solid;border-width:3px;border-radius:8px;border-color:",";position:absolute;"],We,We,(e=>e.theme.colors.adjustDragHandle),(e=>e.theme.colors.uiAccent)),Ge=(0,J.ZP)(Xe).withConfig({displayName:"ElementCropstyles__BottomRightDragHandle",componentId:"sc-198o7t-13"})(["bottom:-","px;right:-","px;cursor:nwse-resize;"],8,8),Je=(0,J.ZP)(Xe).withConfig({displayName:"ElementCropstyles__TopLeftDragHandle",componentId:"sc-198o7t-14"})(["top:-","px;left:-","px;cursor:nwse-resize;"],8,8),qe=(0,J.ZP)(Xe).withConfig({displayName:"ElementCropstyles__TopRightDragHandle",componentId:"sc-198o7t-15"})(["top:-","px;right:-","px;cursor:nesw-resize;"],8,8),Ke=(0,J.ZP)(Xe).withConfig({displayName:"ElementCropstyles__BottomLeftDragHandle",componentId:"sc-198o7t-16"})(["bottom:-","px;left:-","px;cursor:nesw-resize;"],8,8),Qe=J.ZP.div.withConfig({displayName:"ElementCropstyles__VerticalDragHandle",componentId:"sc-198o7t-17"})(["position:absolute;top:0;bottom:0;width:","px;background-color:",";cursor:ew-resize;display:flex;flex-direction:column;align-items:center;"],Ye,(e=>e.theme.colors.transparent)),et=J.ZP.div.withConfig({displayName:"ElementCropstyles__VerticalSide",componentId:"sc-198o7t-18"})(["height:100%;width:3px;background-color:",";"],(e=>e.theme.colors.uiAccent)),tt=J.ZP.div.withConfig({displayName:"ElementCropstyles__VerticalHandle",componentId:"sc-198o7t-19"})(["height:38px;width:","px;background-color:",";border-width:3px;border-style:solid;border-radius:","px;border-color:",";position:absolute;top:calc(50% - 19px);"],Ye,(e=>e.theme.colors.adjustDragHandle),6,(e=>e.theme.colors.uiAccent)),nt=(0,J.ZP)(Qe).withConfig({displayName:"ElementCropstyles__RightDragHandle",componentId:"sc-198o7t-20"})(["right:-","px;"],6),rt=(0,J.ZP)(Qe).withConfig({displayName:"ElementCropstyles__LeftDragHandle",componentId:"sc-198o7t-21"})(["left:-","px;"],6),ot=J.ZP.div.withConfig({displayName:"ElementCropstyles__HorizontalDragHandle",componentId:"sc-198o7t-22"})(["position:absolute;left:0;right:0;height:","px;background-color:",";cursor:ns-resize;display:flex;flex-direction:row;align-items:center;"],Ye,(e=>e.theme.colors.transparent)),it=J.ZP.div.withConfig({displayName:"ElementCropstyles__HorizontalSide",componentId:"sc-198o7t-23"})(["width:100%;height:3px;background-color:",";"],(e=>e.theme.colors.uiAccent)),lt=J.ZP.div.withConfig({displayName:"ElementCropstyles__HorizontalHandle",componentId:"sc-198o7t-24"})(["width:38px;height:","px;background-color:",";border-width:3px;border-style:solid;border-radius:","px;border-color:",";position:absolute;left:calc(50% - 19px);"],Ye,(e=>e.theme.colors.adjustDragHandle),6,(e=>e.theme.colors.uiAccent)),at=(0,J.ZP)(ot).withConfig({displayName:"ElementCropstyles__TopDragHandle",componentId:"sc-198o7t-25"})(["top:-","px;"],6),st=(0,J.ZP)(ot).withConfig({displayName:"ElementCropstyles__BottomDragHandle",componentId:"sc-198o7t-26"})(["bottom:-","px;"],6),ct=J.ZP.div.withConfig({displayName:"ElementCropstyles__VerticalLine",componentId:"sc-198o7t-27"})(["width:2px;height:100%;background-color:",";position:absolute;top:0;left:calc(50% - 1px);visibility:hidden;z-index:",";"],(e=>e.theme.colors.red),ie.y$+2),dt=J.ZP.div.withConfig({displayName:"ElementCropstyles__HorizontalLine",componentId:"sc-198o7t-28"})(["height:2px;width:100%;background-color:",";position:absolute;top:calc(50% - 1px);left:0;visibility:hidden;z-index:",";"],(e=>e.theme.colors.red),ie.y$+2),ut=J.ZP.div.withConfig({displayName:"ElementCropstyles__TileElementDiv",componentId:"sc-198o7t-29"})(["position:relative;height:100%;width:100%;"]);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ht=new Map([["nw",[-1,-1,-1,-1]],["se",[1,1,0,0]],["ne",[1,-1,0,-1]],["sw",[-1,1,-1,0]],["e",[1,0,0,-.5]],["w",[-1,0,-1,-.5]],["n",[0,-1,-.5,-1]],["s",[0,1,-.5,0]]]),gt=new Map([["nw",[-2,-2,-.5,-.5]],["se",[2,2,-.5,-.5]],["ne",[2,-2,-.5,-.5]],["sw",[-2,2,-.5,-.5]],["e",[2,0,-.5,-.5]],["w",[-2,0,-.5,-.5]],["n",[0,-2,-.5,-.5]],["s",[0,2,-.5,-.5]]]);function mt(e,t){e.current&&(e.current.style.backgroundColor=t.colors.uiAccent)}function bt(e,t){e.current&&(e.current.style.borderColor=t.colors.uiAccent)}function yt(e){e.current&&(e.current.style.visibility="hidden")}function vt(e,t,n){t?function(e,t){e.current&&(e.current.style.backgroundColor=t.colors.red)}(e,n):mt(e,n)}function wt(e,t,n){t?function(e,t){e.current&&(e.current.style.borderColor=t.colors.red)}(e,n):bt(e,n)}function xt(e,t){t?function(e){e.current&&(e.current.style.visibility="visible")}(e):yt(e)}var Ct=e=>{const{tileX:t,tileY:n,tileWidth:o,tileHeight:i,tileRadius:l,tileBackground:a,element:s,cropData:d,onSave:u,onCancel:p,aspectRatio:f,tileElement:h=null}=e,g=(0,r.useRef)(null),m=(0,r.useRef)(null),b=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null),w=(0,r.useRef)(null),x=(0,r.useRef)(null),C=(0,r.useRef)(null),O=(0,r.useRef)(null),j=(0,r.useRef)(null),P=(0,r.useRef)(null),T=(0,r.useRef)(null),I=(0,r.useRef)(null),k=(0,r.useRef)(null),E=(0,r.useRef)(null),D=(0,r.useRef)(null),S=(0,r.useRef)(null),R=(0,r.useRef)(null),Z=(0,r.useRef)(!1),_=(0,r.useRef)(!1),$=(0,r.useRef)(!1),L=(0,r.useRef)(null),M=(0,r.useRef)(d.posX),A=(0,r.useRef)(d.posY),N=(0,r.useRef)(d.scale),z=(0,r.useRef)(!1),F=(0,r.useRef)(null),B=(0,r.useRef)(null),U=(0,r.useRef)(null),H=(0,r.useRef)(!1),V=(0,r.useRef)(null),W=(0,r.useRef)(null),Y=(0,r.useRef)(null),X=(0,J.Fg)(),{t:G}=(0,c.$G)(),q=(0,r.useMemo)((()=>({width:o,height:i})),[o,i]),{size:{width:Q,height:ee},position:{x:te,y:ne}}=(0,be.X6)({posX:M.current,posY:A.current,scale:N.current},q,f),re=(0,r.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M.current=e,A.current=t,N.current=n;const{size:{width:o,height:i},position:{x:l,y:a}}=(0,be.X6)({posX:e,posY:t,scale:n},q,f);if(g.current&&(g.current.style.height=`${i}px`,g.current.style.width=`${o}px`,g.current.style.transform=`translate(${l}px, ${a}px)`),m.current&&(m.current.style.height=`${i}px`,m.current.style.width=`${o}px`,m.current.style.transform=`translate(${l}px, ${a}px)`),S.current){const e=Math.ceil(100*n);S.current.value=`${e}`}r||R.current&&R.current.updateHandle(n)}),[q,f]),oe=()=>{yt(y),yt(b),mt(v,X),mt(w,X),mt(x,X),mt(C,X),bt(O,X),bt(j,X),bt(P,X),bt(T,X),bt(I,X),bt(k,X),bt(E,X),bt(D,X)},le=(0,Oe.c0)((e=>{let{down:t,movement:[n,r]}=e;z.current||(z.current=!0,F.current=M.current,B.current=A.current),Z.current&&null===U.current&&(Math.abs(n)>5||Math.abs(r)>5)&&(Math.abs(n)>Math.abs(r)?U.current="x":Math.abs(n)<Math.abs(r)&&(U.current="y"));const l=N.current,{size:{width:a,height:s},position:{x:c,y:d}}=(0,be.X6)({posX:F.current||0,posY:B.current||0,scale:l},q,f);let u=c+("y"===U.current?0:1)*n,p=d+("x"===U.current?0:1)*r,h=!1,g=!1,m=!1,S=!1,R=!1,_=!1,$=!1,L=!1;const H=u+a/2,V=p+s/2,W=Math.abs(H-o/2),Y=Math.abs(V-i/2);!$&&W<8&&(u=o/2-a/2,$=!0),h=Math.abs(u-(o/2-a/2))<1,!L&&Y<8&&(p=i/2-s/2,L=!0),g=Math.abs(p-(i/2-s/2))<1,!$&&Math.abs(u)<8&&(u=0,$=!0),m=Math.abs(u)<1,!$&&Math.abs(u+a-o)<8&&(u=o-a,$=!0),S=Math.abs(u+a-o)<1,!L&&Math.abs(p)<8&&(p=0,L=!0),R=Math.abs(p)<1,!L&&Math.abs(p+s-i)<8&&(p=i-s,L=!0),_=Math.abs(p+s-i)<1,xt(b,h),xt(y,g),vt(v,R,X),wt(O,R,X),vt(w,_,X),wt(j,_,X),vt(x,m,X),wt(P,m,X),vt(C,S,X),wt(T,S,X),wt(I,R&&m,X),wt(k,R&&S,X),wt(E,_&&m,X),wt(D,_&&S,X);const{posX:G,posY:J}=(0,be.Zt)({position:{x:u,y:p},size:{width:a,height:s}},q);re(G,J,l),t||(z.current=!1,F.current=null,B.current=null,U.current=null,oe())})),ae=e=>t=>{const{event:n,down:r,movement:[l,a]}=t;n.stopPropagation(),H.current||(H.current=!0,V.current=N.current,W.current=M.current,Y.current=A.current);const s=_.current?gt.get(e):ht.get(e);if(!s)return;const[c,d,u,p]=s,h=(g=c,m=d,b=u,y=p,e=>{const{dx:t,dy:n,startCoorX:r,startCoorY:l,startWidth:a,startHeight:s}=e;let c=a+g*t,d=s+m*n;c<80&&(c=80),d<80&&(d=80);let u=Math.max(0===g?0:c,0===m?0:(0,be.ew)(d,f)),p=(0,be.le)(u,f),h=u-a,S=p-s,R=b*h,Z=y*S,_=r+R,$=l+Z,L=!1,M=!1,A=!1,N=!1,z=!1;return 0!==R&&!z&&Math.abs(_)<8&&(_=0,R=-r,h=R/b,u=h+a,p=(0,be.le)(u,f),S=p-s,Z=y*S,$=l+Z,z=!0),L=Math.abs(_)<1,0!==Z&&!z&&Math.abs($)<8&&($=0,Z=-l,S=Z/y,p=S+s,u=(0,be.ew)(p,f),h=u-a,R=b*h,_=r+R,z=!0),A=Math.abs($)<1,R+h!==0&&!z&&Math.abs(_+u-o)<8&&(u=(o-r+b*a)/(b+1),p=(0,be.le)(u,f),h=u-a,S=p-s,R=b*h,Z=y*S,_=r+R,$=l+Z,z=!0),M=Math.abs(_+u-o)<1,Z+S!==0&&!z&&Math.abs($+p-i)<8&&(p=(i-l+y*s)/(y+1),u=(0,be.ew)(p,f),h=u-a,S=p-s,R=b*h,Z=y*S,_=r+R,$=l+Z,z=!0),N=Math.abs($+p-i)<1,vt(v,A,X),wt(O,A,X),vt(w,N,X),wt(j,N,X),vt(x,L,X),wt(P,L,X),vt(C,M,X),wt(T,M,X),wt(I,A&&L,X),wt(k,A&&M,X),wt(E,N&&L,X),wt(D,N&&M,X),{newX:_,newY:$,newWidth:u,newHeight:p}});var g,m,b,y;const{size:{width:S,height:R},position:{x:Z,y:$}}=(0,be.X6)({posX:W.current||0,posY:Y.current||0,scale:V.current||1},q,f),{newX:L,newY:z,newWidth:F}=h({dx:l,dy:a,startCoorX:Z,startCoorY:$,startWidth:S,startHeight:R}),{posX:B,posY:U,scale:G}=(0,be.Zt)({position:{x:L,y:z},size:{width:F,height:(0,be.le)(F,f)}},q);re(B,U,G),r||(H.current=!1,V.current=null,W.current=null,Y.current=null,oe())},se=(0,Oe.c0)(ae("se")),ce=(0,Oe.c0)(ae("nw")),de=(0,Oe.c0)(ae("sw")),ue=(0,Oe.c0)(ae("ne")),pe=(0,Oe.c0)(ae("e")),fe=(0,Oe.c0)(ae("w")),he=(0,Oe.c0)(ae("n")),ge=(0,Oe.c0)(ae("s")),me=e=>{e.stopPropagation(),e.preventDefault()},ye=(0,r.useCallback)(((e,t)=>{const{size:{width:n,height:r},position:{x:o,y:i}}=(0,be.X6)({posX:M.current,posY:A.current,scale:N.current},q,f),l=e,{width:a,height:s}=(0,be.UN)(l,q,f),c=o+-.5*(a-n),d=i+-.5*(s-r),{posX:u,posY:p}=(0,be.Zt)({position:{x:c,y:d},size:{width:a,height:(0,be.le)(a,f)}},q);re(u,p,l,t)}),[q,f,re]),ve=(0,r.useCallback)((e=>ye(e,!0)),[ye]),we=(0,r.useCallback)((()=>{if($.current&&S.current){const e=parseInt(S.current.value,10);e&&ye(e/100,!1)}let e={posX:M.current,posY:A.current,scale:N.current};(0,je.Z)(e,d)&&(e=null),u(e)}),[ye,u,d]),xe=(0,r.useCallback)((e=>{if($.current)switch(e.key){case"Enter":case"Tab":if(S.current){const e=parseInt(S.current.value,10);e?ye(e/100,!1):S.current.value=`${L.current}`,S.current.blur()}break;case"Escape":S.current&&(S.current.value=`${L.current}`,S.current.blur())}else switch(e.key){case"Alt":_.current=!0;break;case"Shift":Z.current=!0;break;case"Escape":case"Enter":e.stopPropagation(),e.preventDefault(),we()}}),[we,ye]),Ce=(0,r.useCallback)((e=>{switch(e.key){case"Alt":_.current=!1;break;case"Shift":Z.current=!1}}),[_,Z]);return(0,r.useEffect)((()=>(document.addEventListener("keydown",xe),document.addEventListener("keyup",Ce),()=>{document.removeEventListener("keydown",xe),document.removeEventListener("keyup",Ce)})),[xe,Ce]),(0,r.useEffect)((()=>{S.current&&(S.current.value=`${Math.ceil(100*N.current)}`)}),[]),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(_e,{onClick:we,onMouseDown:me}),(0,K.jsx)(Me,{$top:n,$left:t,$width:o,$height:i,children:(0,K.jsxs)(Ne,{$top:n,$bottom:n+i,"data-testid":"element_crop_hud",children:[(0,K.jsx)(ze,{children:(0,K.jsx)(Be,{children:G("commandPrompt.tiles.crop.adjust")})}),(0,K.jsxs)(ze,{children:[(0,K.jsxs)(Ue,{children:[(0,K.jsx)(Ve,{ref:S,"data-testid":"crop_hud_scale_percent_input",onBlur:()=>{L.current=null,$.current=!0},onFocus:e=>{L.current=parseInt(e.target.value,10),$.current=!0}}),(0,K.jsx)(He,{children:"%"})]}),(0,K.jsx)(Se,{ref:R,currentValue:N.current,segments:[.1,5],sliderWidth:130,handleWidth:20,onDrag:ve,onDrop:ve}),(0,K.jsx)(Fe,{onClick:p,children:G("commandPrompt.tiles.crop.cancelButton")}),(0,K.jsx)(Fe,{"data-testid":"crop_hud_button_done",color:"primary",onClick:we,children:G("commandPrompt.tiles.crop.doneButton")})]})]})}),(0,K.jsxs)($e,{$left:t,$top:n,$width:o,$height:i,$radius:l,$backgroundColor:a,onClick:we,"data-testid":"element_crop_tile_cropper",children:[(0,K.jsx)(Le,{ref:g,$left:te,$top:ne,$width:Q,$height:ee,children:s}),(0,K.jsx)(ut,{children:h&&r.cloneElement(h,{style:{zIndex:ie.y$+2}})}),(0,K.jsx)(ct,{ref:b}),(0,K.jsx)(dt,{ref:y})]}),(0,K.jsx)(Me,{$top:n,$left:t,$zIndex:ie.y$+1,onMouseDown:me,children:(0,K.jsxs)(Ae,ft(ft({ref:m,$left:te,$top:ne,$width:Q,$height:ee,"data-testid":"element_crop_draft_div"},le()),{},{children:[s,(0,K.jsxs)(nt,ft(ft({},pe()),{},{children:[(0,K.jsx)(et,{ref:C}),(0,K.jsx)(tt,{ref:T})]})),(0,K.jsxs)(rt,ft(ft({},fe()),{},{children:[(0,K.jsx)(et,{ref:x}),(0,K.jsx)(tt,{ref:P})]})),(0,K.jsxs)(at,ft(ft({},he()),{},{children:[(0,K.jsx)(it,{ref:v}),(0,K.jsx)(lt,{ref:O})]})),(0,K.jsxs)(st,ft(ft({},ge()),{},{children:[(0,K.jsx)(it,{ref:w}),(0,K.jsx)(lt,{ref:j})]})),(0,K.jsx)(Ge,ft({ref:D},se())),(0,K.jsx)(Je,ft({ref:I},ce())),(0,K.jsx)(qe,ft({ref:k},ue())),(0,K.jsx)(Ke,ft({ref:E},de()))]}))})]})},Ot=n(24581),jt=n(4730),Pt=n(55204),Tt=n(50135);const It=["isMobile"];function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Dt=J.ZP.div.withConfig({displayName:"CenterTapToExpand__CenterTapToExpandStyles",componentId:"zyi3ev-0"})(["width:50vw;height:100%;position:absolute;left:50%;transform:translateX(-50%);"]);var St=(0,r.forwardRef)(((e,t)=>{let{isMobile:n}=e,o=(0,jt.Z)(e,It);const{tomeId:i}=(0,r.useContext)(Tt.z),l=(0,a.sJ)((0,Pt.J)(i));return!n||l?null:(0,K.jsx)(Dt,Et(Et({"data-testid":"center_tap_to_expand"},o),{},{ref:t}))})),Rt=n(24656),Zt=n(78374);var _t=()=>{const e=(0,a.sJ)(Zt.lk),t=(0,a.sJ)(Zt.MJ);return e||t},$t=n(57451),Lt=n(25675),Mt=n.n(Lt),At=n(60559);const Nt=J.ZP.div.withConfig({displayName:"ImageTilestyles__PageEndpointImageDiv",componentId:"sc-12iw9og-0"})(["position:absolute;background-image:url(",");background-size:","px ","px;background-position:","px ","px;background-repeat:no-repeat;top:0;left:0;height:100%;width:100%;pointer-events:none;"],(e=>{let{$backgroundImg:t}=e;return t}),(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t}),(e=>{let{$left:t}=e;return t}),(e=>{let{$top:t}=e;return t})),zt=J.ZP.div.withConfig({displayName:"ImageTilestyles__ImageDiv",componentId:"sc-12iw9og-1"})(["position:absolute;top:0;left:0;transform:translate(","px,","px);width:","px;height:","px;visibility:",";",";"],(e=>{let{$left:t}=e;return t}),(e=>{let{$top:t}=e;return t}),(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t}),(e=>{let{$inCrop:t}=e;return t?"hidden":"inherit"}),(e=>{let{$canEdit:t,$preview:n,$presentMode:r,$isExpanded:o}=e;return o?"cursor: zoom-out":r?"cursor: zoom-in":t||n?"cursor: auto":"cursor: pointer"})),Ft=(0,J.ZP)(Mt()).withConfig({displayName:"ImageTilestyles__NextImage",componentId:"sc-12iw9og-2"})(["width:100%;height:100%;object-fit:",";opacity:",";pointer-events:none;"],(e=>{let{$fit:t}=e;return t?"contain":"cover"}),(e=>{let{$show:t}=e;return t?1:0})),Bt=J.ZP.div.withConfig({displayName:"ImageTilestyles__FillNextImageWrapper",componentId:"sc-12iw9og-3"})(["position:relative;width:100%;height:100%;"]),Ut=(0,J.ZP)(X.E.div).withConfig({displayName:"ImageTilestyles__ImageDropArea",componentId:"sc-12iw9og-4"})(["","}width:100%;height:100%;outline:none;justify-content:center;align-items:center;display:flex;overflow:",";-webkit-mask-image:-webkit-radial-gradient(white,black);position:relative;background-color:",";"],(e=>{let{$presentMode:t,$isExpanded:n}=e;return n?"cursor: zoom-out":t?"cursor: zoom-in":"cursor: auto"}),(e=>{let{$inCrop:t}=e;return t?"inherit":"hidden"}),(e=>{let{$backgroundColor:t,theme:n}=e;return t||n.colors.contrast8})),Ht=J.ZP.div.withConfig({displayName:"ImageTilestyles__ExitExpandedModeButton",componentId:"sc-12iw9og-5"})(["align-items:center;background-color:",";display:flex;font-size:",";justify-content:center;width:30px;height:30px;position:fixed;border-radius:100%;top:","px;right:","px;text-align:center;overflow:hidden;"],(e=>{let{theme:t}=e;return t.colors.formatBarBackground}),(e=>{let{theme:t}=e;return t.fontSizes.md}),At.YZ.padding,At.YZ.padding);var Vt=n(96012),Wt=n(29334),Yt=n(88720);var Xt=(e,t)=>{const[n,o]=(0,a.FV)((0,C.pt)(e));(0,r.useEffect)((()=>{var e;n&&(null===(e=t.current)||void 0===e||e.focus());return()=>o(!1)}),[]);return{onBlur:()=>{o(!1)},onFocus:()=>{o(!0)},onKeyDown:e=>{var n;"Escape"===e.key&&(t.current&&""!==t.current.value?t.current.value="":null===(n=t.current)||void 0===n||n.blur())}}};const Gt=J.ZP.div.withConfig({displayName:"NullEmbedTile__EmbedPreviewStyles",componentId:"sc-6ipsrc-0"})(["display:flex;flex:none;flex-direction:column;height:100%;justify-content:center;align-items:center;border-radius:","px;background-color:",";gap:12px;position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden;& svg{fill:",";}"],(e=>{let{radius:t}=e;return t}),(e=>{let{presentMode:t,theme:n}=e;return t?n.colors.transparent:n.colors.embedTileBackground}),(e=>{let{theme:t}=e;return t.colors.nullEmbedIconFill})),Jt=(0,J.ZP)(Vt.Z).withConfig({displayName:"NullEmbedTile__UrlInput",componentId:"sc-6ipsrc-1"})(["height:28px;width:190px;min-height:initial;max-width:calc(100% - 24px);margin:0;padding:10px 12px;background:",";border:1px solid ",";flex-basis:100%;color:",";text-overflow:ellipsis;:hover:not(:focus){background-color:",";border:1px solid ",";}::placeholder{color:",";}:focus{border:1px solid ",";}"],(e=>e.theme.colors.nullEmbedUrlInputBg),(e=>e.theme.colors.nullEmbedUrlInputBorder),(e=>e.theme.colors.nullEmbedUrlInputText),(e=>e.theme.colors.nullEmbedUrlInputBgHover),(e=>e.theme.colors.nullEmbedUrlInputBorderHover),(e=>e.theme.colors.nullEmbedUrlInputPlaceholder),(e=>e.theme.colors.contentAccent)),qt=J.ZP.div.withConfig({displayName:"NullEmbedTile__UrlInputPlaceholder",componentId:"sc-6ipsrc-2"})(["height:28px;padding:10px 12px;border:1px solid ",";"],(e=>e.theme.colors.transparent));var Kt=e=>{var t,n;let{tileId:o,tileType:i,sizes:l,width:s,height:c,preview:d,updateContentLink:u,presentMode:f}=e;const h=(0,r.useRef)(null),g=(0,a.sJ)(C.X1),m=(null===g||void 0===g?void 0:g.iconSize)||l.embedPreviewIconSize,{onBlur:b,onFocus:y,onKeyDown:v}=Xt(o,h),w=V.YM.filter((e=>e.value===i));if(0===w.length)return null;const x=null===(t=(0,V.An)(i))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.label,O=null===x||void 0===x?void 0:x.toLowerCase(),P=w[0].icon,T=c<j.dA;return(0,K.jsxs)("div",{"data-testid":`null_embed_tile_${O}`,children:[(0,K.jsx)(Wt.Z,{presentMode:f,children:(0,K.jsxs)(Gt,{radius:l.tileSizes.radius,presentMode:!1,$tileType:i,children:[!(!d&&T)&&(0,K.jsx)(P,{style:{width:Math.min(m,s-l.pageSizes.padding),height:Math.min(m,s-l.pageSizes.padding),opacity:i===p.YUT.Web?.5:1},dataTestId:"null_embed_icon"}),!d&&u&&(0,K.jsx)("form",{onSubmit:e=>{var t;const n=null===(t=h.current)||void 0===t?void 0:t.value;return n&&u(n),e.preventDefault(),!1},style:{textAlign:"center",width:"100%"},children:(0,K.jsx)(Jt,{type:"text",placeholder:`Paste ${x?`${x} `:""}link...`,onBlur:e=>{e.target.value&&u(e.target.value),b()},onFocus:y,onKeyDown:v,onContextMenuCapture:ye.Z,onMouseDownCapture:e=>{(0,Yt.d)(e)&&e.stopPropagation()},ref:h})})]})}),(0,K.jsx)(Wt.Z,{presentMode:!f,children:(0,K.jsx)(Gt,{radius:l.tileSizes.radius,presentMode:!0,$tileType:i,children:!T&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(P,{style:{width:m,height:m,opacity:i===p.YUT.Web?.5:1}}),(0,K.jsx)(qt,{})]})})})]})},Qt=n(38156),en=n(70777),tn=n(10196),nn=n(90170),rn=n(67171),on=n(90574),ln=n(19579);const an=J.ZP.div.withConfig({displayName:"NullMediaTile__NullMediaTileStyles",componentId:"sc-2wo9l9-0"})(["display:flex;flex:none;flex-direction:column;height:100%;width:100%;justify-content:center;align-items:center;border-radius:","px;background-color:",";gap:12px;position:absolute;top:0;bottom:0;left:0;right:0;"],(e=>{let{radius:t}=e;return t}),(e=>e.theme.colors.embedTileBackground)),sn=J.ZP.div.withConfig({displayName:"NullMediaTile__Column",componentId:"sc-2wo9l9-1"})(["display:flex;flex-direction:column;gap:8px;min-height:17px;align-items:center;"]),cn=e=>{let{onClickUpload:t,onClickCreate:n,onClickAddImage:r,isImageTile:o,placeholderText:i,tileWidth:l,flatMode:a}=e;const{t:s}=(0,c.$G)(),d=a||l<340,u=l<110,p=(0,K.jsx)(Qt.Z,{onClick:t,icon:u&&(0,K.jsx)(en.Z,{}),actionText:u?"":s("tiles.uploadText",{placeholderTextType:i.toLowerCase()})}),f=(0,K.jsx)(Qt.Z,{onClick:n,actionText:u?"":s("sidebar.media.create"),disabled:!1,style:{width:"100%"},size:"medium",startIcon:(0,K.jsx)(tn.Z,{}),iconStyles:{width:"16px",height:"16px"}}),h=(0,K.jsx)(Qt.Z,{onClick:t,actionText:u?"":s("sidebar.media.upload"),disabled:!1,style:{width:"100%"},size:"medium",startIcon:(0,K.jsx)(en.Z,{}),iconStyles:{width:"16px",height:"16px"}}),g=(0,K.jsx)(Qt.Z,{onClick:r,actionText:u?"":s("sidebar.media.addImage"),disabled:!1,style:{width:"100%"},size:"medium",icon:u?(0,K.jsx)(on.Z,{}):null,iconStyles:{width:"16px",height:"16px"}});return o?d?(0,K.jsx)(sn,{children:g}):(0,K.jsxs)(sn,{children:[f,h]}):p},dn=e=>{let{nullTileRef:t,radius:n,flatMode:r,iconSize:o,tileWidth:i,sizes:l,isImageTile:a,placeholderText:s,uploadInputRef:c,acceptedFileTypes:d,onUploadChange:u,onClickCreate:p,onClickUpload:f,onClickAddImage:h,Icon:g}=e;return(0,K.jsxs)(an,{ref:t,"data-testid":"null_media_tile",radius:n,children:[!r&&(0,K.jsx)(g,{style:{width:Math.min(o,i-l.pageSizes.padding),height:Math.min(o,i-l.pageSizes.padding),opacity:.5}}),(0,K.jsx)(cn,{isImageTile:a,placeholderText:s,onClickUpload:f,onClickCreate:p,onClickAddImage:h,tileWidth:i,flatMode:r}),(0,K.jsx)("input",{ref:c,type:"file",accept:d,onChange:u,style:{display:"none"}})]})},un=()=>{const e=(0,J.Fg)();return(0,K.jsx)(rn.Z,{size:88,stroke:3,rotationDuration:3,background:e.colors.nullTileSpinnerBackground,foreground:e.colors.nullTileSpinnerForeground})};var pn=e=>{let{placeholderText:t,icon:n,iconSize:o,onFileDrop:i,radius:l,acceptedFileTypes:s,sizes:c,height:d,tileId:u,tileType:p,isGenerating:f=!1}=e;const h=n,g=d<j.dA,[m,y]=(0,a.FV)((0,ln.A)(u)),v=(0,P.t2)(),w=(0,r.useRef)(null),x=(0,r.useRef)(null),{0:C,1:O}=(0,r.useState)(110);(0,b.Z)({ref:x,onResize:e=>{let{width:t}=e;return O(t??110)}});const T=(0,r.useCallback)((e=>{e.target.files&&e.target.files.length>0&&i(e.target.files)}),[i]),I=(0,r.useCallback)((()=>{v.setPropertyPanels([nn.Z.TILE,nn.Z.IMAGE_CREATE],!0)}),[v]),k=(0,r.useCallback)((()=>{var e;null===(e=w.current)||void 0===e||e.click()}),[]),E=(0,r.useCallback)((()=>{v.setPropertyPanel(nn.Z.TILE)}),[v]);return(0,r.useEffect)((()=>{m.triggered&&(m.action===ln.B.CLICK_IMAGE_TILE_CREATE_BUTTON?I():m.action===ln.B.CLICK_IMAGE_TILE_UPLOAD_BUTTON&&k(),y({action:ln.B.NONE,triggered:!1}))}),[]),f?(0,K.jsx)(an,{"data-testid":"null_image_generative_tile",radius:l,children:(0,K.jsx)(un,{})}):(0,K.jsx)(dn,{nullTileRef:x,radius:l,flatMode:g,iconSize:o,tileWidth:C,sizes:c,isImageTile:(0,fe.ck)(p),placeholderText:t,uploadInputRef:w,acceptedFileTypes:s,onUploadChange:T,onClickCreate:I,onClickUpload:k,onClickAddImage:E,Icon:h})},fn=n(17463),hn=n(37865),gn=n(73054),mn=n(94196),bn=n(17704);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=e=>{let{tileId:t,updateTileData:n}=e;const o=(0,a.sJ)((0,fn.vw)(t)),i=function(e,t){const{tomeId:n}=(0,r.useContext)(Tt.z),o=(0,a.Zl)((0,hn.$)(n)),i=(0,a.Zl)((0,fn.vw)(e)),l=(0,a.rb)((0,fn.vw)(e)),s=(0,r.useCallback)((e=>{i((e=>vn(vn({},e),{},{inProgress:!0}))),t((t=>vn(vn({},t),{},{mediaTileData:vn(vn({},gn.R),{},{mediaStatus:p.Jpv.UploadInProgress,mediaFillType:p.EwX.Fill}),fileUploadTileData:{createdAt:(new Date).toISOString(),uploadId:e},__skipRedo:!0})))}),[i,t]),{t:d}=(0,c.$G)(),u=(0,r.useCallback)((e=>{o({title:d("hooks.uploadToImageFailedTitle"),subtitle:d("hooks.uploadToImageFailedSubtitle")}),l(),t((e=>vn(vn({},e),{},{mediaTileData:vn(vn({},e.mediaTileData),{},{aspectRatio:null,backgroundColor:null,mediaStatus:p.Jpv.WaitingForCreation}),fileUploadTileData:vn({},gn.D),__skipUndo:!0})))}),[l,o,t,d]),h=(0,r.useCallback)((e=>{i((t=>e>t.progress?vn(vn({},t),{},{progress:e}):t))}),[i]),g=(0,r.useCallback)((e=>{t((t=>vn(vn({},t),{},{contentLink:e.imagePath,imageAttributes:vn({},e),mediaTileData:vn(vn({},t.mediaTileData),{},{mediaStatus:p.Jpv.Ready,mediaFillType:p.EwX.Fill}),fileUploadTileData:vn({},gn.D),imageTileData:vn({},bn.l),__skipUndo:!0}))),l()}),[t,l]),{apolloClient:m}=(0,f.bp)();return(0,r.useCallback)((e=>{let{file:t,uploadId:r}=e;s(r),(0,mn.I)({apolloClient:m,tomeId:n,file:t,onUploadComplete:g,onUploadError:u,onUploadProgress:h,uploadId:r}),Z.v.addAction("Upload image",{uploadImage:{uploadId:r},file:{name:t.name,type:t.type}})}),[m,g,u,h,s,n])}(t,n);(0,r.useEffect)((()=>{const{uploadId:e,localMediaUrl:t,localFileData:n,inProgress:r}=o;e&&t&&n&&!r&&i({file:n,uploadId:e})}),[o,i]);const l=(0,a._8)((e=>{let{snapshot:n,reset:r}=e;return()=>{const{inProgress:e,uploadId:o,progress:i}=n.getLoadable((0,fn.vw)(t)).getValue();e&&Z.v.addAction("Unmount while uploading image",{uploadImage:{tileId:t,uploadId:o,progress:i}}),r((0,fn.vw)(t))}}),[t]);return(0,r.useEffect)((()=>l),[l]),null},xn=n(58975);var Cn=e=>{let{imageRef:t,containerRef:n,outpaintImageUrl:o,aspectRatio:i,mediaFillType:l,elementConfig:a,outpaintPreviewAvailable:s}=e;const c=(0,r.useMemo)((()=>new xn.Z(0,0,window.devicePixelRatio)),[]),d=(0,r.useCallback)((async()=>{if(n.current){var e;const r=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect(),d=r.height,u=r.width;if(c.setWidth(u),c.setHeight(d),t.current){const e=(0,be.iI)({width:u,height:d},1),n=(0,be.X6)(e,{width:u,height:d},1);c.clear(),await c.drawImageUrl(o,n.position.x,n.position.y,n.size.width,n.size.height);const r=Math.round(.03*Math.max(n.size.width,n.size.height));await c.drawImageUrlWithConfig(t.current.src,l||p.EwX.Crop,u,d,i??1,a||void 0,1,0,0,r);const f=await c.getBlobData();f&&s(f)}}}),[i,c,n,a,t,l,o,s]),u=(0,r.useRef)(0),f=(0,r.useMemo)((()=>new ResizeObserver((e=>{const t=e[0];t.contentRect.width!==u.current&&(d(),u.current=t.contentRect.width)}))),[d]);return(0,r.useEffect)((()=>{d()}),[o]),(0,r.useEffect)((()=>(n.current&&f.observe(n.current),()=>{f.disconnect()})),[n,f]),c.getElement()};function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=e=>{let{tileData:t,setTileData:n,canEdit:o,selected:i,preview:l,width:d,height:u,sizes:f,toggleExpand:h,isMobile:m,isExpanded:b,expandedScale:y,presentMode:v,disableExpandButton:w,isPageActive:O,pageKind:j}=e;const T=(0,r.useRef)(null),I=(0,r.useRef)(null),k=(0,r.useRef)(null),{imageAttributes:E,mediaTileData:D,imageTileData:S}=t,{mediaFillType:R,aspectRatio:_,fillCropCenterX:$,fillCropCenterY:M,fillCropScale:A,backgroundColor:N,captionStyle:z,captionText:F,captionTheme:B,mediaStatus:U}=D||{},{t:W}=(0,c.$G)(),J=(0,a.Zl)(C.mK),[q,Q]=(0,a.FV)((0,C.bP)(t.id)),ee=(0,r.useRef)(null),te=f.tileSizes.radius,ne=f.tileSizes.captionFontSize,re=f.tileSizes.captionPadding,oe=f.tileSizes.captionRadius,le=f.tileSizes.captionInnerPaddingVertical,se=f.tileSizes.captionInnerPaddingSide,ce=(0,$t.Z)(),{0:he,1:ge}=(0,r.useState)(!ce||j===Rt.s.PAGE_ENDPOINT),[ve,we]=(0,a.FV)((0,fn.vw)(t.id)),xe=R||fe.AL,[Oe,je]=(0,a.FV)(x.cm),[Pe,Te]=(0,a.FV)(x.VJ),Ie=o&&i&&!l&&Oe,ke=m&&b,Ee=_t(),De=!l&&(null===q||void 0===q?void 0:q.url)&&(null===q||void 0===q?void 0:q.tileId)===t.id,Se=(0,r.useCallback)((e=>{ee.current=e}),[]),Re=(0,r.useCallback)((e=>{e&&n((t=>jn(jn({},t),{},{mediaTileData:jn(jn({},t.mediaTileData),{},{mediaFillType:p.EwX.Crop,fillCropCenterX:e.posX,fillCropCenterY:e.posY,fillCropScale:e.scale})}))),je(!1)}),[n,je]);let Ze=null;Ie?Ze=Pe===p.EwX.Fill?(0,be.iI)({width:d,height:u},_):Pe===p.EwX.Fit?(0,be.Lj)({width:d,height:u},_):null!=$&&null!=M&&null!=A?{posX:$,posY:M,scale:A}:(0,be.Zn)({width:d,height:u},_):xe===p.EwX.Crop&&_&&null!=$&&null!=M&&null!=A&&(Ze={posX:$,posY:M,scale:A});const _e=ve.inProgress||!1,{0:$e,1:Le}=(0,r.useState)();(0,r.useEffect)((()=>{Le(E?(0,G.Jn)(E,ve,U):null)}),[E,U,ve]);const Me=N||fe.M2,Ae=fe.N3.get(Me)||Me,Ne=z||fe.Io,ze=F||"",Fe=(0,fe.Gj)(E,U),Be=(0,P.t2)(),Ue=(0,r.useCallback)((e=>(0,G.$V)(n,e)),[n]),He=(0,r.useCallback)((e=>{we((0,fn.aY)(e))}),[we]),Ve=(0,r.useCallback)((e=>{if(o&&e){const t=e[0];He(t)}}),[o,He]),We=(0,r.useCallback)((()=>{v&&h()}),[v,h]),Ye=(0,r.useRef)(0),Xe=(0,r.useCallback)((()=>{if(Z.v.addError(new Error("Image failed to load"),{tileId:t.id,imageUrl:$e}),$e&&Ye.current<=5){const e=$e.split("#")[0];Le(`${e}#${Ye.current}`),Ye.current+=1}}),[t.id,$e]),Ge=(0,r.useCallback)((e=>{ge(!0),k.current=e.target,l||!o||_||setTimeout((()=>{const t=(0,be.lW)(e.target.naturalWidth,e.target.naturalHeight),r=(0,fe.Pb)(e.target);n((e=>jn(jn({},e),{},{mediaTileData:jn(jn({},e.mediaTileData),{},{aspectRatio:t},r&&{backgroundColor:r}),__skipUndo:!0})))}),window.safari?1:0)}),[_,l,n,o]),Je=(0,r.useCallback)((e=>{if(!l&&i&&e.clipboardData){const t=e.clipboardData.files[0];t&&(Z.v.addAction("Pasting file to image tile",{file:{name:t.name,type:t.type}}),t.type.startsWith("image/")?He(t):Z.v.addError(new Error("Pasting non-image file to image tile"),{file:{name:t.name,type:t.type}}))}}),[l,i,He]);(0,L.Z)({disabled:!i||l,onPaste:Je});const qe=(0,r.useRef)(null),Ke=(0,r.useRef)(!1),{0:Qe,1:et}=(0,r.useState)(!1),tt=(0,r.useRef)(!1),nt=(0,s.l)(g.VY);(0,r.useEffect)((()=>{!l&&i&&nt&&Qe&&(qe.current&&qe.current.focus(),(0,g.VY)(!1))}),[nt,l,i,Qe]);const{0:rt,1:ot}=(0,r.useState)(B),it=(0,r.useCallback)((e=>{ot(e<.65?p.dbt.Dark:p.dbt.Light)}),[ot]),lt=(0,r.useRef)(null),at=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(O&&o&&$e&&he){let e=null,t=null;lt.current&&at.current&&(e=lt.current.getBoundingClientRect(),t=at.current.getBoundingClientRect()),t&&e&&me(e,t,it,Ae,$e,null,_||null,xe)}}),[O,o,he,$e,Ae,_,xe,z,F,$,M,A,it]),(0,r.useEffect)((()=>{n((e=>rt===B?e:jn(jn({},e),{},{mediaTileData:jn(jn({},e.mediaTileData),{},{captionTheme:rt})})))}),[rt,n]),(0,r.useEffect)((()=>{if(t.type===p.YUT.ImageGenerative&&q&&t.id===(null===q||void 0===q?void 0:q.tileId))return(0,G.OV)(n,q.url,q.prompt,!1),void Q(null);if(i){const e={tileId:t.id,tileWidth:d,tileHeight:u};J(e)}else if(t.id===(null===q||void 0===q?void 0:q.tileId)){const e=ee.current;if(!e)return;const t=new File([e],"image.png");He(t),Be.closePropertyPanel(),J(null),Q(null)}}),[u,q,null===q||void 0===q?void 0:q.tileId,Be,i,He,J,Q,n,t.id,t.type,d]);const st=(0,r.useRef)(void 0),{0:ct,1:dt}=(0,r.useState)(!1),ut=(0,r.useCallback)((()=>{dt(!1),st.current&&(window.clearTimeout(st.current),st.current=void 0)}),[]),pt=(0,r.useCallback)((()=>{dt(!0),st.current&&window.clearTimeout(st.current),st.current=window.setTimeout((()=>{ut()}),3e3)}),[ut]),ft=(0,r.useCallback)((()=>{b||Fe||i&&!tt.current&&(Te(xe),je(!0))}),[i,b,xe,je,Te,Fe]),ht=(0,s.l)(g.k6),gt=(0,r.useCallback)((e=>(n((t=>jn(jn({},t),{},{mediaTileData:jn(jn({},t.mediaTileData),{},{captionText:e})}))),null)),[n]),mt=(0,r.useCallback)((()=>{var e;null===(e=qe.current)||void 0===e||e.focus()}),[]);let bt=null;!l&&$e&&he&&[p.ubC.Top,p.ubC.Bottom].includes(Ne)&&(null===ze||void 0===ze?void 0:ze.length)>0&&(bt=(0,K.jsx)(Ce,{captionStyle:Ne,fontSize:ne*ht,maxWidth:(d-2*re)*ht,padding:re*ht,radius:oe*ht,sidePadding:se*ht,verticalPadding:le*ht,captionTheme:rt,onClick:ye.Z,children:(0,K.jsx)(ue.Z,{labelId:`tile-caption-${t.id}`,plainContent:ze,disabled:!0,wrapText:!0,onContentChange:()=>null})}));let yt=null,vt=!0;if(!$e){if(!o||t.type!==p.YUT.Image&&t.type!==p.YUT.ImageGenerative)return t.type===p.YUT.Giphy?(0,K.jsx)(Kt,{tileId:t.id,updateContentLink:Ue,preview:l,height:u,width:d,tileType:t.type,sizes:f,presentMode:v}):null;{const e=(0,V.An)(p.YUT.Image)[0],n=t.type===p.YUT.ImageGenerative||t.type===p.YUT.Image&&!(null===S||void 0===S||!S.prompt),r=U===p.Jpv.UploadInProgress,o=n&&r;return(0,K.jsx)(pn,{placeholderText:e.label,icon:e.icon,iconSize:f.embedPreviewIconSize,radius:te,onFileDrop:Ve,acceptedFileTypes:fe.lW,sizes:f,height:u,tileId:t.id,tileType:t.type,isGenerating:o})}}{vt=!1;const e=(0,K.jsx)(Bt,{ref:at,children:(0,K.jsx)(Ft,{"data-testid":l?void 0:"image_tile_img",src:$e,layout:"fill",sizes:l?d*window.devicePixelRatio+"px":"(min-width: 1200px) 1200px, 100vw",priority:!0,onLoad:Ge,onError:Xe,$show:he,loader:(0,G.T8)($e),quality:l?50:void 0,draggable:!1,crossOrigin:"anonymous",$fit:xe===p.EwX.Fit})});if(null===Ze)yt=e;else{const{size:{width:t,height:n},position:{x:r,y:i}}=(0,be.X6)(Ze,{width:d,height:u},_);let a=0,s=0,c=0,p=0;if(T.current){const e=T.current.getBoundingClientRect();a=e.x,s=e.y,c=e.height,p=e.width}const f=j===Rt.s.PAGE_ENDPOINT?(0,K.jsx)(Nt,{$left:r,$top:i,$width:t,$height:n,$backgroundImg:(0,G.BX)($e)}):(0,K.jsx)(zt,{onMouseDown:()=>{tt.current=Ke.current},$left:r,$top:i,$width:t,$height:n,$inCrop:Ie,$canEdit:o,$preview:l,$presentMode:v,$isExpanded:b,onClick:We,"data-testid":"image_tile_image_div",children:e});yt=(0,K.jsxs)(K.Fragment,{children:[f,Ie&&(0,K.jsx)(pe.Z,{top:0,left:0,zIndex:ie.y$,children:(0,K.jsx)(Ct,{tileX:a,tileY:s,tileHeight:c,tileWidth:p,tileRadius:te,tileBackground:Ae,element:e,cropData:Ze,onSave:Re,onCancel:()=>{je(!1)},aspectRatio:_,tileElement:bt})})]})}}const wt=vt?null:Ae,xt=!l&&(_e||!he),jt=_e?0===ve.progress:!he,Pt=!m&&!l&&!w&&!Ee&&!b&&$e&&he&&i;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(Ut,{ref:T,"data-testid":"image_tile",$backgroundColor:wt,$inCrop:Ie,$isExpanded:b,$presentMode:v,variants:{unexpanded:{borderRadius:`${te}px`},expanded:{borderRadius:0}},initial:"unexpanded",animate:b?"expanded":"unexpanded",onDoubleClick:ft,onMouseEnter:m?void 0:pt,onMouseMove:m?void 0:pt,onMouseLeave:m?void 0:ut,onPointerDown:m?void 0:pt,onClick:m?h:We,"data-tome-bypass-tap-navigation":b?"ImageTile__ImageDropArea":void 0,children:[yt,i&&De&&(0,K.jsx)(Cn,{imageRef:k,containerRef:T,outpaintImageUrl:q.url,aspectRatio:_,mediaFillType:xe,elementConfig:Ze,outpaintPreviewAvailable:Se}),(0,K.jsx)(St,{isMobile:m,"data-tome-bypass-tap-navigation":"ImageTile__CenterTapToExpand"}),(0,K.jsx)(Y.M,{children:Pt&&ct&&(0,K.jsx)(X.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:H.Z2,children:(0,K.jsx)(ae,{"data-tome-bypass-tap-navigation":"ImageTile__ExpandButton",expandedScale:y,toggleExpand:h,ref:I})},"ExpandButton")})]}),!l&&(0,K.jsx)(wn,{tileId:t.id,updateTileData:n}),xt&&(0,K.jsx)(de,{bottom:!1,right:!0,infinite:jt,progress:ve.progress}),$e&&he&&[p.ubC.Top,p.ubC.Bottom].includes(Ne)&&(i&&!l&&!b||ze.length>0)&&(0,K.jsx)(Ce,{captionStyle:Ne,maxWidth:d-2*re,fontSize:ne,padding:re,radius:oe,sidePadding:se,verticalPadding:le,ref:lt,captionTheme:rt,onClick:ye.Z,onMouseDown:mt,children:(0,K.jsx)(ue.Z,{labelId:`tile-caption-display-${t.id}`,ref:qe,plainContent:ze,disabled:!i,placeholder:W("commandPrompt.tiles.imageTileAddCaptionPlaceholder"),emptyStateLength:7*ne,maxCharacterLimit:160,onContentChange:gt,editorInFocusRef:Ke,wrapText:!0,componentLifeCycleStateTracker:et})}),ke&&(0,K.jsx)(pe.Z,{top:0,left:0,zIndex:ie.y$,children:(0,K.jsx)(Ht,{"data-testid":"exit_expand_mode_button",children:(0,K.jsx)(Ot.Z,{style:{width:28,height:28}})})})]})},Tn=n(67631),In=n.n(Tn),kn=n(70131),En=n(89202),Dn=n(59361),Sn=n(31709);const Rn=["style"];function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $n=(e,t)=>{const{style:n}=e,r=(0,jt.Z)(e,Rn);return(0,K.jsx)(q.Z,_n(_n({ref:t,style:_n({},n),viewBox:"0 0 64 64"},r),{},{children:(0,K.jsx)("path",{d:"M20 46.6906V17.3094C20 14.643 22.8944 12.9835 25.1956 14.3305L50.292 29.021C52.5693 30.3541 52.5693 33.6459 50.292 34.979L25.1956 49.6695C22.8944 51.0165 20 49.357 20 46.6906Z"})}))};var Ln=(0,r.forwardRef)($n);const Mn=(0,n(15045).createFFmpeg)({log:!1});function An(){const e=(0,s.l)(g.ML),t=(0,s.l)(g.DS),n=(0,r.useCallback)(((e,t)=>{const n={videoData:e,onComplete:t};(0,g.ML)([...(0,g.ML)(),n])}),[]);return(0,r.useEffect)((()=>{const e=(0,g.ML)();if(!(0,g.DS)()&&e.length>0){(0,g.DS)(!0);const e=async()=>{Mn.isLoaded()||await Mn.load();const{videoData:e,onComplete:t}=(()=>{const e=(0,g.ML)(),t=e[0],n=e.slice(1);return(0,g.ML)([...n]),t})();Mn.FS("writeFile","video",e),await Mn.run("-i","video","-vframes","1","image.jpeg");const n=Mn.FS("readFile","image.jpeg");Mn.FS("unlink","video"),Mn.FS("unlink","image.jpeg");t(URL.createObjectURL(new Blob([n],{type:"image/jpeg"}))),(0,g.DS)(!1)};e()}}),[e,t]),[n]}function Nn(e,t){const n=(0,r.useRef)(),o=(0,r.useRef)(performance.now()),i=(0,r.useRef)(performance.now()),l=()=>{const t=performance.now(),r=(t-i.current)/1e3,a=(t-o.current)/1e3;e({time:r,delta:a}),o.current=t,n.current=requestAnimationFrame(l)};(0,r.useEffect)((()=>(n.current=requestAnimationFrame(l),()=>{n.current&&cancelAnimationFrame(n.current)})),t)}var zn=n(84827),Fn=n(77206);var Bn=e=>{const{isMobile:t,element:n,hoverElement:o,timeoutSeconds:i,isPageActive:l}=e,{0:c,1:d}=(0,r.useState)(!0),{0:u,1:p}=(0,r.useState)(!1),f=(0,r.useRef)(-1),h=(0,r.useRef)(-1),m=(0,a.sJ)(g.DH),b=(0,s.l)(g.ii),y=(0,r.useRef)(!1);let v;return(0,r.useEffect)((()=>{y.current=b}),[b]),(0,r.useEffect)((()=>{const e=()=>{v&&clearTimeout(v),v=setTimeout((()=>{d(!0)}),1e3*i)},r=(t,r)=>{if(e(),n.current&&t!==f.current&&r!==h.current){const e=n.current.getBoundingClientRect();t>=e.left&&t<=e.right&&r<=e.bottom&&r>=e.top&&d(!1)}f.current=t,h.current=r},o=t=>{"Space"!==t.code||y.current||(e(),d(!1))},l=()=>{d(!0)};if(e(),t){const e=e=>r(e.touches[0].clientX,e.touches[0].clientY);return document.documentElement.addEventListener("touchstart",e),()=>document.documentElement.removeEventListener("touchstart",e)}const a=e=>r(e.clientX,e.clientY);window.addEventListener("mousemove",a),window.addEventListener("keydown",o);const s=n.current;return null===s||void 0===s||s.addEventListener("mouseleave",l),()=>{v&&clearTimeout(v),window.removeEventListener("mousemove",a),window.removeEventListener("keydown",o),null===s||void 0===s||s.removeEventListener("mouseleave",l)}}),[]),(0,r.useEffect)((()=>{const e=()=>{p(!0)},t=()=>{p(!1)},n=o.current;return n&&(n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t)),()=>{n&&(n.removeEventListener("mouseenter",e),n.removeEventListener("mouseleave",t))}}),[o]),(0,r.useEffect)((()=>{(null!==m&&o.current||o.current&&null===m)&&p(!1)}),[m]),(0,r.useEffect)((()=>{l||d(!0),v&&clearTimeout(v)}),[l]),{isInactive:c&&!u}},Un=n(111);const Hn=(e,t,n)=>Math.min(Math.max(e,t),n),Vn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e-t+(n?t:0)+(n?-r:r)+(n?-1:1)},Wn=(e,t,n)=>[(1-e)*n,t*n],Yn=J.ZP.div.withConfig({displayName:"VideoTrimstyles__TrimPanel",componentId:"sc-150jsnu-0"})(["width:","px;height:","px;background-color:",";border-radius:20px;border:1px solid ",";backdrop-filter:blur(50px);"],(e=>e.width),(e=>e.height),(e=>e.theme.colors.videoTrimPanelBackground),(e=>e.theme.colors.videoTrimPanelBorder)),Xn=J.ZP.div.withConfig({displayName:"VideoTrimstyles__FilmstripTrimmer",componentId:"sc-150jsnu-1"})(["margin-left:","px;background:",";width:","px;height:","px;clip-path:",";"],(e=>e.marginLeft),(e=>e.theme.colors.uiAccent),(e=>e.width),(e=>e.height),(e=>{const[t,n]=Wn(e.rightHandlePercentage,e.leftHandlePercentage,e.width);return`inset(0 ${t}px 0 ${n}px)`})),Gn=J.ZP.div.withConfig({displayName:"VideoTrimstyles__FilmstripContainer",componentId:"sc-150jsnu-2"})(["width:100%;height:","px;position:absolute;bottom:12px;"],(e=>e.height)),Jn=J.ZP.canvas.withConfig({displayName:"VideoTrimstyles__FilmstripCanvas",componentId:"sc-150jsnu-3"})(["border-radius:4px;position:absolute;bottom:2px;margin-left:","px;"],(e=>e.offset)),qn=J.ZP.div.withConfig({displayName:"VideoTrimstyles__DragHandle",componentId:"sc-150jsnu-4"})(["height:","px;width:","px;background:",";position:absolute;bottom:0;display:flex;align-items:center;justify-content:center;left:","px;",""],(e=>e.height),(e=>e.width),(e=>e.theme.colors.uiAccent),(e=>Vn(e.offset,e.width,e.right,e.percentOffset)),(e=>e.right?"border-radius: 0 8px 8px 0;":"border-radius: 8px 0 0 8px;")),Kn=J.ZP.div.withConfig({displayName:"VideoTrimstyles__DragHandleNotch",componentId:"sc-150jsnu-5"})(["height:36%;width:4px;border-radius:",";background-color:",";"],(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>e.theme.colors.videoTrimDragHandleNotch)),Qn=J.ZP.canvas.withConfig({displayName:"VideoTrimstyles__ScreenshotCanvas",componentId:"sc-150jsnu-6"})(["display:none;"]),er=J.ZP.video.withConfig({displayName:"VideoTrimstyles__VideoPlayer",componentId:"sc-150jsnu-7"})(["width:","px;height:","px;display:none;"],(e=>e.width),(e=>e.height)),tr=J.ZP.div.withConfig({displayName:"VideoTrimstyles__TrimText",componentId:"sc-150jsnu-8"})(["top:17px;left:16px;position:absolute;color:",";font-size:",";font-weight:bold;"],(e=>e.theme.colors.videoTrimPanelText),(e=>e.theme.fontSizes.smmd)),nr=J.ZP.div.withConfig({displayName:"VideoTrimstyles__ButtonContainer",componentId:"sc-150jsnu-9"})(["position:absolute;top:12px;right:12px;display:flex;flex-direction:row;gap:8px;"]);function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ir=e=>{let{uiSizes:t,videoHeight:n,videoWidth:o,videoDuration:i,videoSrc:l,initTrimStart:a,initTrimEnd:s,cancelTrim:d,isLocalVideo:u,mainPlayer:p,setPreviewTrim:f,setTrim:h}=e;const{height:g,width:m,filmstripHeight:b,filmstripWidth:y,trimmerWidth:v,trimmerHeight:w}=t,x=b,C=b*(o/n),O=Math.ceil(y/C)+1,j=i/O,{t:P}=(0,c.$G)(),T=(0,J.Fg)(),I=(0,r.useRef)(null),k=(0,r.useRef)(null),E=(0,r.useRef)(null),D=(0,r.useMemo)((()=>(0,Un.Z)((e=>{void 0===e||Number.isNaN(e)||(p.currentTime=e)}),400)),[p]),{0:S,1:R}=(0,r.useState)([]),_=(0,r.useRef)(null),$=(0,r.useRef)(null),L=(0,r.useRef)(null),{0:M,1:A}=(0,r.useState)(s/i),{0:N,1:z}=(0,r.useState)(a/i);(0,r.useEffect)((()=>{const e=I.current;if(e&&!u&&!e.canPlayType("application/vnd.apple.mpegurl")&&In().isSupported()){const t=new(In())({startLevel:0,capLevelToPlayerSize:!0,progressive:!0});t.loadSource(l),t.attachMedia(e)}}),[l,u]);const F=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;try{if(k.current&&I.current){const n=k.current.getContext("2d");if(n){n.fillStyle=T.colors.videoTrimFilmstripBackground,n.fillRect(0,0,y,b);for(let e=0;e<S.length;e++)n.drawImage(S[e],C*e,0,C,x);n.fillStyle=T.colors.videoTrimFilmstripBackground,n.fillRect(y-(1-e)*y,0,y,b),n.fillRect(0,0,y*t,b)}}}catch(n){Z.v.addError(n),console.error("Error drawing filmstrip",n)}}),[M,N,T.colors.videoTrimFilmstripBackground,y,b,S,C,x]);(0,r.useEffect)((()=>{I.current&&F()}),[I,y,b,F]),(0,r.useEffect)((()=>{if(0===S.length&&I.current){I.current.play().then((()=>{I.current.currentTime=.1})).catch((()=>!1))}F()}),[I,S,F]);const B=(v-y)/2,U=(m-y)/2,H=(0,Oe.c0)((e=>{let{down:t,movement:[n]}=e;let r=M+n/y;r=Hn(r,N,1);const o=Vn(U+y,B,!0,(1-r)*y);_.current&&(_.current.style.left=`${o}px`);const[l,a]=Wn(r,N,y);L.current&&(L.current.style.clipPath=`inset(0 ${l}px 0 ${a}px)`),D(r*i),t||(A(r),f(N*i,r*i)),F(r)})),V=(0,Oe.c0)((e=>{let{down:t,movement:[n]}=e;let r=N+n/y;r=Hn(r,0,M);const o=Vn(U,B,!1,r*y);$.current&&($.current.style.left=`${o}px`);const[l,a]=Wn(M,r,y);L.current&&(L.current.style.clipPath=`inset(0 ${l}px 0 ${a}px)`),D(r*i),t||(z(r),f(r*i,M*i)),F(M,r)}));return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(Yn,{height:g,width:m,children:[(0,K.jsx)(tr,{children:P("commandPrompt.tiles.videoTile.videoTrim.trimTitle")}),(0,K.jsxs)(nr,{children:[(0,K.jsx)(Ze,{onClick:d,children:P("commandPrompt.tiles.videoTile.videoTrim.cancelTrimButton")}),(0,K.jsx)(Ze,{color:"primary",onClick:()=>h(N*i,M*i),children:P("commandPrompt.tiles.videoTile.videoTrim.doneTrimButton")})]}),(0,K.jsxs)(Gn,{height:w,children:[(0,K.jsx)(Xn,{ref:L,height:w,width:y,marginLeft:(m-y)/2,rightHandlePercentage:M,leftHandlePercentage:N}),(0,K.jsx)(Jn,{height:b,width:y,offset:(m-y)/2,ref:k}),(0,K.jsx)(qn,or(or({},V()),{},{"data-disable-drag":!0,"data-testid":"trim_left_handle",ref:$,height:w,width:B,offset:U,percentOffset:N*y,children:(0,K.jsx)(Kn,{})})),(0,K.jsx)(qn,or(or({right:!0},H()),{},{"data-disable-drag":!0,ref:_,height:w,width:B,offset:U+y,percentOffset:(1-M)*y,children:(0,K.jsx)(Kn,{})}))]})]}),(0,K.jsx)(er,{muted:!0,onSeeked:()=>{var e,t;const n=null===(e=E.current)||void 0===e?void 0:e.getContext("2d");null===n||void 0===n||n.drawImage(I.current,0,0,C,x);const r=(null===(t=E.current)||void 0===t?void 0:t.toDataURL("image/jpeg"))||"",o=new Image;if(o.src=r,R([...S,o]),S.length<O){const e=I.current.currentTime+j;I.current.currentTime=e}},ref:I,crossOrigin:"anonymous",src:l,width:C,height:x}),(0,K.jsx)(Qn,{ref:E,width:C,height:x})]})},lr=n(62820);const ar=["src","alt"];function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const dr=J.ZP.div.withConfig({displayName:"ImageWithLoader__LoadingDiv",componentId:"vpfbqb-0"})(["width:100%;height:100%;"]);var ur=e=>{const{src:t,alt:n}=e,o=(0,jt.Z)(e,ar),{0:i,1:l}=(0,r.useState)(!1),a=(0,r.useRef)();return(0,r.useEffect)((()=>{if(t&&t!==a.current&&(a.current=t,!t.startsWith("blob:"))){const e=new Image;e.src=t,e.onload=()=>l(!1),l(!0)}}),[t]),(0,K.jsx)(K.Fragment,{children:i?(0,K.jsx)(dr,{children:(0,K.jsx)(lr.Z,{shouldCenter:!0})}):(0,K.jsx)("img",cr({src:t,alt:n},o))})};const pr=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoTilestyles__VideoFrame",componentId:"sc-1a6hugy-0"})(["width:100%;height:100%;"," display:flex;justify-content:center;align-items:center;position:relative;overflow:",";-webkit-mask-image:-webkit-radial-gradient(white,black);"],(e=>{let{$showPlaceholderBackground:t,$backgroundColor:n}=e;return!t&&`\n    background-color: ${n};\n  `}),(e=>e.$inCrop?"inherit":"hidden")),fr=J.ZP.div.withConfig({displayName:"VideoTilestyles__VideoDiv",componentId:"sc-1a6hugy-1"})(["",";",";visibility:",";z-index:-1;"],(e=>{let{$crop:t}=e;return t&&(0,J.iv)(["position:absolute;top:0;left:0;transform:translate( ","px,","px );width:","px;height:","px;"],(e=>e.$left),(e=>e.$top),(e=>e.$width),(e=>e.$height))}),(e=>{let{$crop:t}=e;return!t&&(0,J.iv)(["display:flex;width:100%;height:100%;"])}),(e=>e.$inCrop?"hidden":"inherit")),hr=J.ZP.video.withConfig({displayName:"VideoTilestyles__VideoPlayer",componentId:"sc-1a6hugy-2"})(["width:100%;height:100%;object-fit:",";position:absolute;"],(e=>{let{$fit:t}=e;return t?"contain":"cover"})),gr=(0,J.ZP)(ur).withConfig({displayName:"VideoTilestyles__ImageWrapper",componentId:"sc-1a6hugy-3"})(["width:100%;height:100%;object-fit:cover;"]),mr=J.ZP.img.withConfig({displayName:"VideoTilestyles__PreviewImageWrapper",componentId:"sc-1a6hugy-4"})(["",";",";object-fit:",";"],(e=>{let{$crop:t}=e;return t&&(0,J.iv)(["position:absolute;top:0;left:0;transform:translate( ","px,","px );width:","px;height:","px;"],(e=>e.$left),(e=>e.$top),(e=>e.$width),(e=>e.$height))}),(e=>{let{$crop:t}=e;return!t&&(0,J.iv)(["position:absolute;min-width:100%;max-width:100%;min-height:100%;max-height:100%;"])}),(e=>{let{$fit:t}=e;return t?"contain":"cover"})),br=J.ZP.div.withConfig({displayName:"VideoTilestyles__TrimContainer",componentId:"sc-1a6hugy-5"})(["position:absolute;left:","px;top:","px;"],(e=>{let{$left:t}=e;return t}),(e=>{let{$top:t}=e;return t})),yr=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoTilestyles__LargePlayBackground",componentId:"sc-1a6hugy-6"})(["height:80px;width:80px;font-size:100px;backdrop-filter:blur(50px);position:absolute;border-radius:100%;background:",";display:flex;align-items:center;justify-content:center;cursor:pointer;& ","{fill:","};}"],(e=>{let{theme:t}=e;return t.colors.videoLargePlayBackground}),q.K,(e=>{let{theme:t}=e;return t.colors.videoLargePlayButton})),vr=J.ZP.div.withConfig({displayName:"VideoTilestyles__BufferContainer",componentId:"sc-1a6hugy-7"})(["height:64px;width:64px;position:absolute;display:flex;align-items:center;justify-content:center;"]);function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cr=e=>{let{playerRef:t,tileX:n,tileY:o,trimStart:i,trimEnd:l,setTrimStart:a,setTrimEnd:s,trimPanelSizes:d,pagePadding:u,tileHeight:p,tileWidth:f,useLocal:h,videoSrc:m,trimStartData:b,trimEndData:y,updateTileData:v}=e;const w=u+11;let x=o+p+w;x+d.height>window.innerHeight&&(x=window.innerHeight-d.height-w);const C=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),O=(0,r.useCallback)(((e,t)=>{a(e),s(t)}),[s,a]),{t:j}=(0,c.$G)(),P=(0,r.useCallback)(((e,t)=>{v((n=>xr(xr({},n),{},{videoTileData:xr(xr({},n.videoTileData),{},{trimStart:e,trimEnd:t})}))),(0,g.PS)(!1),(0,g.ak)({message:j("commandPrompt.tiles.videoTile.videoUploadHandler.videoTrimSavedMessage"),action:"undo"})}),[v,j]),T=(0,r.useCallback)((()=>{(0,g.PS)(!1),a(b),s(y)}),[s,a,y,b]);return t.current?(0,K.jsx)(pe.Z,{top:0,left:0,zIndex:ie.y$,children:(0,K.jsx)(br,{$left:n-(d.width-f)/2,$top:x,onMouseDown:C,children:(0,K.jsx)(ir,{uiSizes:d,isLocalVideo:h,videoWidth:t.current.videoWidth,videoHeight:t.current.videoHeight,videoDuration:t.current.duration,videoSrc:m,initTrimStart:i,initTrimEnd:l||t.current.duration,cancelTrim:T,mainPlayer:t.current,setPreviewTrim:O,setTrim:P})})}):null},Or=n(36947);const jr=["style"];function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ir=(e,t)=>{const{style:n}=e,r=(0,jt.Z)(e,jr);return(0,K.jsx)(q.Z,Tr(Tr({ref:t,style:Tr({},n),viewBox:"0 0 16 16"},r),{},{children:(0,K.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.2525 12.5051H4.7525V12.5051C4.33829 12.5051 4.0025 12.1693 4.0025 11.7551V4.25513V4.25513C4.0025 3.84091 4.33829 3.50513 4.7525 3.50513H6.2525V3.50513C6.66671 3.50513 7.0025 3.84091 7.0025 4.25513V11.7551V11.7551C7.0025 12.1693 6.66671 12.5051 6.2525 12.5051V12.5051ZM9.7525 12.5051V12.5051C9.33829 12.5051 9.0025 12.1693 9.0025 11.7551V4.25513V4.25513C9.0025 3.84091 9.33829 3.50513 9.7525 3.50513H11.2525V3.50513C11.6667 3.50513 12.0025 3.84091 12.0025 4.25513V11.7551C12.0025 12.1693 11.6667 12.5051 11.2525 12.5051H9.7525Z",fill:"white"})}))};var kr=(0,r.forwardRef)(Ir);function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sr=(0,r.forwardRef)(((e,t)=>(0,K.jsx)(q.Z,Dr(Dr({ref:t,viewBox:"0 0 20 20"},e),{},{children:(0,K.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9216 15.7355V15.7355C13.6914 15.481 13.711 15.0882 13.9655 14.858C13.9673 14.8563 13.9692 14.8546 13.971 14.853H13.971C16.6477 12.6463 17.0286 8.68748 14.8218 6.01083C14.5661 5.70065 14.2812 5.41574 13.971 5.16002V5.16002C13.7138 4.93283 13.6895 4.54017 13.9167 4.28299C13.9183 4.28115 13.9199 4.27933 13.9216 4.27752V4.27752C14.1535 4.02607 14.5431 4.00415 14.8018 4.22802V4.22802C17.9932 6.89526 18.4181 11.6446 15.7508 14.836C15.4634 15.18 15.1458 15.4976 14.8018 15.7851V15.7851C14.5431 16.0089 14.1535 15.987 13.9216 15.7355V15.7355ZM12.5085 14.3042V14.3042C12.21 14.4717 11.8326 14.3742 11.6525 14.0832V14.0832C11.4746 13.7931 11.5655 13.4137 11.8556 13.2357C11.8614 13.2322 11.8672 13.2287 11.8731 13.2254V13.2254C13.6509 12.2228 14.2793 9.96883 13.2767 8.19101C12.9456 7.60391 12.4602 7.11854 11.8731 6.78744V6.78744C11.5773 6.61916 11.4739 6.24294 11.6422 5.94713C11.6455 5.94124 11.649 5.9354 11.6525 5.92963V5.92963C11.8326 5.63859 12.21 5.54114 12.5085 5.7086V5.7086C14.8821 7.06417 15.7074 10.0873 14.3518 12.4609C13.9131 13.229 13.2766 13.8656 12.5085 14.3042L12.5085 14.3042ZM2.50348 8.13386V8.13381C2.50366 7.61593 2.9236 7.19623 3.44149 7.19636H5.16043V7.19636C5.49193 7.19636 5.80988 7.06478 6.04443 6.83051L8.62324 4.25467V4.25467C8.86765 4.01058 9.26366 4.01085 9.50774 4.25526C9.62478 4.37245 9.69055 4.53127 9.69064 4.69689V15.3188V15.3187C9.69047 15.6643 9.4102 15.9443 9.06464 15.9441C8.89893 15.944 8.74002 15.8782 8.62278 15.7611L6.04657 13.1877V13.1877C5.81201 12.9534 5.49403 12.8219 5.16251 12.8219H3.44145H3.44145C2.92356 12.822 2.50362 12.4023 2.50348 11.8844L2.50348 8.13386Z"})}))));function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=(0,r.forwardRef)(((e,t)=>(0,K.jsx)(q.Z,Zr(Zr({ref:t,viewBox:"0 0 20 20"},e),{},{children:(0,K.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1898 4.69197V9.71475V9.71475C12.1896 9.87778 12.0573 10.0098 11.8943 10.0096C11.8161 10.0096 11.7412 9.97847 11.6859 9.92322L8.88662 7.1265V7.1265C8.70806 6.94824 8.70781 6.65898 8.88607 6.48042C8.88633 6.48015 8.8866 6.47989 8.88687 6.47962L11.1219 4.24962V4.24962C11.3665 4.00544 11.7627 4.00577 12.0069 4.25035C12.1239 4.36755 12.1896 4.52636 12.1898 4.69197L12.1898 4.69197ZM5.88975 7.66569L11.8235 13.5941V13.5941C12.058 13.8283 12.1898 14.1461 12.1898 14.4775V15.3087V15.3087C12.1894 15.6545 11.9088 15.9344 11.563 15.934C11.3975 15.9338 11.2387 15.8681 11.1215 15.7511L8.54337 13.1787V13.1787C8.30856 12.9446 7.99044 12.8131 7.65881 12.8131H5.93662V12.8131C5.41855 12.8134 4.99832 12.3937 4.998 11.8756V8.1275V8.12747C4.99789 8.03303 5.01229 7.93914 5.04069 7.84907V7.84907C5.13693 7.58289 5.43072 7.44512 5.69691 7.54135C5.76976 7.56769 5.83569 7.6102 5.88975 7.66568L5.88975 7.66569ZM3.30225 3.31162V3.31162C3.5465 3.06751 3.94237 3.06751 4.18662 3.31162L16.6972 15.8133V15.8133C16.9414 16.0576 16.9412 16.4535 16.697 16.6976C16.4527 16.9417 16.0568 16.9416 15.8127 16.6973L3.30237 4.19575V4.19575C3.05827 3.95194 3.05803 3.55641 3.30184 3.31231C3.30202 3.31213 3.3022 3.31196 3.30237 3.31178L3.30225 3.31162Z"})})))),$r=n(57509);const Lr=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoPlayerControlsstyles__ControlBackground",componentId:"g64zqj-0"})(["width:calc(100% - ","px);max-width:","px;height:","px;background:",";position:absolute;bottom:","px;border-radius:",";display:flex;align-items:center;justify-content:center;overflow:hidden;font-family:",";touch-action:none;@supports ","{&,*{-webkit-tap-highlight-color:transparent;}}& ","{fill:","};}"],32,(e=>e.$maxWidth),32,(e=>e.theme.colors.overlayButtonGray),16,(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>{let{theme:t}=e;return t.fonts.ui}),$r.Gp.safariOnIos,q.K,(e=>{let{theme:t}=e;return t.colors.videoLargePlayButton})),Mr=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoPlayerControlsstyles__ControlPauseWrapper",componentId:"g64zqj-1"})(["margin-left:","px;margin-right:","px;margin-top:","px;"],10,12,3),Ar=J.ZP.div.withConfig({displayName:"VideoPlayerControlsstyles__ScrubberBackground",componentId:"g64zqj-2"})(["width:100%;min-width:10px;height:","px;background:",";margin-right:","px;"],2,(e=>e.theme.colors.contrast20),12),Nr=J.ZP.div.withConfig({displayName:"VideoPlayerControlsstyles__ScrubberBackgroundClickArea",componentId:"g64zqj-3"})(["width:100%;min-width:10px;height:28px;position:relative;top:-41px;overflow:hidden;"]),zr=J.ZP.div.attrs((e=>{let{percentageComplete:t}=e;return{style:{clipPath:`inset(0 ${100*(1-t)}% 0 0)`}}})).withConfig({displayName:"VideoPlayerControlsstyles__ScrubberForeground",componentId:"g64zqj-4"})(["width:100%;height:","px;background:",";"],2,(e=>e.theme.colors.videoControls)),Fr=J.ZP.div.withConfig({displayName:"VideoPlayerControlsstyles__ScrubberKnob",componentId:"g64zqj-5"})(["width:","px;height:","px;position:relative;margin-top:-","px;top:0;left:0;z-index:",";cursor:default;user-select:none;&::before{background-color:",";border-radius:",";content:'';display:block;height:","px;margin-top:","px;pointer-events:none;position:absolute;transform:scale(1);transform-origin:50% 50%;top:","px;width:","px;}@media ","{&:hover{&::before{transform:scale(",");}}}&.dragging{cursor:pointer;&::before{transform:scale(",");}&:not([style])::before,&[style*='left: 0%']::before,&[style*='left: 100%']::before{transform:scale(",");}}"],48,48,22,ie.Dl,(e=>{let{theme:t}=e;return t.colors.videoControls}),(e=>{let{theme:t}=e;return t.borderRadius.full}),8,1,16,8,$r.be.mouse,1.3,1.5,1.3),Br=J.ZP.div.withConfig({displayName:"VideoPlayerControlsstyles__Timecode",componentId:"g64zqj-6"})(["font-size:10px;font-weight:400;line-height:13px;height:13px;color:",";margin-right:","px;white-space:nowrap;cursor:default;text-align:right;&::before{display:block;content:attr(data-placeholder);margin-bottom:-13px;pointer-events:none;user-select:none;visibility:hidden;}"],(e=>e.theme.colors.videoControls),12),Ur=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoPlayerControlsstyles__ControlVolumeWrapper",componentId:"g64zqj-7"})(["margin-right:","px;margin-top:","px;"],12,3),Hr=(0,J.ZP)(X.E.div).withConfig({displayName:"VideoPlayerControlsstyles__ControlExpandWrapper",componentId:"g64zqj-8"})(["margin-right:","px;margin-top:","px;opacity:",";"],10,3,(e=>e.$disabled?.25:1));function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yr=e=>{const t=e/60,n=Math.floor(t),r=n.toString(),o=60*(t-n);return`${r}:${o>=10?o.toString().slice(0,2):`0${o.toString().slice(0,1)}`}`},Xr=e=>`${new Array(e).fill("0").join("")}`;var Gr=(0,r.forwardRef)(((e,t)=>{var n;const{videoPlayerRef:o,pauseVideo:i,playVideo:l,isPlaying:a,toggleExpand:s,isExpanded:c,disableExpand:d,expandedScale:u,toggleMute:p,isMuted:f,trimStart:h,trimEnd:g,maxWidth:m}=e,b=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null),w=(0,r.useRef)(null),x=(0,r.useRef)(!1),C=(0,r.useRef)(0),O=(0,r.useRef)(null),j=(null===(n=O.current)||void 0===n?void 0:n.getBoundingClientRect().width)||200,P=j>=150,T=j>=200,I=j>=100,k=j>=100,E=g-h,D=(e=>{const[t,n]=Yr(e||0).split(":"),r=`${t}`.length,o=`${n}`.length,i=[Xr(r),Xr(o)].join(":");return`${i} / ${i}`})(E),S=Math.max(o.current?o.current.currentTime-h:0,0),R=S/E;Nn((()=>{const e=g-h,t=Math.max(o.current?o.current.currentTime-h:0,0),n=t/e,r=`${Yr(t)} / ${Yr(e)}`;if(b.current&&(b.current.innerHTML=r),y.current&&(y.current.style.clipPath=`inset(0 ${100*(1-n)}% 0 0)`),w.current&&!x.current&&y.current&&(w.current.style.left=100*n+"%"),x.current&&o.current&&w.current){const e=parseFloat(w.current.style.left.slice(0,-1))/100*E+h;Number.isFinite(e)&&(o.current.currentTime=e)}}),[g,h]);const Z=(0,Oe.c0)((e=>{let{event:t,down:n,first:r,movement:[o]}=e;if(null===t||void 0===t||t.stopPropagation(),w.current&&w.current.classList.toggle("dragging",n),n&&r&&(x.current=!0,w.current&&(C.current=parseFloat(w.current.style.left.slice(0,-1)))),n){if(v.current){const e=o/v.current.getBoundingClientRect().width*100,t=Hn(C.current+e,0,100);w.current&&(w.current.style.left=`${t}%`)}}else x.current=!1,C.current=0})),_=(0,K.jsxs)(Ar,{ref:v,children:[(0,K.jsx)(zr,{percentageComplete:R,ref:y}),(0,K.jsx)(Fr,Wr(Wr({ref:w},Z()),{},{onClick:ye.Z})),(0,K.jsx)(Nr,{onClick:e=>{if(v.current&&o.current){e.stopPropagation();const t=v.current.getBoundingClientRect(),n=t.width,r=e.clientX-t.left,i=Hn(r/n,0,1);o.current.currentTime=i*E+h}}})]}),$=(0,K.jsxs)(Br,{ref:b,"data-placeholder":D,children:[Yr(S)," / ",Yr(E)]}),L=(0,K.jsx)(Ur,{onClick:e=>{e.stopPropagation(),p()},whileTap:{scale:.8},children:f?(0,K.jsx)(_r,{style:{width:"16px",height:"16px"}}):(0,K.jsx)(Sr,{style:{width:"16px",height:"16px"}})}),M=(0,K.jsx)(Hr,{onClick:e=>{e.stopPropagation(),d||s()},whileTap:{scale:d?1:.8},$disabled:d,children:c?(0,K.jsx)(te,{style:{width:16,height:16}}):(0,K.jsx)(oe,{style:{width:16,height:16}})});return(0,K.jsxs)(Lr,{"data-tome-bypass-tap-navigation":"VideoTile__VideoPlayerControls",initial:{opacity:0},animate:{opacity:1,scale:1/u},exit:{opacity:0},transition:H.Z2,$maxWidth:m,ref:(0,Or.l)([t,O]),"data-disable-drag":!0,onMouseDown:ye.Z,onClick:ye.Z,children:[(0,K.jsx)(Mr,{onClick:e=>{e.stopPropagation(),a?i():l()},whileTap:{scale:.8},children:a?(0,K.jsx)(kr,{style:{width:"16px",height:"16px"}}):(0,K.jsx)(Ln,{style:{width:"16px",height:"16px"}})}),P&&_,T&&$,I&&L,k&&M]})}));var Jr=e=>{const{videoPlayerRef:t}=e,{0:n,1:o}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>o(!1),n=()=>o(!0),r=t.current;return null===r||void 0===r||r.addEventListener("playing",e),null===r||void 0===r||r.addEventListener("pause",e),null===r||void 0===r||r.addEventListener("waiting",n),()=>{null===r||void 0===r||r.removeEventListener("playing",e),null===r||void 0===r||r.removeEventListener("pause",e),null===r||void 0===r||r.removeEventListener("waiting",n)}}),[t]),n?(0,K.jsx)(se.Z,{width:64,height:64,infinite:!0,light:!1,circleWidth:4,spinnerWidth:6}):null},qr=n(30383);function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eo=n(48264);function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ro=e=>{let{tileId:t,videoStatus:n,videoId:o,updateTileData:i,persistedUploadStatus:l}=e;const s=(0,a.sJ)((0,fn.vw)(t)),d=(0,a.rb)((0,fn.vw)(t)),u=function(e,t){const{tomeId:n}=(0,r.useContext)(Tt.z),o=(0,eo.Z)({tomeId:n}),i=(0,a.Zl)((0,fn.vw)(t)),l=(0,a.Zl)((0,hn.$)(n)),s=(0,r.useCallback)((t=>{i((e=>no(no({},e),{},{inProgress:!0}))),e((e=>no(no({},e),{},{videoTileData:no(no({},e.videoTileData),{},{trimStart:0,trimEnd:null,url:null,thumbnailUrl:null}),mediaTileData:no(no({},e.mediaTileData),{},{aspectRatio:null,backgroundColor:null,fillCropCenterX:null,fillCropCenterY:null,fillCropScale:null,mediaFillType:null,mediaStatus:p.Jpv.UploadInProgress}),fileUploadTileData:{createdAt:(new Date).toISOString(),uploadId:t},__skipRedo:!0})))}),[i,e]),d=(0,r.useCallback)((e=>{i((t=>no(no({},t),{},{progress:e})))}),[i]),{t:u}=(0,c.$G)(),f=(0,r.useCallback)((()=>{l({title:u("hooks.uploadToVideoFailedTitle"),subtitle:u("hooks.uploadToVideoFailedSubtitle")}),e((e=>no(no({},e),{},{mediaTileData:no(no({},e.mediaTileData),{},{mediaStatus:p.Jpv.WaitingForCreation}),fileUploadTileData:{uploadId:null,createdAt:null},__skipUndo:!0})))}),[l,e,u]),h=(0,r.useCallback)((()=>{i((e=>no(no({},e),{},{progress:1})))}),[i]);return(0,r.useCallback)((e=>{let{file:n,localVideoUrl:r,uploadId:i}=e;s(i),o(n,n.name,r,i,t,void 0,d,h,f),Z.v.addAction("Upload video",{uploadVideo:{uploadId:i},file:{name:n.name,type:n.type}})}),[h,f,o,s,t,d])}(i,t),f=(0,En.Z)(n);(0,r.useEffect)((()=>{l===p.Jpv.Ready&&d()}),[l,d]),(0,r.useEffect)((()=>{const{uploadId:e,localMediaUrl:t,localFileData:n,inProgress:r}=s;e&&t&&n&&!r&&u({file:n,localVideoUrl:t,uploadId:e})}),[s,u]);const h=(0,a._8)((e=>{let{snapshot:n,reset:r}=e;return()=>{const{inProgress:e,uploadId:o,progress:i}=n.getLoadable((0,fn.vw)(t)).getValue();e&&Z.v.addAction("Unmount while uploading video",{uploadVideo:{tileId:t,uploadId:o,progress:i}}),r((0,fn.vw)(t))}}),[t]);(0,r.useEffect)((()=>h),[h]);const{t:m}=(0,c.$G)();return(0,r.useEffect)((()=>{void 0!==f&&f!==n&&(n===p.Kwn.Errored?(0,g.ak)({message:m("commandPrompt.tiles.videoTile.videoUploadHandler.tomeToastErrorMessage")}):n===p.Kwn.Ready&&Z.v.addAction("fileUpload",{uploadVideo:{videoId:o,processed:Date.now()}}))}),[n,f,o,m]),null};function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let lo;var ao=e=>{var t,o,i;let{radius:l,preview:d,selected:u,isOtherTileSelected:f,updateTileData:h,tileData:m,rowIndex:b,tileIndex:y,isPageActive:v,editMode:w,presentMode:C,sizes:O,isSingle:j,isMobile:P,isExpanded:T,toggleExpand:I,expandedScale:k,width:E,height:D,disableExpand:S,hideVideoControls:R}=e;const{id:_,tomeId:$,videoTileData:M,mediaTileData:A}=m,{autoplay:N,url:z,thumbnailUrl:F,trimStart:B,trimEnd:U,loop:H}=M||{},{aspectRatio:W,fillCropCenterX:X,fillCropCenterY:G,fillCropScale:J,mediaFillType:q,backgroundColor:Q,captionTheme:ee,captionStyle:te,captionText:ne,mediaStatus:re}=A||{},{playerRef:oe,userControls:le,autoPlayVideo:ae,playVideo:se,pauseVideo:ce,isPlaying:he,setIsPlaying:ge,isMuted:ye,userPaused:ve}=function(){const{0:e,1:t}=(0,r.useState)({paused:void 0,muted:void 0}),n=(0,r.useCallback)((n=>{t(Qr(Qr({},e),{},{paused:n}))}),[e]),o=(0,r.useCallback)((n=>{t(Qr(Qr({},e),{},{muted:n}))}),[e]),i=(0,a.sJ)(g.J$),l=(0,a.Zl)(g.J$),{videoPlayingRef:s}=(0,qr.d)(),c=(0,r.useRef)(null),{0:d,1:u}=(0,r.useState)(!1),{0:p,1:f}=(0,r.useState)(!1),{0:h,1:m}=(0,r.useState)(!1),{0:b,1:y}=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=c.current,t=()=>{m(!(null===e||void 0===e||!e.muted))};return null===e||void 0===e||e.addEventListener("volumechange",t),()=>{null===e||void 0===e||e.removeEventListener("volumechange",t)}}),[]);const v=(0,r.useCallback)((()=>{var e;c.current&&(c.current.muted=!0,null===(e=c.current)||void 0===e||e.play().then((()=>{u(!0)})).catch((()=>{u(!1)})),m(!0))}),[c,u]),w=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.current?(c.current.muted=!1,c.current.play().then((()=>{u(!0)})).catch((()=>{e&&v()}))):Promise.resolve(void 0)}),[c,v]),x=(0,r.useCallback)((()=>{var e;null!==(e=c.current)&&void 0!==e&&e.muted?v():w()}),[v,w]),C=(0,r.useCallback)((()=>{var e;null===(e=w())||void 0===e||e.then((()=>{n(!1)}))}),[w,n]),O=(0,r.useCallback)((t=>{var n,r;let{rowIndex:o,tileIndex:l}=t;if(b)return;const a=null===s||void 0===s||null===(n=s.current)||void 0===n?void 0:n.rowIndex,d=(null===s||void 0===s||null===(r=s.current)||void 0===r?void 0:r.tileIndex)||0;let u=!1;(void 0===a||void 0===d||a!==o||a===o&&l<=d)&&(u=!0),!0!==e.paused&&(i||!0===e.muted||!1===u?v():(s&&(s.current.element=c.current,s.current.rowIndex=o,s.current.tileIndex=l),document.querySelectorAll("video").forEach((e=>{"isavoverlay"in e.dataset||(e.muted=!0)})),w(!0)),y(!0))}),[e,i,w,v,c,s,b,y]),j=(0,r.useCallback)((()=>{u(!1),c.current&&d&&!c.current.paused&&(u(!1),c.current.pause(),s&&(s.current.element=null,s.current.rowIndex=null,s.current.tileIndex=null))}),[c,d,s]),P=(0,r.useCallback)((()=>{j(),n(!0)}),[j,n]),T=(0,r.useCallback)((()=>{c.current&&(document.querySelectorAll("video").forEach((e=>{e.paused||"isavoverlay"in e.dataset||(e.muted=!0)})),c.current.muted=!h,m(!h),l(!h))}),[c,h,l]);return{userControls:{play:C,pause:P,toggleMute:(0,r.useCallback)((()=>{c.current&&(o(!c.current.muted),T())}),[o,T,c])},playerRef:c,autoPlayVideo:O,playVideo:x,pauseVideo:j,isPlaying:d,setIsPlaying:u,isMuted:h,canPlay:p,setCanPlay:f,userPaused:e.paused}}(),[we,xe]=(0,a.FV)(x.s5),[Oe,je]=(0,a.FV)(x.VJ),Pe=w&&u&&!d&&we,Te=N&&!Pe,{0:Ie,1:ke}=(0,r.useState)(!0),{0:Ee,1:De}=(0,r.useState)(!Te),Se=(0,r.useRef)(null),Re=(0,r.useRef)(null),[Ze,_e]=(0,a.FV)((0,fn.vw)(_)),{localMediaUrl:$e,localFileData:Le,progress:Me}=Ze,Ae=(0,s.l)(g.k6),{isInactive:Ne}=Bn({timeoutSeconds:3,element:Se,hoverElement:Re,isMobile:P,isPageActive:v}),ze=(0,a.sJ)(g.DH),Fe=(0,s.l)(g.ii),Be=q||p.EwX.Fit,Ue=(0,En.Z)(Ne);(0,r.useEffect)((()=>{Ue&&!Ne?ke(!1):!Ue&&Ne&&ke(!0)}),[Ne,ke,Ue]);const He=(0,r.useCallback)((e=>{e&&h((t=>io(io({},t),{},{mediaTileData:io(io({},t.mediaTileData),{},{mediaFillType:p.EwX.Crop,fillCropCenterX:e.posX,fillCropCenterY:e.posY,fillCropScale:e.scale})}))),xe(!1)}),[h,xe]),Ve=(0,r.useCallback)((()=>{xe(!1)}),[xe]);let We=null;Be===p.EwX.Crop&&W&&"number"===typeof X&&"number"===typeof G&&"number"===typeof J&&(We={posX:X,posY:G,scale:J});const{0:Ye,1:Xe}=(0,r.useState)(!0),{0:Ge,1:Je}=(0,r.useState)(),qe=!(re!==p.Jpv.UploadInProgress||!$e),Ke=!(!qe||!Ye),Qe=re===p.Jpv.Ready,et=Ke?`${$e}#t=0.000001`:z,tt=et||"",{0:nt,1:rt}=(0,r.useState)(""),ot=F||nt||"",{0:it,1:lt}=(0,r.useState)(""),at=(0,r.useRef)(null),st=re===p.Jpv.UploadInProgress,{0:ct,1:dt}=(0,r.useState)(st),[ut,pt]=(0,a.FV)((0,Fn.M)({tileId:m.id,url:tt})),ft=(0,Dn.M)(A,ut),ht=(0,s.l)(g.PS),{0:gt,1:mt}=(0,r.useState)("number"===typeof B&&B>0?B:0),{0:bt,1:yt}=(0,r.useState)("number"===typeof U&&U>0?U:null),vt=O.trimPanelSizes(1/Ae),{tileSizes:wt}=O,xt=Q||fe.M2,Ot=fe.N3.get(xt)||xt,{0:jt,1:Pt}=(0,r.useState)(ee),Tt=(0,r.useCallback)((e=>{Pt(e<.65?p.dbt.Dark:p.dbt.Light)}),[]),It=(0,r.useRef)(null),kt=(0,r.useCallback)((()=>{if(oe.current&&v&&w){let e=null,t=null;It.current&&oe.current&&(e=It.current.getBoundingClientRect(),t=oe.current.getBoundingClientRect()),t&&e&&me(e,t,Tt,Ot,null,oe,W||null,Be)}}),[oe,v,w,Tt,Ot,W,Be]);(0,r.useEffect)((()=>{kt()}),[v,w,Ot,et,B,U,X,G,J,Be,W,te,kt]),(0,r.useEffect)((()=>{jt!==ee&&h((e=>io(io({},e),{},{mediaTileData:io(io({},e.mediaTileData),{},{captionTheme:jt}),__skipUndo:!0})))}),[h,jt]),(0,r.useEffect)((()=>{dt(st)}),[st]),(0,r.useEffect)((()=>{w||u||(0,g.PS)(!1)}),[w,u]);const Et=!Ke&&Qe&&!(null!==tt&&void 0!==tt&&tt.includes(".mp4"))&&In().isSupported(),Dt=Le&&Ye,St=(0,En.Z)(tt),Rt=(0,r.useRef)();(0,r.useEffect)((()=>{Rt.current=M}),[M]),(0,r.useEffect)((()=>{if(!d&&tt!==St){const e=oe.current;if(pt(!1),ge(!1),Et&&e){const t=new(In());t.on(In().Events.MEDIA_ATTACHED,(()=>{t.loadSource(tt)})),t.on(In().Events.BUFFER_CREATED,(()=>{pt(!0)})),t.attachMedia(e)}else if(qe&&e&&!window.Cypress&&Dt&&""===e.canPlayType('video/mp4; codecs="hvc1"')&&Le){const e=new FileReader,t=Le;e.readAsArrayBuffer(t),e.onload=()=>{const t=new Uint8Array(e.result);at.current=t,lo?(0,zn.z)(lo,t,(e=>e?Xe(!1):null)):n(3780)().then((e=>{lo=e,(0,zn.z)(lo,t,(e=>e?Xe(!1):null))}))}}(0,g.PS)(!1)}}),[qe,_,Le,oe,d,St,pt,ge,Dt,Et,tt]);const[Zt]=An();(0,r.useEffect)((()=>{!d&&qe&&!Ye&&at.current&&(Zt(at.current,(e=>Je(e))),at.current=null)}),[qe,Ye,d,Zt]);const _t=(0,r.useCallback)((()=>{oe.current&&(oe.current.currentTime=gt)}),[oe,gt]);Nn((()=>{if(he&&oe.current){const e=null!==bt?bt:oe.current.duration;oe.current.currentTime>=e&&(H||ce(),oe.current.currentTime=gt)}})),(0,r.useEffect)((()=>{oe.current&&gt&&(oe.current.currentTime=gt,P&&oe.current.load())}),[P,oe,gt]),(0,r.useEffect)((()=>{B&&mt(B),U&&yt(U)}),[B,U]);const $t=(0,r.useCallback)((()=>{ut&&(he?ce():se())}),[ut,he,ce,se]);!v&&he&&ce(),(0,r.useEffect)((()=>{v||Ee||De(!Te)}),[v,Te,Ee]),(0,r.useEffect)((()=>{v||ge(!1)}),[v,ge]),(0,r.useEffect)((()=>{Te&&De(!1)}),[Te]),oe.current&&(oe.current.controls=!1);const Lt=(0,r.useCallback)((e=>{_e((0,fn.aY)(e))}),[_e]),Mt=(0,r.useCallback)((e=>{const t=e[0];Lt(t)}),[Lt]),{documentVisibility:At}=(0,Sn.Z)(),Nt=(0,En.Z)(At);(0,r.useEffect)((()=>{oe.current&&void 0!==Nt&&Nt!==At&&(At?Te&&!ve&&se():(ce(),Et||(oe.current.currentTime=gt)))}),[At,Nt,ce,se,oe,Te,Et,gt,ve]);const zt=(0,r.useCallback)((e=>{if(u&&e.clipboardData){const t=e.clipboardData.files[0];t&&(Z.v.addAction("Pasting file to video tile",{file:{name:t.name,type:t.type}}),t.type.startsWith("video/")?Lt(t):Z.v.addError(new Error("Pasting non-video file to video tile"),{file:{name:t.name,type:t.type}}))}}),[u,Lt]);(0,L.Z)({disabled:!u,onPaste:zt});const Ft=(0,r.useRef)(null),Bt=(0,r.useRef)(!1),{0:Ut,1:Ht}=(0,r.useState)(!1),Vt=(0,r.useRef)(!1),Wt=(0,s.l)(g.VY),{captionFontSize:Yt,captionPadding:Xt,captionRadius:Gt,captionInnerPaddingVertical:Jt,captionInnerPaddingSide:qt}=wt,Kt=(0,r.useCallback)((e=>(h((t=>io(io({},t),{},{mediaTileData:io(io({},t.mediaTileData),{},{captionText:e})}))),null)),[h]);(0,r.useEffect)((()=>{!d&&u&&Wt&&Ut&&(Ft.current&&Ft.current.focus(),(0,g.VY)(!1))}),[Wt,d,u,Ut]);const{0:Qt,1:en}=(0,r.useState)(null),tn=(0,r.useCallback)((()=>{ge(!0)}),[ge]),nn=(0,r.useCallback)((()=>{P&&!Et&&pt(!0),gt&&oe.current&&(oe.current.currentTime=gt)}),[P,oe,pt,Et,gt]),rn=(0,r.useCallback)((()=>{gt&&oe.current&&(oe.current.currentTime=gt)}),[oe,gt]),on=(0,r.useCallback)((e=>{const t=e.target;Et||pt(!0),d||!w||W||null!==Qt&&void 0!==Qt&&Qt.aspectRatio||setTimeout((()=>{const e=(0,be.lW)(t.videoWidth,t.videoHeight),n=(0,fe.Pb)(t);en({aspectRatio:e,backgroundColor:n})}),200),!d&&w&&Ke&&(0,zn.b)(t).then((e=>{e&&rt(URL.createObjectURL(e))}))}),[W,w,null===Qt||void 0===Qt?void 0:Qt.aspectRatio,d,pt,Et,Ke]),ln=(0,r.useCallback)((()=>{Vt.current=Bt.current}),[]);(0,r.useEffect)((()=>{!d&&w&&re===p.Jpv.Ready&&null!==Qt&&void 0!==Qt&&Qt.aspectRatio&&(h((e=>io(io({},e),{},{mediaTileData:io(io({},e.mediaTileData),{},{aspectRatio:null===Qt||void 0===Qt?void 0:Qt.aspectRatio},(null===Qt||void 0===Qt?void 0:Qt.backgroundColor)&&{backgroundColor:null===Qt||void 0===Qt?void 0:Qt.backgroundColor}),__skipUndo:!0}))),en(null))}),[W,Q,w,null===Qt||void 0===Qt?void 0:Qt.aspectRatio,null===Qt||void 0===Qt?void 0:Qt.backgroundColor,re,d,h]);const an=!d&&(Ke||Qe),sn=(0,r.useMemo)((()=>an?(0,K.jsx)(hr,{playsInline:!0,ref:oe,"data-testid":"video_tile_video",src:tt,crossOrigin:"anonymous",poster:ot,$fit:Be===p.EwX.Fit,onPlay:tn,onEnded:_t,onPause:ce,loop:!!H,onLoadedMetadata:nn,onLoadedData:rn,onCanPlayThrough:on,onMouseDown:ln}):null),[H,an,oe,tt,ot,Be,tn,_t,ce,rn,nn,on,ln]),cn=(0,r.useCallback)((()=>{ze!==m.id&&(ft||u&&!Vt.current&&(je(Be),xe(!0)))}),[ft,ze,u,m.id,Be,je,xe]),dn=(0,En.Z)(Pe);(0,r.useEffect)((()=>{Pe&&Pe!==dn&&oe.current&&(Ke||!oe.current.canPlayType("application/vnd.apple.mpegurl")?(0,zn.b)(oe.current).then((e=>{var t;e?lt(URL.createObjectURL(e)):(Z.v.addAction("Capture thumbnail did not return an image",{tileId:m.id}),lt((0,Dn.j)(ot,(null===oe||void 0===oe||null===(t=oe.current)||void 0===t?void 0:t.currentTime)||0)))})):lt((0,Dn.j)(ot,oe.current.currentTime)))}),[Pe,oe,dn,ot,m.id,Ke]),(0,r.useEffect)((()=>{Pe&&(oe.current&&he&&!oe.current.paused&&oe.current.pause(),ge(!1))}),[Pe,he,oe,ge]),(0,r.useEffect)((()=>{const e=e=>{"Space"!==e.code||!v||Bt.current||Fe||!u&&(u||f)||($t(),De(!1))};return document.addEventListener("keyup",e),()=>document.removeEventListener("keyup",e)}),[u,f,v,$t,Fe]),(0,r.useEffect)((()=>{u||(Bt.current=!1,Vt.current=!1)}),[u]);let un,hn,gn,mn,bn=0,yn=0,vn=0,wn=0;if(Se.current){const e=Se.current.getBoundingClientRect();bn=e.x,yn=e.y,wn=e.height,vn=e.width}if(We&&W){const{size:e,position:t}=(0,be.X6)(We,{width:E,height:D},W);un=t.x,hn=t.y,mn=e.width,gn=e.height}let xn=null;d||!Ke&&!Qe?d&&Qe?xn=(0,K.jsx)(mr,{$crop:!!We,$left:un,$top:hn,$width:mn,$height:gn,src:ot,$fit:Be===p.EwX.Fit}):Ke||Qe||!Ge||(xn=(0,K.jsx)(mr,{$crop:!!We,src:Ge,$left:un,$top:hn,$width:mn,$height:gn,$fit:Be===p.EwX.Fit})):xn=(0,K.jsx)(fr,{$crop:!!We,$left:un,$top:hn,$width:mn,$height:gn,$inCrop:Pe,"data-testid":"video_tile_video_div",children:sn});let Cn=null;if(Pe&&W){let e;e=Oe===p.EwX.Fill?(0,be.iI)({width:E,height:D},W):Oe===p.EwX.Fit?(0,be.Lj)({width:E,height:D},W):null!=X&&null!=G&&null!=J?{posX:X,posY:G,scale:J}:(0,be.Zn)({width:E,height:D},W);let t=null;!d&&(Ke||Qe)&&"none"!==te&&ne&&(null===ne||void 0===ne?void 0:ne.length)>0&&(t=(0,K.jsx)(Ce,{captionStyle:te,fontSize:Yt*Ae,maxWidth:(E-2*Xt)*Ae,padding:Xt*Ae,radius:Gt*Ae,sidePadding:qt*Ae,verticalPadding:Jt*Ae,captionTheme:jt,onClick:e=>{Pe&&e.stopPropagation()},children:(0,K.jsx)(ue.Z,{labelId:`video-caption-crop-mode-${m.id}`,plainContent:ne||"",disabled:!0,wrapText:!0,onContentChange:()=>null})}));const n=(0,K.jsx)(gr,{src:it});Cn=(0,K.jsx)(pe.Z,{top:0,left:0,zIndex:ie.y$,children:(0,K.jsx)(Ct,{tileX:bn,tileY:yn,tileHeight:wn,tileWidth:vn,tileRadius:l,element:n,tileBackground:Ot,cropData:e,onSave:He,onCancel:Ve,aspectRatio:W,tileElement:t})})}let On=null;if(w&&(!re||re===p.Jpv.WaitingForCreation)){const e=(0,V.An)(p.YUT.Video)[0];On=(0,K.jsx)(pn,{placeholderText:e.label,icon:e.icon,iconSize:O.embedPreviewIconSize,onFileDrop:Mt,radius:l,acceptedFileTypes:"video/*",sizes:O,height:D,tileType:m.type,tileId:m.id})}const jn=gt||0,Pn="number"===typeof bt?bt:(null===(t=oe.current)||void 0===t?void 0:t.duration)||0,Tn=B,Rn=U,Zn=Qe&&!ut,_n=ct&&(1===Me||void 0===$e)||Zn,$n=!d&&(ct||Zn);(0,r.useEffect)((()=>{!$n||!_n||an&&""!==tt||Z.v.addError(new Error("Video tile showing no video with infinite spinner"),{tileId:_,tomeId:$,videoTileData:M})}),[$n,_n,an,tt,_,$,M]);const Mn=!d&&v&&(Ke||Qe)&&!Ee&&(!Ne&&(!P||!Ie)||!he)&&!Pe&&!R,Un=!Ee&&(!Ne||!he)?48:0,{t:Hn}=(0,c.$G)();return(0,K.jsxs)(kn.df,{threshold:[.5,.9],delay:200,skip:d,initialInView:!!d,onChange:(e,t)=>{var n,r;t.intersectionRatio>=.9&&null!==(n=oe.current)&&void 0!==n&&n.paused&&Te&&ut&&ae({rowIndex:b,tileIndex:y}),t.intersectionRatio<=.5&&(null===(r=oe.current)||void 0===r||!r.paused)&&ce()},style:{height:"100%",width:"100%"},children:[(0,K.jsxs)(pr,{ref:Se,"data-tome-bypass-tap-navigation":T||he?"VideoTile__VideoFrame":void 0,$showPlaceholderBackground:!qe&&!Qe&&w,$backgroundColor:Ot,$inCrop:Pe,onClick:P?()=>{Ne||ke((e=>!e))}:void 0,onDoubleClick:cn,variants:{unexpanded:{borderRadius:`${l}px`},expanded:{borderRadius:0}},initial:"unexpanded",animate:T?"expanded":"unexpanded",children:[On,xn,!d&&(Ke||Qe)&&Cn,(Ke||Qe)&&!Pe&&te&&"none"!==te&&(u&&!d||ne&&(null===ne||void 0===ne?void 0:ne.length)>0)&&(0,K.jsx)(Ce,{captionStyle:te,maxWidth:E-2*Xt,fontSize:Yt,padding:Xt,radius:Gt,sidePadding:qt,verticalPadding:Jt,ref:It,captionTheme:jt,additionalBottomPadding:Un,children:(0,K.jsx)(ue.Z,{labelId:`video-caption-${m.id}`,ref:Ft,plainContent:ne||"",disabled:!u||ft,placeholder:Hn("commandPrompt.tiles.videoTile.addCaptionPlaceholder"),emptyStateLength:7*Yt,maxCharacterLimit:160,onContentChange:Kt,editorInFocusRef:Bt,componentLifeCycleStateTracker:Ht,wrapText:!0})}),$n&&(0,K.jsx)(de,{progress:Me,infinite:_n,bottom:!1,right:!0}),!On&&(0,K.jsx)(vr,{children:(0,K.jsx)(Jr,{videoPlayerRef:oe})}),(0,K.jsx)(Y.M,{children:Mn&&oe.current&&(0,K.jsx)(Gr,{videoPlayerRef:oe,ref:Re,pauseVideo:le.pause,playVideo:le.play,toggleMute:le.toggleMute,isMuted:ye,isPlaying:he,toggleExpand:I,isExpanded:!!ze,disableExpand:S||j&&C,expandedScale:k,trimStart:jn,trimEnd:Pn,maxWidth:j?346:null})}),(0,K.jsx)(Y.M,{children:!d&&(Ke||Qe)&&Ee&&ut&&!Te&&!R&&(0,K.jsx)(yr,{"data-testid":"large_play_button","data-tome-bypass-tap-navigation":"VideoTile__LargePlayBackground",onClick:e=>{$t(),De(!1),e.stopPropagation()},initial:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.2},whileTap:{scale:.9},children:(0,K.jsx)(Ln,{style:{width:"48px"}})})})]}),w&&ht&&!d&&ut&&u&&et&&(Qe||Ke)&&(0,K.jsx)(Cr,{playerRef:oe,tileX:bn,tileY:yn,trimStart:jn,trimEnd:Pn,setTrimStart:mt,setTrimEnd:yt,trimPanelSizes:vt,pagePadding:O.pageSizes.padding,tileHeight:wn,tileWidth:vn,useLocal:Ke,videoSrc:et,updateTileData:h,trimStartData:Tn,trimEndData:Rn}),!d&&(0,K.jsx)(ro,{tileId:_,videoStatus:null===m||void 0===m||null===(o=m.videoTileData)||void 0===o?void 0:o.status,videoId:null===m||void 0===m||null===(i=m.videoTileData)||void 0===i?void 0:i.videoId,updateTileData:h,persistedUploadStatus:re})]})},so=n(22951),co=n(25935),uo=n(71893),po=n(11209);const fo=J.ZP.div.withConfig({displayName:"RichTweetstyles__StyledRichTweet",componentId:"sc-11zccvn-0"})(["display:flex;flex-direction:column;height:100%;font-size:","px;"],(e=>{let{$fontSize:t}=e;return t})),ho=J.ZP.div.withConfig({displayName:"RichTweetstyles__StyledBlockQuote",componentId:"sc-11zccvn-1"})(["color:",";font-weight:300;font-size:1em;line-height:1.4;padding:16px 0;white-space:pre-line;a{","}"],(e=>e.theme.colors.twitterText),uo.Z),go=J.ZP.div.withConfig({displayName:"RichTweetstyles__UserProfile",componentId:"sc-11zccvn-2"})(["display:flex;"]),mo=J.ZP.div.withConfig({displayName:"RichTweetstyles__UserProfileImage",componentId:"sc-11zccvn-3"})(["background-image:url('","');border-radius:9999px;height:48px;width:48px;background-size:cover;min-width:48px;align-self:center;"],(e=>{let{$imageUrl:t}=e;return t})),bo=J.ZP.div.withConfig({displayName:"RichTweetstyles__UserInfo",componentId:"sc-11zccvn-4"})(["flex:1;padding:4px 16px;font-size:1em;line-height:1.25;"]),yo=(0,J.ZP)(po.Z).withConfig({displayName:"RichTweetstyles__StyledTwitterTileIcon",componentId:"sc-11zccvn-5"})(["fill:",";"],(e=>e.theme.colors.twitterIconFill)),vo=J.ZP.div.withConfig({displayName:"RichTweetstyles__UserName",componentId:"sc-11zccvn-6"})(["color:",";font-weight:700;"],(e=>e.theme.colors.twitterTitle)),wo=J.ZP.a.withConfig({displayName:"RichTweetstyles__UserHandle",componentId:"sc-11zccvn-7"})(["color:",";"],(e=>e.theme.colors.twitterText)),xo=J.ZP.div.withConfig({displayName:"RichTweetstyles__TweetMetadata",componentId:"sc-11zccvn-8"})(["color:",";font-size:0.7em;line-height:1.14;a{"," padding:0px 2px;}"],(e=>e.theme.colors.twitterText),uo.Z),Co=J.ZP.div.withConfig({displayName:"RichTweetstyles__TweetEngagement",componentId:"sc-11zccvn-9"})(["color:",";font-size:0.7em;margin:0.7em 0;line-height:1.14;"],(e=>e.theme.colors.twitterText)),Oo=e=>{var t;let{url:n,tweetId:r,fontSize:o}=e;const{loading:i,error:l,data:a}=(0,p.ABU)({variables:{tweetId:r}}),{t:s}=(0,c.$G)();if(i||l)return null;const d=new Date(a.getTweetStatus.createdAt),u="undefined"!==typeof navigator?navigator.language:"en-US",f=new Intl.DateTimeFormat(u,{timeStyle:"short"}).format(d),h=new Intl.DateTimeFormat(u,{dateStyle:"medium"}).format(d),{favoriteCount:g,retweetCount:m,user:b,entities:y}=a.getTweetStatus,v=new Intl.NumberFormat(u,{minimumFractionDigits:0,maximumFractionDigits:2,notation:"compact"}),w=`${v.format(m)} ${s("commandPrompt.tiles.twitter.richTweet.retweet_with_count",{count:m})}`,x=`${v.format(g)} ${s("commandPrompt.tiles.twitter.richTweet.like_with_count",{count:g})}`;let C=(null===a||void 0===a||null===(t=a.getTweetStatus)||void 0===t?void 0:t.fullText)||"";return null!==y&&void 0!==y&&y.urls&&(null===y||void 0===y||y.urls.forEach((e=>{C=C.replace(e.url,`<a href="${e.expanded_url}" target="_blank" rel="noreferrer">${e.display_url}</a>`)}))),null!==y&&void 0!==y&&y.user_mentions&&(null===y||void 0===y||y.user_mentions.forEach((e=>{const t=new RegExp(`@${e.screen_name}`,"ig");C=C.replace(t,`<a href="https://twitter.com/${e.screen_name}" target="_blank" rel="noreferrer">@${e.screen_name}</a>`)}))),null!==y&&void 0!==y&&y.hashtags&&(null===y||void 0===y||y.hashtags.forEach((e=>{C=C.replace(`#${e.text}`,`<a href="https://twitter.com/hashtag/${e.text}" target="_blank" rel="noreferrer">#${e.text}</a>`)}))),null!==y&&void 0!==y&&y.media&&(null===y||void 0===y||y.media.forEach((e=>{C=C.replace(e.url,"")}))),(0,K.jsxs)(fo,{$fontSize:o,children:[(0,K.jsxs)(go,{children:[b&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(mo,{$imageUrl:null===b||void 0===b?void 0:b.profileImageUrlHttps.replace("normal","200x200")}),(0,K.jsxs)(bo,{children:[(0,K.jsx)(vo,{children:null===b||void 0===b?void 0:b.name}),(0,K.jsxs)(wo,{href:`https://twitter.com/${null===b||void 0===b?void 0:b.screenName}`,children:["@",null===b||void 0===b?void 0:b.screenName]})]})]}),(0,K.jsx)(yo,{style:{width:18,height:22,marginLeft:"auto"}})]}),(0,K.jsx)(ho,{children:(0,co.ZP)(C)}),(0,K.jsxs)(xo,{children:[[f,h].join(" \xb7 ")," \xb7",(0,K.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:"View on Twitter"})]}),(0,K.jsx)(Co,{children:[w,x].join(" \xb7 ")})]})};var jo=(0,r.memo)(Oo);const Po=J.ZP.div.withConfig({displayName:"TwitterTile__StyledTweet",componentId:"sc-7lkqbb-0"})(["height:100%;padding:10px;width:100%;",""],so.qc);var To=e=>{let t,n,{tileId:r,url:o,preview:i,updateContentLink:l,height:a,width:s,sizes:c,presentMode:d,resizeRef:u}=e;if(o&&o.length>0)try{var f,h;const e=new URL(o);n=null===e||void 0===e?void 0:e.href,t=null===e||void 0===e||null===(f=e.pathname)||void 0===f||null===(h=f.split("/"))||void 0===h?void 0:h[3]}catch(g){t=null}return i||!t||t.length<1?(0,K.jsx)(Kt,{tileId:r,updateContentLink:l,preview:i,height:a,width:s,sizes:c,tileType:p.YUT.Twitter,presentMode:d}):(0,K.jsx)("div",{ref:u,children:(0,K.jsx)(Po,{children:(0,K.jsx)(jo,{tweetId:t,url:n,fontSize:c.tileSizes.bodyFontSize})})})},Io=n(38621),ko=n(48997);const Eo=J.ZP.div.withConfig({displayName:"BlankTile__EmptyPageContainer",componentId:"sc-117d7c3-0"})(["background-color:",";border-radius:","px;width:100%;height:100%;display:grid;place-items:center;"],(e=>e.theme.colors.toastBackground),(e=>e.$radius)),Do=(0,J.ZP)((0,X.E)(Io.Z)).withConfig({displayName:"BlankTile__AddTileButton",componentId:"sc-117d7c3-1"})(["cursor:pointer;border-radius:8px;padding:19px;&:hover{background-color:",";}"],(e=>e.theme.colors.contrast8));var So=e=>{let{canEdit:t,preview:n,tileSizes:r}=e;const o=(0,P.t2)();return!t||n?null:(0,K.jsx)(Eo,{$radius:r.radius,children:(0,K.jsx)(Do,{initial:"default",whileTap:"active",variants:ko.km,animate:"default",onClick:()=>{o.setPropertyPanel(nn.Z.ADD_TILE)},children:(0,K.jsx)(on.Z,{style:{width:64,height:64,opacity:"0.4"}})})})},Ro=n(24233),Zo=n(4960),_o=n(62830),$o=n.n(_o),Lo=n(2372),Mo=n(47250);const Ao={type:"spring",duration:.4},No={hairline:{duration:.15,ease:[.4,0,.1,1]},wavy:{type:"spring",stiffness:650,damping:30,mass:1}},zo={default:{opacity:1,x:"-50%",y:"-50%"},hover:{opacity:1,scale:1.05,x:"-50%",y:"-50%"},active:{scale:.8,x:"-50%",y:"-50%",transition:{duration:.15}},disabled:{opacity:.5,x:"-50%",y:"-50%"}},Fo=e=>({initial:{opacity:0,scale:.5,y:"-50%",x:e?0:"-100%"},animate:{opacity:1,scale:1,y:"-50%",x:e?0:"-100%"}});var Bo=n(44466),Uo=n(99747),Ho=n(12459),Vo=n(26072),Wo=n(50587),Yo=n(58874),Xo=n(23402);var Go=e=>{const{rawAnnotationContent:t,annotationTextRef:n,onBlur:o,disabled:i,handleEditorClick:l,handleFocus:s,scaleFactor:d}=e,u=(0,r.useRef)();u.current||(u.current=(0,Yo.Z)((0,Xo.Z)(140)((0,Ho.Y_)())));const p=u.current,{0:f,1:h}=(0,r.useState)((0,Vo.Tj)(t)),m=(0,a.rb)(T.Qf);(0,r.useEffect)((()=>{n.current=(0,z.Q)(f)}),[f,n]),(0,r.useEffect)((()=>()=>{i||(o(n.current),(0,g.ii)(!1))}),[i]);const b=(0,r.useMemo)((()=>0===(0,z.Q)(f).length),[f]),y=(0,r.useCallback)((e=>{h(e)}),[]),v=(0,r.useCallback)((()=>{o&&o((0,z.Q)(f)),(0,g.ii)(!1)}),[f,o]),w=(0,r.useCallback)((()=>{s(),(0,g.ii)(!0)}),[s]),x=(0,r.useCallback)((()=>{l&&l()}),[l]),C=(0,r.useCallback)((e=>{"Enter"===e.key&&(e.currentTarget.blur(),e.preventDefault()),"Escape"===e.key&&(e.currentTarget.blur(),m()),"string"===typeof e.currentTarget.textContent&&e.currentTarget.textContent.length>=140?e.currentTarget.style.caretColor="red":e.currentTarget.style.removeProperty("caret-color")}),[m]),{t:O}=(0,c.$G)();return(0,K.jsx)(Uo.hv7,{editor:p,value:f,onChange:y,editableProps:{readOnly:i,onBlur:v,onKeyDown:C,spellCheck:!!p&&(0,Uo.KyJ)(p),onFocus:w,onClick:x,placeholder:O("annotation.addAnnotationPlaceholder"),style:{minWidth:b?120*d:"auto"}},children:(0,K.jsx)(Wo.Z,{autoFocus:0===t.length})})},Jo=n(94100);const qo=(0,J.ZP)(X.E.svg).withConfig({displayName:"AnnotationLine__LineWrap",componentId:"n8w0k2-0"})(["position:absolute;top:0;right:",";left:",";fill:none;pointer-events:none;"],(e=>e.$isRight?"auto":`${e.offset}px`),(e=>e.$isRight?`${e.offset}px`:"auto")),Ko=(0,J.ZP)(X.E.polyline).withConfig({displayName:"AnnotationLine__WavyPath",componentId:"n8w0k2-1"})(["transition:stroke 0.2s ease-out;stroke:",";transform-origin:50% 50%;transform:rotate(180deg);"],(e=>e.theme.annotationColors[e.$colorScheme].background));var Qo=e=>{const{colorScheme:t,distance:n,isRight:o,isSelected:i,lineStyle:l,offset:a}=e,s=(0,Zo.c)(" "),c=No[l],d=n,u=0,p=7,f="wavy"===l?.25:0,h=(0,Zo.c)(f),g=(0,Jo.q)(h,{damping:30,stiffness:550}),m=(0,Zo.c)(.5);return(0,r.useEffect)((()=>{h.set("wavy"===l?.25:0)}),[h,l]),Nn((()=>(()=>{m.set(m.get()+.15);const e=[];for(let t=0;t<d/1;t++){const n=1*t+u,r=5*Math.sin(g.get()*(t+m.get()))+p;e.push([n,r])}s.set(e.join(" "))})())),(0,K.jsx)(qo,{viewBox:`0 0 ${d} 14`,width:d,height:14,$isRight:o,style:{y:"-50%"},initial:{opacity:0,scaleX:0},animate:{opacity:i?1:0,scaleX:1},transition:c,offset:a,children:(0,K.jsx)(Ko,{points:s,$colorScheme:t,strokeWidth:1})})},ei=n(12329);function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ri=e=>{var t;const{annotation:n,createMode:o,canEdit:i,tileRef:l,tileId:d,tomeId:u,inProgressAnnotation:p,setInProgressAnnotation:h}=e,m=(0,r.useRef)(!1),b=(0,r.useRef)(!1),{apolloClient:y,clientId:v}=(0,f.bp)(),[w,x]=(0,a.FV)(T.Qf),C=(0,a.rb)(T.Qf),O=(0,a.Zl)(T.f8),j=(0,a.rb)(T.Qc),I=(null===w||void 0===w?void 0:w.annotationId)===n.id,{0:k,1:E}=(0,r.useState)(!1),D=(0,r.useRef)(!1),S=(0,r.useRef)(n.content),{width:R}=(null===(t=l.current)||void 0===t?void 0:t.getBoundingClientRect())||{width:1024},_=R/2,$=n.x*R<_,L=(0,r.useCallback)((e=>{e.preventDefault(),I?(C(),(0,g.pS)(null)):((0,g.pS)(d),x({annotationId:n.id,tileId:d}),(0,g.Dm)(null))}),[I,C,d,x,n.id]),M=(0,P.t2)(),A=(0,r.useCallback)((()=>{i&&!o&&M.setPropertyPanel(nn.Z.ANNOTATION),I||x({annotationId:n.id,tileId:d})}),[n.id,i,o,I,M,x,d]),N=(0,r.useCallback)((()=>{O(!1)}),[O]),{t:z}=(0,c.$G)(),F=(0,r.useCallback)((function(){let{addToast:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addToast:!1};return m.current=!0,(0,Mo.Dl)(u,d,n.id,y,v),e&&(0,g.ak)({message:z("annotation.annotationDeletionToastMessage"),action:"undo"}),{addToast:e}}),[u,d,n.id,y,v,z]),B=(0,r.useCallback)((function(){let{addToast:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addToast:!1};p?b.current||(b.current=!0,j()):F(F({addToast:e}))}),[p,F,j]),U=(0,r.useCallback)((e=>{if(!m.current&&!D.current)if(O(!0),e.length<1)B();else if(p){if(!b.current){const t=ni(ni({},p),{},{content:e});delete t.tileId,(0,Mo.ud)(u,d,t,y,v,(()=>{j()})),b.current=!0}}else{const t=ni(ni({},(0,Mo.TX)(y,d,n.id)),{},{content:e});(0,Mo._E)(u,d,t,y,v)}}),[O,p,B,y,d,n.id,u,v,j]),H=Hn((window.innerWidth-1280)/2/1280+1,1,1.31),{displayType:V,style:W={}}=n,X="always"===V,G=X||I,J=o&&I,{colorScheme:q=Bo.wk.DEFAULT,lineStyle:Q=Bo.Cl.HAIRLINE}=W,ee=18+(X?4:0),te=(0,r.useRef)(null),ne=(0,r.useCallback)((()=>{if(!te.current||!l.current)return void Z.v.addError(new Error(`missing dot or tile ref. dot: ${te.current}, tile: ${l.current}`));const e=te.current.getBoundingClientRect(),t=l.current.getBoundingClientRect(),r=e.left+e.width/2,o=e.top+e.height/2,i=(r-t.left)/t.width,a=(o-t.top)/t.height,s=Hn(i,0,1),c=Hn(a,0,1);if((null===p||void 0===p?void 0:p.id)===n.id)return void h((e=>ni(ni({},e),{},{content:S.current,x:s,y:c})));const f=ni(ni({},(0,Mo.TX)(y,d,n.id)),{},{x:s,y:c});(0,Mo._E)(u,d,f,y,v)}),[n.id,y,v,null===p||void 0===p?void 0:p.id,h,d,l,u]),re=(0,r.useCallback)((e=>{b.current||(0,Yt.d)(e)||(e.stopPropagation(),e.preventDefault())}),[]),oe=(0,r.useCallback)((()=>{D.current=!0,E(!0)}),[]),ie=(0,r.useCallback)((()=>{ne(),E(!1),D.current=!1}),[ne]),le=(0,r.useRef)({}),ae=(0,s.l)(g.k6);if(!l.current)return null;const se=l.current.getBoundingClientRect(),ce=ee/2,de=-(n.x*se.width+ce),ue=(1-n.x)*se.width-ce,pe=-(n.y*se.height+ce),fe=(1-n.y)*se.height-ce;return k||(le.current.top=pe/ae,le.current.bottom=fe/ae,le.current.left=de/ae,le.current.right=ue/ae),(0,K.jsx)(ei.o4,{style:{left:100*n.x+"%",top:100*n.y+"%"},$isSelected:G,children:(0,K.jsxs)(Ro.Z,{menuWidth:140,menuPosition:"below",menuAlign:"click",rightClickActivated:!0,disabled:!i,itemsOrFn:[{text:z("annotation.deleteButton"),action:()=>B({addToast:!0}),variant:"destructive"}],children:[!k&&(0,K.jsx)(Y.M,{children:G&&(0,K.jsxs)(ei.Ax,{transition:Ao,initial:Fo($).initial,animate:Fo($).animate,exit:Fo($).initial,children:[(0,K.jsx)(Qo,{lineStyle:Q,colorScheme:q,isSelected:G,isRight:$,distance:80,offset:X?Math.floor(ee/2)+1:0}),(0,K.jsx)(ei.hB,{initial:"default",transition:Ao,style:{transformOrigin:$?"0 50%":"100% 50%"},children:(0,K.jsx)(ei.JK,{$isBeingEdited:J,"data-annotation-label":!0,$colorScheme:q,style:{x:$?80:-80},children:(0,K.jsx)(ei.__,{$colorScheme:q,scale:H,children:(0,K.jsx)(Go,{rawAnnotationContent:n.content,annotationTextRef:S,onBlur:U,disabled:!i,handleEditorClick:A,handleFocus:N,scaleFactor:H})})})})]},`${n.id}-label`)}),k&&(0,K.jsx)(Lo.Z,{}),(0,K.jsx)(ei.bd,{ref:te,whileTap:X?"default":"active",whileHover:X?"default":"hover",initial:"default",variants:zo,$size:ee,style:{filter:"drop-shadow(0 0.1rem 0.15rem rgba(0, 0, 0, 0.1))",cursor:X?"auto":"pointer"},viewBox:`0 0 ${ee} ${ee}`,drag:i,dragConstraints:le.current,dragElastic:0,dragMomentum:!1,onDragStart:oe,onDragEnd:ie,onMouseDown:re,"data-testid":"annotation_dot",children:(0,K.jsx)(ei.oT,{$colorScheme:q,$solid:!X,"data-disable-drag":!0,onTap:L,r:Math.floor(ee/2)-1})})]})})};const oi=13,ii=J.ZP.div.withConfig({displayName:"TileAnnotation__StyledAnnotationContainer",componentId:"t2lv63-0"})(["position:relative;width:100%;height:100%;cursor:",";"],(e=>e.isActivelyCreatingAnnotations?"none":null)),li=J.ZP.div.withConfig({displayName:"TileAnnotation__ChildrenWrapper",componentId:"t2lv63-1"})(["height:100%;width:100%;pointer-events:",";"],(e=>e.disablePointerEvents?"none":null)),ai=(0,J.ZP)(X.E.div).withConfig({displayName:"TileAnnotation__CreateCursor",componentId:"t2lv63-2"})(["width:","px;height:","px;border:2px solid ",";position:absolute;border-radius:999px;top:-","px;left:-","px;z-index:999;"],oi,oi,(e=>e.theme.annotationColors[e.$colorScheme].background),6.5,6.5),si={active:{opacity:1,transition:{duration:H.Z2.duration}},inactive:{opacity:0}};var ci=e=>{const{children:t,canEdit:n,annotationsActive:o,tile:i,tomeId:l,isMobile:c}=e,d=(0,P.f3)(),u=(0,a.sJ)(T.LN),p=(0,a.Zl)(T.Qf),f=(0,a.sJ)(T.f8),[h,m]=(0,a.FV)(T.Qc),b=(0,a.sJ)(g.DH),y=(0,s.l)(g.k6),v=o&&d===nn.Z.ANNOTATION&&"BLANK"!==i.type,w=(0,r.useRef)(null),x=(0,Zo.c)(0),C=(0,Zo.c)(0),{0:O,1:j}=(0,r.useState)(!1),I=(0,r.useCallback)(((e,t,n)=>{var r;return null===(r=i.annotations)||void 0===r?void 0:r.some((r=>{const o=r.x*n.width/y,i=r.y*n.height/y;return Math.abs(e-o)<=10.5&&Math.abs(t-i)<=10.5}))}),[i.annotations,y]),k=(0,r.useCallback)(((e,t)=>document.elementsFromPoint(e,t).some((e=>e.hasAttribute("data-annotation-label")))),[]),E=(0,r.useCallback)((e=>{if(w&&w.current){const t=w.current.getBoundingClientRect(),n=(e.clientX-t.left)/y,r=(e.clientY-t.top)/y;n<13||n+oi>t.width/y||r<13||r+oi>t.height/y||I(n,r,t)||k(e.clientX,e.clientY)?(j(!1),x.set(0),C.set(0)):(j((e=>e||!0)),x.set(n),C.set(r))}}),[y,I,x,C,k]);(0,r.useEffect)((()=>(o&&window.addEventListener("mousemove",E),()=>{window.removeEventListener("mousemove",E)})),[o,E]);const D=(0,r.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),null===w||void 0===w||!w.current)return;const t=w.current.getBoundingClientRect(),n=(e.clientX-t.x)/t.width,r=(e.clientY-t.y)/t.height,o=$o()(),l={id:o,x:n,y:r,content:"",style:{colorScheme:u.color,lineStyle:u.line},displayType:u.displayType,tileId:i.id};m(l),p({annotationId:o,tileId:i.id})}),[u,i.id,p,m]),S=v&&O&&f,R=[...i.annotations||[]];return h&&h.tileId===i.id&&!R.some((e=>e.id===h.id))&&R.push(h),(0,K.jsxs)(ii,{createMode:v,annotationCreateCursorActive:f,isActivelyCreatingAnnotations:S,ref:w,"data-testid":"tile_annotation",style:{maxWidth:c?"100%":"auto"},children:[S&&(0,K.jsx)(ai,{$colorScheme:u.color,onMouseDown:D,"data-testid":"annotation_cursor",style:{translateX:x,translateY:C}}),(0,K.jsx)(li,{disablePointerEvents:v,children:t}),(0,K.jsx)(X.E.div,{variants:si,animate:b?"inactive":"active",children:o&&R.length>0&&R.map((e=>(0,K.jsx)(ri,{annotation:e,canEdit:n,tileRef:w,tomeId:l,tileId:i.id,createMode:v,inProgressAnnotation:e.id===(null===h||void 0===h?void 0:h.id)?h:null,setInProgressAnnotation:m},e.id)))})]})},di=n(48583),ui=n.n(di),pi=n(79521);function fi(e){e&&e.focus({preventScroll:!0})}var hi=n(17382),gi=n(86760),mi=n(60314);const bi=J.ZP.div.withConfig({displayName:"TableTilestyles__TableTileStyles",componentId:"sc-1poxj5d-0"})(["position:relative;width:100%;height:100%;border-radius:","px;display:flex;flex-direction:column;overflow:hidden;isolation:isolate;-webkit-mask-image:-webkit-radial-gradient(white,black);-webkit-text-size-adjust:none;",""],(e=>e.$radius),(e=>e.$isTextSelectable&&"div { user-select: text; }")),yi=J.ZP.div.withConfig({displayName:"TableTilestyles__TableStyles",componentId:"sc-1poxj5d-1"})([""," "," overflow:",";display:inline-block;border-spacing:0;border:none;align-self:flex-start;max-width:100%;@supports ","{","}"],(e=>e.$readonly&&!e.$preview&&!e.$isMobile&&"\n    padding-left: 20px;\n  "),(e=>e.$preview&&`\n    padding-left: ${e.$tableContentPaddingLeft}px;\n    padding-top: ${e.$tableContentPaddingLeft}px;\n  `),(e=>e.$preview?"hidden":"unset"),$r.be.mouse,gi.Z),vi=J.ZP.div.withConfig({displayName:"TableTilestyles__DraggingWrapperStyles",componentId:"sc-1poxj5d-2"})(["border-radius:","px;overflow:hidden;filter:","};transform:scale(",");transform-origin:top left;"],mi.vT,(e=>{let{theme:t}=e;return t.colors.tableColumnDragDropShadow}),(e=>e.$scale)),wi=J.ZP.div.withConfig({displayName:"TableTilestyles__SelectedGlow",componentId:"sc-1poxj5d-3"})(["border-radius:3px;box-shadow:"," ",";position:absolute;left:","px;top:","px;right:","px;bottom:","px;pointer-events:none;"],(e=>`0px 0px 0px 2px ${e.theme.colors.tableActiveCellBorder}`),(e=>e.$isFocused?`, 0px 0px 7px 3px ${e.theme.colors.tableGlow}`:""),mi.YF,mi.YF,mi.YF,mi.YF),xi=(0,J.ZP)(X.E.div).withConfig({displayName:"TableTilestyles__TableScrim",componentId:"sc-1poxj5d-4"})(["z-index:100000;background:",";width:60px;height:100%;position:absolute;right:0;top:20px;pointer-events:none;"],(e=>e.theme.gradients.tableScrim));var Ci=n(83926),Oi=n(36409),ji=n(76024);new Map;let Pi=null;function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ji.bI.canResize=!0,ji.Nw.columnStartResizing="columnStartResizing",ji.Nw.columnResizing="columnResizing",ji.Nw.columnDoneResizing="columnDoneResizing",ji.Nw.resetResize="resetResize";const ki=e=>{e.getResizerProps=[Ei],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Di),e.useInstance.push(Ri),e.useInstanceBeforeDimensions.push(Si)},Ei=(e,t)=>{let{instance:n,header:r}=t;const{dispatch:o}=n,i=(e,t)=>{e.stopPropagation();let n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}const r=function(e){const t=[],n=e=>{e.columns&&e.columns.length&&e.columns.map(n),t.push(e)};return n(e),t}(t),i=r.map((e=>[e.id,e.totalWidth])),l=n?Math.round(e.touches[0].clientX):e.clientX,a=e=>{o({type:ji.Nw.columnResizing,clientX:e})},s=()=>o({type:ji.Nw.columnDoneResizing}),c={mouse:{moveEvent:"mousemove",moveHandler:(0,Oi.Z)((e=>{e.stopPropagation(),a(e.clientX)}),10),upEvent:"mouseup",upHandler:e=>{document.removeEventListener("mousemove",c.mouse.moveHandler),document.removeEventListener("mouseup",c.mouse.upHandler),s()}},touch:{moveEvent:"touchmove",moveHandler:(0,Oi.Z)((e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),a(e.touches[0].clientX),!1)),10),upEvent:"touchend",upHandler:e=>{document.removeEventListener(c.touch.moveEvent,c.touch.moveHandler),document.removeEventListener(c.touch.upEvent,c.touch.moveHandler),s()}}},d=n?c.touch:c.mouse,u=!!function(){if("boolean"===typeof Pi)return Pi;let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return Pi=e,Pi}()&&{passive:!1};document.addEventListener(d.moveEvent,d.moveHandler,u),document.addEventListener(d.upEvent,d.upHandler,u),o({type:ji.Nw.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:i,clientX:l})};return[e,{onMouseDown:e=>e.persist()||i(e,r),onTouchStart:e=>e.persist()||i(e,r),style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Di(e,t){if(t.type===ji.Nw.init)return Ii({columnResizing:{columnWidths:{}}},e);if(t.type===ji.Nw.resetResize)return Ii(Ii({},e),{},{columnResizing:{columnWidths:{}}});if(t.type===ji.Nw.columnStartResizing){const{clientX:n,columnId:r,columnWidth:o,headerIdWidths:i}=t;return Ii(Ii({},e),{},{columnResizing:Ii(Ii({},e.columnResizing),{},{startX:n,headerIdWidths:i,columnWidth:o,isResizingColumn:r})})}if(t.type===ji.Nw.columnResizing){const{clientX:n}=t,{startX:r,columnWidth:o,headerIdWidths:i=[]}=e.columnResizing,l=(n-r)/o,a={};return i.forEach((e=>{let[t,n]=e;a[t]=Math.max(n+n*l,0)})),Ii(Ii({},e),{},{columnResizing:Ii(Ii({},e.columnResizing),{},{columnWidths:Ii(Ii({},e.columnResizing.columnWidths),a)})})}return t.type===ji.Nw.columnDoneResizing?Ii(Ii({},e),{},{columnResizing:Ii(Ii({},e.columnResizing),{},{startX:null,isResizingColumn:null})}):void 0}ki.pluginName="useResizeColumnsBlocking";const Si=e=>{const{flatHeaders:t,disableResizing:n,getHooks:r,state:{columnResizing:o}}=e,i=(0,ji.bM)(e);t.forEach((e=>{const t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;r+=1)if("undefined"!==typeof t[r])return t[r]}(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=Math.max(e.minWidth,o.columnWidths[e.id]||e.originalWidth||e.width),e.isResizing=o.isResizingColumn===e.id,t&&(e.getResizerProps=(0,ji.fq)(r().getResizerProps,{instance:i(),header:e}))}))};function Ri(e){const{plugins:t,dispatch:n,autoResetResize:o=!0,columns:i}=e;(0,ji.CD)(t,["useAbsoluteLayout"],"useResizeColumnsBlocking");const l=(0,ji.bM)(o);(0,ji.vw)((()=>{l()&&n({type:ji.Nw.resetResize})}),[i]);const a=r.useCallback((()=>n({type:ji.Nw.resetResize})),[n]);Object.assign(e,{resetResizing:a})}var Zi=n(15948),_i=n(73935);var $i=n(85769),Li=n(35784),Mi=n(9304);var Ai=r.createContext(null),Ni=n(1313),zi=n(73849),Fi=n(34425);function Bi(e,t,n){return[...Array(e)].map((()=>Array(t).fill(n)))}function Ui(e,t,n){const r=[...t].sort(Fi.uR),o=[...n].sort(Fi.uR),i=[];for(const l of r){const t=e[l],n=[];for(const e of o)n.push(t[e]);i.push(n)}return i}function Hi(e,t,n,r,o){const i=[];for(let a=t;a<=n;a++)i.push(a);const l=[];for(let a=r;a<=o;a++)l.push(a);return Ui(e,i,l)}function Vi(e,t){return e.data.findIndex((e=>e.id===t))}function Wi(e,t){return e.columns.findIndex((e=>e.accessor===t))}function Yi(e,t,n){const r=t.data.length,o=t.columns.length,i=Bi(r,o);for(let l=0;l<r;l++)for(let e=0;e<o;e++){const r=t.columns[e].accessor;i[l][e]={serializedData:t.data[l][r],id:{rowId:t.data[l].id,colId:r,tileId:n},selected:!1}}for(const l of e){const e=Vi(t,l.rowId),n=Wi(t,l.colId);i[e][n].selected=!0}return i}function Xi(e){const t=[];for(let r=0;r<e.length;r++){e[r].map((e=>e.selected)).includes(!0)&&t.push(r)}const n=[];for(let r=0;r<e[0].length;r++)for(const t of e)if(t[r].selected){n.push(r);break}return Hi(e,Math.min(...t),Math.max(...t),Math.min(...n),Math.max(...n))}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qi=(0,r.forwardRef)(((e,t)=>(0,K.jsx)(q.Z,Ji(Ji({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,K.jsx)("path",{d:"M32 10C33.1046 10 34 10.8954 34 12V47.1716L45.5858 35.5858C46.3668 34.8047 47.6332 34.8047 48.4142 35.5858C49.1953 36.3668 49.1953 37.6332 48.4142 38.4142L33.4142 53.4142C32.6332 54.1953 31.3668 54.1953 30.5858 53.4142L15.5858 38.4142C14.8047 37.6332 14.8047 36.3668 15.5858 35.5858C16.3668 34.8047 17.6332 34.8047 18.4142 35.5858L30 47.1716V12C30 10.8954 30.8954 10 32 10Z"})})))),Ki=n(57142),Qi=n(86781);function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nl=(0,r.forwardRef)(((e,t)=>(0,K.jsx)(q.Z,tl(tl({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,K.jsx)("path",{d:"M30.5858 10.5858C31.3668 9.80474 32.6332 9.80474 33.4142 10.5858L48.4142 25.5858C49.1953 26.3668 49.1953 27.6332 48.4142 28.4142C47.6332 29.1953 46.3668 29.1953 45.5858 28.4142L34 16.8284V52C34 53.1046 33.1046 54 32 54C30.8954 54 30 53.1046 30 52V16.8284L18.4142 28.4142C17.6332 29.1953 16.3668 29.1953 15.5858 28.4142C14.8047 27.6332 14.8047 26.3668 15.5858 25.5858L30.5858 10.5858Z"})}))));function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var il=(0,r.forwardRef)(((e,t)=>(0,K.jsx)(q.Z,ol(ol({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,K.jsx)("path",{d:"M8.07117 16.1778L26.4178 34.4889L17.7778 53.3334H26.6667L32.4978 40.6045L48.8178 56.8889L53.3334 52.3734L12.6223 11.6267L8.07117 16.1778ZM20.6934 10.6667L27.8045 17.7778H34.0623L32.1067 22.08L38.1867 28.16L42.9512 17.7778H56.8889V10.6667H20.6934Z"})}))));const ll=["backgroundFill"];function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cl=(0,r.forwardRef)(((e,t)=>{const{backgroundFill:n}=e,r=(0,jt.Z)(e,ll);return(0,K.jsxs)(q.Z,sl(sl({ref:t,viewBox:"0 0 64 64"},r),{},{children:[(0,K.jsx)("path",{d:"M32 60C47.464 60 60 47.464 60 32C60 16.536 47.464 4 32 4C16.536 4 4 16.536 4 32C4 47.464 16.536 60 32 60ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64Z",fill:n}),(0,K.jsx)("path",{d:"M22.8146 46L25.7521 37.5312H38.2521L41.174 46H46.299L34.7833 14H29.2052L17.6896 46H22.8146ZM27.1583 33.4688L31.8771 19.8125H32.1271L36.8458 33.4688H27.1583Z"})]}))}));function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pl={height:16,width:16,marginRight:mi.tn},fl=e=>{let{disabled:t,rowId:n,colId:o,setMenuIsOpen:i,currentColor:l,children:s,onOpenDropdown:d,tileId:u,showRowOperations:p,showColumnOperations:f,dropdownRef:h}=e;const{insertRow:g,insertColumn:m,deleteRowsByIdx:b,deleteColumnsByIdx:y,activateCell:v,activateFirstCellInColumn:w,activateFirstCellInRow:x,applyToSelectedCells:C,rowIds:O,colIds:j,tableDataRef:P}=(0,r.useContext)(Ai),T=(0,a.Zl)($i.wK),I=(0,r.useCallback)((e=>{const t=g(e);o?v(t,o):x(t)}),[g,o,v,x]),k=(0,r.useCallback)(((e,t,n)=>{const r=t[0].length-e.length;e.sort(Fi.uR);const o=e[e.length-1]===t[0].length-1?1:0,i=Hi(t,0,t.length-1,o,o+r-1).flatMap(((e,t)=>e.map(((e,n)=>({rowIdx:t,colIdx:n,isSelected:e.selected}))).filter((e=>e.isSelected)))),l=Ui(t,[...t.keys()],[...t[0].keys()].filter((t=>!e.includes(t)))),a=n.rowIdx,s=Math.min(n.colIdx,r-1),c=l[a][s].id;v(c.rowId,c.colId),T(i.map((e=>{let{rowIdx:t,colIdx:n}=e;return l[t][n].id})))}),[v,T]),E=(0,r.useCallback)(((e,t,n)=>{b(e);const r=function(e){const t=Bi(e[0].length,e.length);for(let n=0;n<e.length;n++)for(let r=0;r<e[0].length;r++)t[r][n]=e[n][r];return t}(t);k(e,r,{rowIdx:n.colIdx,colIdx:n.rowIdx})}),[k,b]),D=(0,r.useCallback)((e=>{const t=m(zi.Hr.string,e);n?v(n,t):w(t)}),[m,n,v,w]),S=(0,r.useCallback)(((e,t,n)=>{y(e),k(e,t,n)}),[k,y]),R=(0,r.useCallback)((e=>C((t=>(0,Ni.vk)(t,e)))),[C]),Z=(0,J.Fg)(),_=(0,r.useMemo)((()=>[Ni.l2.None,Ni.l2.Gray,Ni.l2.Blue,Ni.l2.Yellow,Ni.l2.Green,Ni.l2.Red].map((e=>{const t=Ni.mR.fromCellColor(e);return{text:t.userText,action:()=>R(e),image:(0,K.jsx)(cl,{style:ul(ul({},pl),{},{fill:t.getTextColor(Z)}),backgroundFill:t.getBackgroundColor(Z)}),checked:l===e}}))),[l,R,Z]),{t:$}=(0,c.$G)(),L=(0,r.useMemo)((()=>({text:$("commandPrompt.tiles.table.tableMenu.clearFormatting"),action:()=>R(Ni.l2.None),image:(0,K.jsx)(il,{style:pl})})),[R,$]),M=(0,r.useCallback)(((e,t,n)=>{const r=new Set(e.map((e=>e.rowId))),o=new Set(e.map((e=>e.colId))),i=Array.from(r.values(),(e=>Vi(P.current,e))).sort(Fi.uR),l=Array.from(o.values(),(e=>Wi(P.current,e))).sort(Fi.uR),a=[{text:$("commandPrompt.tiles.table.tableMenu.addRowAbove"),action:()=>I(i[0]),image:(0,K.jsx)(nl,{style:pl})},{text:$("commandPrompt.tiles.table.tableMenu.addRowBelow"),action:()=>I(i[i.length-1]+1),image:(0,K.jsx)(qi,{style:pl})}],s=[{text:$("commandPrompt.tiles.table.tableMenu.addColumnLeft"),action:()=>D(l[0]),image:(0,K.jsx)(Ki.Z,{style:pl})},{text:$("commandPrompt.tiles.table.tableMenu.addColumnRight"),action:()=>D(l[l.length-1]+1),image:(0,K.jsx)(Qi.Z,{style:pl})}];return[...p?a:[],...f?s:[],{type:"separator"},..._,{type:"separator"},L,{type:"separator"},...p?[{text:`${$("commandPrompt.tiles.table.tableMenu.deleteRow_with_count",{count:i.length})}`,action:()=>E(i,t,n),disabled:O().length===i.length}]:[],...f?[{text:`${$("commandPrompt.tiles.table.tableMenu.deleteCol_with_count",{count:l.length})}`,action:()=>S(l,t,n),disabled:j().length===l.length}]:[]]}),[L,j,_,S,E,D,I,O,P,p,f,$]),A=(0,r.useMemo)((()=>[..._,{type:"separator"},L]),[L,_]),N=(0,a._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable($i.sO).getValue(),n=t.getLoadable($i.SI).getValue(),r=Yi(e,P.current,u),o=function(e){return e.every((e=>e.every((e=>e.selected))))}(Xi(r));if(o&&n){const t={rowIdx:Vi(P.current,n.rowId),colIdx:Wi(P.current,n.colId)};return M(e,r,t)}return A}}),[M,A,P,u]);return(0,K.jsx)(Ro.Z,{disabled:t,menuAlign:"click",rightClickActivated:!0,menuWidth:166,styles:{display:"flex"},setOpenState:i,itemsOrFn:N,onOpenDropdown:d,ref:h,children:s})};var hl=(0,r.memo)(fl),gl=r.createContext(null);const ml=["children","i","displayWidth","readonly","provided","isAnyRowBeingDragged","isThisRowBeingDragged","preview","enableRowDrag","tileId","rowId"];function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vl=e=>{const{children:t,i:n,displayWidth:o,readonly:i,provided:l,isAnyRowBeingDragged:s,isThisRowBeingDragged:c,preview:u,enableRowDrag:p=!0,tileId:f,rowId:h}=e,g=(0,jt.Z)(e,ml),{selectRow:m,appendSelectRow:b,selectRowsFromRowToActive:y,tableRef:v,activeCellRef:w}=(0,r.useContext)(Ai),x=(0,r.useRef)(null),C=(0,r.useRef)(),{reorderingColumnIdRef:O}=(0,r.useContext)(gl),j=(0,r.useMemo)((()=>({rowId:h,tileId:f})),[h,f]),P=(0,a.Zl)((0,$i.Tc)(j));(0,r.useEffect)((()=>{if(!u&&x.current&&!O.current){const e=parseFloat(window.getComputedStyle(x.current).height);P((t=>e&&t!==e?e:t))}}));const T=(0,r.useMemo)((()=>{var e,t;return c?null===(e=v.current)||void 0===e||null===(t=e.offsetParent)||void 0===t?void 0:t.getBoundingClientRect().left:0}),[v,c]),I=(0,r.useMemo)((()=>{var e,t;return c?null===(e=v.current)||void 0===e||null===(t=e.offsetParent)||void 0===t?void 0:t.scrollLeft:0}),[v,c]),k=(0,r.useCallback)((e=>{var t;null===(t=w.current)||void 0===t||t.blurEditorAndRetainFocus(),(0,d.ZP)(e)?b(h):e.shiftKey?y(h):m(h),C.current.controlOpen((e=>!e),{x:e.clientX,y:e.clientY})}),[b,h,y,m,w]),E=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),D=(0,r.useMemo)((()=>yl(yl({},null===l||void 0===l?void 0:l.draggableProps.style),c?{maxWidth:`${o}px`,overflow:"hidden",left:T,marginLeft:Li.QG}:{})),[o,c,null===l||void 0===l?void 0:l.draggableProps.style,T]);return(0,K.jsxs)(Mi.Z,yl(yl({innerRef:null===l||void 0===l?void 0:l.innerRef,preview:u,tableScrollLeft:I,isThisRowBeingDragged:c},null===l||void 0===l?void 0:l.draggableProps),{},{style:D,children:[!i&&(0,K.jsx)(hl,{disabled:i||s,rowId:h,currentColor:null,tileId:f,dropdownRef:C,showRowOperations:!0,showColumnOperations:!1,children:(0,K.jsx)(Li.t_,{onMouseDown:E,onClick:k,onContextMenu:k,"data-testid":"table_row_tool",children:p&&(0,K.jsx)(Li.bC,yl(yl({},null===l||void 0===l?void 0:l.dragHandleProps),{},{$readonly:i,"data-disable-drag":!0,children:!c&&(0,K.jsx)(Li.RH,{})}))})}),(0,K.jsx)(Li.N0,yl(yl({"data-testid":"table_row",ref:x},g),{},{children:t}))]}))},wl=n(12064),xl=n(84282),Cl=n(63897),Ol=n(71932),jl=n(77493);const Pl=(e,t)=>(Array.isArray(e)?e:e.children).every((e=>jl.xv.isText(e)?!!e[t]:Pl(e,t))),Tl=(e,t,n)=>{const r=Array.isArray(e)?e:e.children;return r.forEach((e=>{jl.xv.isText(e)?n?e[t]=n:delete e[t]:Tl(e,t,n)})),r},Il="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789`-=~!@#$%^&*()_+[]\\;',./{}|:\"<>?".split("");var kl=n(44566),El=r.createContext(null);var Dl=J.ZP.div.withConfig({displayName:"CommonTableCellstyles__CommonTableCellStyles",componentId:"sc-1mora5y-0"})(["font-size:","px;line-height:1.3;color:",";caret-color:",";font-family:",";font-weight:",";font-style:",";"," border-radius:","px;background-color:",";& > div{overflow:hidden !important;}& > [contenteditable]{-webkit-user-select:auto;user-select:auto;}& ul,ol{margin-block:0;}ol{padding-inline-start:1em;}ul{padding-inline-start:0.8em;}p{margin:0;}"],(e=>e.$fontSize),(e=>e.$textColor),(e=>e.theme.colors.contentAccent),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}),so.qc,(e=>e.$preview?"1":mi.vT),(e=>e.$backgroundColor));function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Zl="table_cell",_l=J.ZP.div.withConfig({displayName:"TableCell__TableCellWrapper",componentId:"kw16nn-0"})(["position:relative;height:100%;margin:0;margin-right:","px;"],(e=>e.$marginRight)),$l=(0,J.ZP)(Dl).withConfig({displayName:"TableCell__TableCellStyles",componentId:"kw16nn-1"})(["",";height:100%;& *{pointer-events:",";}& a{pointer-events:auto;}"],(e=>!e.$preview&&`\n    // A border width padding is needed here to prevent text content\n    // bleeds into border of the cell when border is present (when cell\n    // is selected). This is only needed for non-preview mode because\n    // cell will not in selected mode in preview so we push all the padding\n    // to the underlying text editor in preview mode.\n    padding: ${mi.YF}px;\n  `),(e=>e.$isActive||e.$isTextSelectable?"auto":"none")),Ll=J.ZP.div.withConfig({displayName:"TableCell__TableCellSpaceHolder",componentId:"kw16nn-2"})(["width:100%;height:100%;display:inline-block;"]),Ml=(e,t)=>e||(0,d.ZP)(t)||t.shiftKey,Al=(0,r.forwardRef)(((e,t)=>{let{cell:n,readonly:o=!0,tableContentPadding:i,tileId:l,isDragAndDrop:s,wrapText:c,preview:u,editMode:p,fontSize:f,rowId:h,colId:g,rowIdx:m,colIdx:b,tileSelected:y,isAnyRowBeingDragged:v,canTableCutCopyPaste:x}=e;const[C,O]=(0,a.FV)((0,$i.YS)({rowId:h,colId:g,tileId:l})),[j,P]=(0,a.FV)((0,$i.Ao)({rowId:h,colId:g,tileId:l})),T=(0,a.Zl)($i.wK),I=C&&!o,{0:k,1:E}=(0,r.useState)(!1),D=(0,r.useRef)(null),S=(0,r.useRef)(null),R=(0,r.useRef)(null),{insertRow:Z,activateCell:_,focusOnTable:$,applyToSelectedCells:L,deselectAllCells:M,removeCellFromSelection:A,activateNeighborCell:N,isFirstCellInTable:z,tableRef:F,titleRef:B,activeCellRef:U,selectFromToActive:V}=(0,r.useContext)(Ai);(0,r.useEffect)((()=>{k&&(U.current=null===t||void 0===t?void 0:t.current)}),[U,k,t]);const W=(0,Cl.vB)(n.value),Y=Ni.mR.fromCellColor(W.color),{floatingCellProps:X,setFloatingCellProps:G}=(0,r.useContext)(El),q=(0,r.useRef)(null),Q=(0,r.useCallback)((()=>{var e;null===(e=q.current)||void 0===e||e.focus()}),[]),ee=(0,r.useCallback)((()=>{var e;null===(e=R.current)||void 0===e||e.blurEditor(),Q()}),[Q]);(0,r.useImperativeHandle)(t,(()=>({blurEditorAndRetainFocus:ee})));const te=!c&&I&&null!==X,ne=(0,r.useMemo)((()=>({colId:g,tileId:l})),[g,l]),re=(0,a.Zl)((0,$i.$A)(ne)),oe=(0,r.useCallback)((()=>v||re(!0)),[re,v]),ie=(0,r.useCallback)((()=>re(!1)),[re]);(0,r.useEffect)((()=>{v&&re(!1)}),[v,re]);const le=(0,r.useCallback)((e=>{G({rowId:h,colId:g,serializedCellData:e,cellRef:S,domFocusCellKeybindings:Q})}),[h,g,Q,G]),ae=(0,r.useCallback)(((e,t)=>{if(T([{rowId:h,colId:g,tileId:l}]),c){var n,r;if(t)null===(r=R.current)||void 0===r||r.replaceText(t);null===(n=R.current)||void 0===n||n.focusEditor()}else{let n;n=void 0!==t?(0,Cl.qC)((0,Ni.gF)((0,Cl.vB)(e),(0,Ol.Tj)(t))):e,le(n)}}),[T,h,g,l,c,le]),se=(0,r.useCallback)(((e,t)=>{if(o)return void $();const r=(0,Yt.p)(t),i=(0,Yt.d)(t);if(r||i&&!j){var l;if(!t.nativeEvent.composedPath().some((e=>"A"===(null===e||void 0===e?void 0:e.tagName))))if((0,d.ZP)(t)||t.shiftKey||M(),t.shiftKey)null===(l=U.current)||void 0===l||l.blurEditorAndRetainFocus(),V(h,g),t.preventDefault();else r&&(0,d.ZP)(t)&&j?(A(h,g),t.preventDefault()):(O(!0),P(!0))}r&&(!I||c||Ml(e,t)||ae(n.value,void 0),t.stopPropagation())}),[o,j,$,M,U,V,h,g,A,O,P,I,c,ae,n.value]),ce=(0,a._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable($i.sO).getValue().length>1;I&&(0,Yt.p)(e)&&Ml(n,e)&&(e.stopPropagation(),e.preventDefault(),se(n,e))}}),[se,I]),de=(0,a._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable($i.sO).getValue().length>1;se(n,e)}}),[se]),{reorderingColumnIdRef:ue}=(0,r.useContext)(gl),pe=ue.current===n.column.id&&!u&&!s,fe=n.getCellProps(),he=(0,r.useMemo)((()=>({rowId:h,tileId:l})),[h,l]),ge=(0,a._8)((e=>{let{snapshot:t}=e;return()=>t.getLoadable((0,$i.Tc)(he)).getValue()}),[he]),me=Rl(Rl(Rl({},fe.style),ue.current&&{height:ge()}),pe?{display:"none",width:"0",padding:"0",marginRight:"0"}:{}),be=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=Z(m+e);_(t,g)}),[Z,m,g,_]),ye=(0,r.useCallback)((()=>L((e=>(0,Ni.gF)(e,Ol.yS)))),[L]),ve=(0,r.useCallback)((e=>{L((t=>(0,Ni.gF)(t,((e,t)=>{const n=!Pl(e,t);return Tl(e,t,n)})(t.slateData,e))))}),[L]),we=(0,r.useCallback)((()=>{M(),$()}),[M,$]),xe=(0,r.useCallback)((e=>{let t;switch(e.code){case"ArrowLeft":t=xl.N.Left;break;case"ArrowRight":t=xl.N.Right;break;case"ArrowUp":t=xl.N.Up;break;case"ArrowDown":t=xl.N.Down;break;case"Tab":if(e.shiftKey){if(t=xl.N.Previous,z(h,g)&&B.current)return M(),setTimeout((()=>{B.current.focus()}),0),void e.preventDefault()}else t=xl.N.Next;break;default:return}N(h,g,t),e.preventDefault()}),[N,h,g,z,B,M]),Ce=(0,r.useMemo)((()=>{const e=new Map;return e.set("enter",(e=>{ae(n.value,void 0),e.preventDefault()})),e.set("shift+enter",(()=>be())),e.set(Il,(e=>{ae(n.value,e.key),e.preventDefault()})),e.set(["del","backspace"],ye),e.set("esc",we),e.set(["left","right","up","down","tab","shift+tab"],xe),x&&(e.set("mod+x",w.Z),e.set("mod+c",w.Z),e.set("mod+v",w.Z)),e.set("mod+b",(()=>ve("bold"))),e.set("mod+u",(()=>ve("underlined"))),e.set("mod+i",(()=>ve("italic"))),e}),[ye,we,xe,x,ve,ae,n.value,be]);(0,r.useEffect)((()=>{if(C&&!u){var e;const t=null===(e=F.current)||void 0===e?void 0:e.offsetParent;if(F.current&&t&&D.current){const e=t.getBoundingClientRect(),n=D.current.getBoundingClientRect(),{scrollLeft:r,scrollTop:o}=(0,hi.VL)(e,n,m,b,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop},Li.QG);(0,wl.j)(t.scrollLeft,r,Rl(Rl({},H.yh),{},{onUpdate:e=>{F.current&&(t.scrollLeft=e)}})),(0,wl.j)(t.scrollTop,o,Rl(Rl({},H.yh),{},{onUpdate:e=>{F.current&&(t.scrollTop=e)}})),Q()}}}),[C,Q,F,D,m,b,u]);const Oe=(0,r.useCallback)((()=>{var e;null===(e=R.current)||void 0===e||e.blurEditor()}),[R]),{0:je,1:Pe}=(0,r.useState)(!1),Te=(0,J.Fg)();return(0,K.jsx)(hl,{disabled:!y||o,rowId:h,colId:g,tileSelected:y,setMenuIsOpen:Pe,currentColor:W.color,editableCellRef:R,onOpenDropdown:Oe,tileId:l,showRowOperations:!0,showColumnOperations:!0,children:(0,K.jsx)(kl.G,{bindings:Ce,ref:q,disabled:je||!C||u,children:(0,K.jsx)(_l,Rl(Rl({},fe),{},{style:me,ref:S,$marginRight:(0,hi.pP)(u,s,o),onMouseEnter:oe,onMouseLeave:ie,children:te?(0,K.jsxs)(Ll,{"data-testid":Zl,children:[(0,K.jsx)("div",{"data-testid":"cell_focused"}),(0,K.jsx)("div",{"data-testid":"cell_active"}),(0,K.jsx)("div",{"data-testid":"cell_selected"})]}):(0,K.jsxs)($l,{$backgroundColor:Y.getBackgroundColor(Te),$textColor:Y.getTextColor(Te),$isActive:C,$isTextSelectable:!p&&!u,$isReordering:pe,$preview:u,$fontSize:f,"data-testid":u?null:Zl,onMouseDown:de,onMouseDownCapture:ce,ref:D,children:[j&&!u&&(0,K.jsx)(wi,{"data-testid":"cell_selected",$isFocused:k}),k&&(0,K.jsx)("div",{"data-testid":"cell_focused"}),I&&(0,K.jsx)("div",{"data-testid":"cell_active"}),n.render("Cell",{ref:R,isEditable:I,wrapText:c,rowId:h,colId:g,setIsFocused:E,domFocusCellKeybindings:Q,padding:i-(u?0:mi.YF)})]})}))})})}));function Nl(e,t){if(e.cell.value!==t.cell.value)return!1;if(e.cell.column.isResizing||t.cell.column.isResizing)return!1;if(e.cell.column.width||t.cell.column.width)return!1;const n=Rl({},e),r=Rl({},t);return delete n.cell,delete r.cell,(0,je.Z)(n,r)}var zl=(0,r.memo)(Al,Nl),Fl=n(3868),Bl=n(92853);var Ul=e=>{let{children:t}=e;const n=(0,a.sJ)(Bl.h),r=(0,a.sJ)(Bl.z),o=(0,a.sJ)($i.yg),i=n||r||o?{cursor:"default"}:{};return(0,K.jsx)("div",{style:i,children:t})};function Hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wl(e,t,n){const r=e===t;return{width:`${r?n:0}px`,marginRight:(r?4:0)+"px"}}const Yl=e=>{var t;let{prepareRow:n,getTableBodyProps:o,rows:i,displayWidth:l,readonly:a,tileId:s,tableContentPadding:c,wrapText:d,preview:u,fontSize:p,tileSelected:f,editMode:h,canTableCutCopyPaste:g}=e;const{reorderingColumnIdRef:m,reorderingColumnIdxRef:b,dropPositionIdx:y}=(0,r.useContext)(gl),v=function(){const e=(0,r.useRef)({}).current;return(0,r.useEffect)((()=>{const t=document.createElement("div");return t.style.position="absolute",t.style.pointerEvents="none",t.style.top="0",t.style.width="100%",t.style.height="100%",e.elt=t,document.body.appendChild(t),()=>{document.body.removeChild(t)}}),[e]),t=>function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];const l=t(n,...o);return"fixed"===n.draggableProps.style.position?(0,_i.createPortal)(l,e.elt):l}}(),{0:w,1:x}=(0,r.useState)(!1),{moveRow:C,deselectAllCells:O,focusOnTable:j}=(0,r.useContext)(Ai),P=(0,r.useCallback)((()=>{x(!0),O()}),[x,O]),T=(0,r.useCallback)((e=>{x(!1),e.destination&&(C(e.source.index,e.destination.index),j())}),[C,x,j]);if(u)return(0,K.jsx)("div",Vl(Vl({},o()),{},{style:{fontSize:0},children:i.map(((e,t)=>{const r=e.id;n(e);const o=e.getRowProps();return(0,K.jsx)(vl,Vl(Vl({},o),{},{displayWidth:l,i:t,readonly:a,provided:void 0,isAnyRowBeingDragged:!1,isThisRowBeingDragged:!1,preview:u,tileId:s,rowId:r,children:e.cells.map(((e,n)=>(0,K.jsx)(zl,{cell:e,readonly:a,tileId:s,tableContentPadding:c,isDragAndDrop:!1,wrapText:d,preview:u,editMode:h,fontSize:p,rowId:r,colId:e.column.id,rowIdx:t,colIdx:n,tileSelected:f,isAnyRowBeingDragged:!1,canTableCutCopyPaste:!1},`${r}-${e.column.id}`)))}))}))}));let I;var k,E;i.length>0&&null!==(t=i[0])&&void 0!==t&&t.getRowProps&&(I=null===(k=i[0].getRowProps())||void 0===k||null===(E=k.style)||void 0===E?void 0:E.width);const D=(0,r.createRef)();return(0,K.jsx)(Ul,{children:(0,K.jsx)(Zi.Z5,{onDragStart:P,onDragEnd:T,children:(0,K.jsx)("div",Vl(Vl({},o()),{},{children:(0,K.jsx)(Zi.bK,{droppableId:`table-${s}`,children:e=>(0,K.jsxs)("div",Vl(Vl({},e.droppableProps),{},{ref:e.innerRef,style:{width:I},children:[i.map(((e,t)=>{const r=e.id;n(e);const o=e.getRowProps();return(0,K.jsx)(Zi._l,{draggableId:`row-${s}-${r}`,index:t,isDragDisabled:a,children:v(((n,i)=>(0,K.jsx)(vl,Vl(Vl({},o),{},{displayWidth:l,i:t,readonly:a,provided:n,isAnyRowBeingDragged:w,isThisRowBeingDragged:i.isDragging,preview:u,tileId:s,rowId:r,children:e.cells.map(((e,n)=>(0,K.jsxs)("div",{style:{display:"flex"},children:[m.current&&n<=(b.current||0)&&(0,K.jsx)(X.E.div,{transition:H.Z2,initial:Wl(y,n,e.column.width),animate:Wl(y,n,e.column.width)}),(0,K.jsx)(zl,{cell:e,readonly:a,tileId:s,tableContentPadding:c,isDragAndDrop:!1,wrapText:d,preview:u,editMode:h,fontSize:p,rowId:r,colId:e.column.id,rowIdx:t,colIdx:n,tileSelected:f,isAnyRowBeingDragged:w,canTableCutCopyPaste:g,ref:D}),!u&&!a&&(0,K.jsx)(Fl.Z,{column:e.column,tileId:s}),m.current&&n>(b.current||0)&&(0,K.jsx)(X.E.div,{transition:H.Z2,initial:Wl(y,n,e.column.width),animate:Wl(y,n,e.column.width)})]},`${r}-${e.column.id}`)))}))))},`row-${s}-${r}`)})),e.placeholder]}))})}))})})};var Xl=(0,r.memo)(Yl);const Gl=J.ZP.div.withConfig({displayName:"TableTitle__TitleWrapper",componentId:"sc-14ki30f-0"})(["padding:","px;padding-bottom:0;div{text-align:left;}font-family:",";font-weight:",";font-style:",";font-size:","px;color:",";line-height:1.4;"],(e=>e.$padding),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.style}),(e=>e.$tableTitleFontSize),(e=>e.theme.colors.editorHeading));var Jl=(0,r.forwardRef)(((e,t)=>{let{tileId:n,title:o,updateTableTitle:i,tableTitleFontSize:l,tableInnerPadding:a,readonly:s,preview:d,selected:u}=e;const{t:p}=(0,c.$G)(),f=(0,r.useRef)(null),h=(0,r.useRef)(null),{activateFirstCellInTable:g}=(0,r.useContext)(Ai),m=(0,r.useMemo)((()=>({tab:()=>(g(),!0)})),[g]),b=(0,r.useCallback)((()=>{f.current&&f.current.focus()}),[f]),y=(0,r.useCallback)((()=>h.current?h.current.getBoundingClientRect():null),[h]);return(0,r.useImperativeHandle)(t,(()=>({focus:b,getBoundingClientRect:y}))),(0,K.jsx)(Gl,{$tableTitleFontSize:l,$padding:a,ref:h,"data-disable-drag":!!u||void 0,children:(0,K.jsx)(ue.Z,{labelId:`table-title-${n}`,ref:f,plainContent:o,placeholder:p("commandPrompt.tiles.table.tableTitlePlaceholder"),onContentChange:e=>(i(e),null),disabled:s,dataTestId:d?void 0:"table_tile_title",keyBindings:m,selectable:u})})})),ql=n(1806),Kl=n(56064);n(84888);const Ql=(0,J.ZP)(Kl.Z).withConfig({displayName:"Scrollbarstyles__CustomScrollbarArea",componentId:"sc-1hfel9a-0"})(["height:100%;.simplebar-scrollbar::before{background-color:",";"," ",";}.simplebar-horizontal{margin:0 10px;}.simplebar-vertical{margin:10px 0;}"],(e=>e.theme.colors.scrollbarColor),"",(e=>e.$visible?"":"\n        opacity: 0;\n    ")),ea=J.ZP.div.withConfig({displayName:"Scrollbarstyles__BrowserScrollbarArea",componentId:"sc-1hfel9a-1"})(["height:100%;overflow-y:hidden;overflow-x:scroll;padding-bottom:10px;width:100%;-webkit-overflow-scrolling:auto !important;filter:invert(1);> div{filter:invert(1);}::-webkit-scrollbar{display:revert;}scrollbar-width:revert;"]);const ta=e=>{let{onScroll:t,children:n,visible:o,disableScrollBehavior:i}=e;const l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!l.current)return;const e=l.current.getScrollElement();return e.addEventListener("scroll",t),()=>{e&&e.removeEventListener("scroll",t)}}),[t]),(0,K.jsx)(Ql,{$visible:o,ref:l,children:(0,K.jsx)(ql.Z,{enabled:i,children:n})})};var na=e=>{const{onScroll:t,children:n,useCustomScrollbars:r,visible:o,disableScrollBehavior:i}=e;return r?(0,K.jsx)(ta,{onScroll:t,disableScrollBehavior:i,visible:o,children:n}):(0,K.jsx)(ea,{children:n})};const ra=J.ZP.div.withConfig({displayName:"DraggingColumn__DraggingColumnRow",componentId:"sc-1yredws-0"})(["display:flex;margin-bottom:4px;"]);var oa=e=>{let{headers:t,rows:n,columnId:o,prepareRow:i,tileId:l,wrapText:a,getTableScrolledTop:s,tableContentPadding:c,tableContentPaddingLeft:d,fontSize:u}=e;const p=(0,r.useRef)(null),f=t.find((e=>e.id===o));return(0,r.useEffect)((()=>{f&&(p.current.scrollTop=s())}),[f,s]),f?(0,K.jsxs)(bi,{$radius:0,$isTextSelectable:!1,children:[(0,K.jsx)(Lo.Z,{}),(0,K.jsx)(yi,{$preview:!1,$isMobile:!1,$isFloatingEditorShown:!1,$tableContentPaddingLeft:d,ref:p,style:{padding:"0",borderRadius:"0",overflowY:"scroll"},children:n.map(((e,t)=>{i(e);const r=t+1===n.length?{marginBottom:0}:{};return(0,K.jsx)(ra,{style:r,children:e.cells.filter((e=>e.column.id===o)).map(((e,r)=>(0,K.jsx)(zl,{key:`${e.row.id}-${e.column.id}`,cell:e,tileId:l,readonly:!0,tableContentPadding:c,isDragAndDrop:!0,wrapText:a,preview:!1,editMode:!1,fontSize:u,rowId:e.row.id,colId:e.column.id,rowIdx:t,colIdx:r,tileSelected:!1,rowCount:n.length,colCount:1,isAnyRowBeingDragged:!1,canTableCutCopyPaste:!1})))},e.id)}))})]}):null};var ia=e=>{let{children:t,disabled:n,innerRef:o}=e;const{activateFirstCellInTable:i,titleRef:l}=(0,r.useContext)(Ai),a=(0,r.useCallback)((e=>{l.current?l.current.focus():i(),e.preventDefault()}),[l,i]),s=(0,r.useMemo)((()=>{const e=new Map;return e.set("enter",a),e}),[a]);return(0,K.jsx)(kl.G,{"data-testid":"table_hotkeys",ref:o,bindings:s,disabled:n,children:t})},la=n(60112),aa=n(97762),sa=n(5472),ca=n(92556),da=n(25180);const ua=["placeholder","tag","className"];function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ha=e=>{let{placeholder:t,tag:n,className:r}=e,o=(0,jt.Z)(e,ua);if(!n)return null;const i=n;return""===t.trim()?null:(0,K.jsx)(K.Fragment,{children:(0,K.jsx)("div",fa(fa({className:"slate-placeholder","data-placeholder":t},o),{},{children:(0,K.jsx)(i,{className:r,children:t})}))})};const ga=["text"],ma=["attributes","children"];function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const va=J.ZP.div.withConfig({displayName:"SlateAsHtml__StyledWrapper",componentId:"sc-1bw4cxs-0"})(["white-space:pre-wrap;overflow-wrap:break-word;-webkit-nbsp-mode:space;",""],da.Z),wa=e=>{let{value:t,wrapText:n}=e;if(jl.W_.isElementList(t))return(0,K.jsx)(K.Fragment,{children:t.map(((e,t)=>(0,K.jsx)(wa,{value:e,wrapText:n},t)))});if(!jl.W_.isElement(t)){const e=t||{},{text:n}=e,r=(0,jt.Z)(e,ga),o=""===n?"\ufeff":n;return(0,K.jsx)(ca.Z,{text:n,leaf:r,children:o})}const{attributes:r={},children:o=[]}=t,i=(0,jt.Z)(t,ma);return(0,K.jsx)(sa.ZP,ya(ya({attributes:r,element:t},i),{},{wrapText:n,children:o.map(((e,t)=>(0,K.jsx)(wa,{value:e,wrapText:n},t)))}))};var xa=e=>{let{slateData:t,style:n={},wrapText:r,placeholder:o,textSelectionColor:i}=e;const l=""!==o.trim(),a=Ol.cZ(t);return(0,K.jsx)(va,{className:"slate-editor",style:n,$wrapText:r,$textSelectionColor:i,children:l?(0,K.jsx)(ha,{placeholder:o,tag:a.tag,className:a.className}):(0,K.jsx)(wa,{value:t,wrapText:r})})};const Ca="data-tome-table-cell-content";function Oa(e){const t={};let n={};try{n=JSON.parse(e.getAttribute(Ca)||"{}")}catch{}finally{t.slateData=n.slateData||(0,Vo.Tj)(e.innerText||e.innerHTML),t.color=n.color||Ni.l2.None}return t}function ja(e,t,n,o,i,l){var a,s;let c=e;if(0===e.length)return c;const d=Yi(e,o,l),u=Xi(d),p=function(e){for(const t of e)if(new Set(t.map((e=>e.selected))).size>1)return!1;return!0}(u),f=function(e){for(let t=0;t<e[0].length;t++){const n=new Set;for(const r of e)n.add(r[t].selected);if(n.size>1)return!1}return!0}(u);let h;if(p&&f)h=u;else if(p){const e=[...Array(u[0].length).keys()],t=u.map(((e,t)=>e[0].selected?t:null)).filter((e=>null!==e));h=Ui(u,t,e)}else if(f){const e=[...Array(u.length).keys()],t=u[0].map(((e,t)=>e.selected?t:null)).filter((e=>null!==e));h=Ui(u,e,t)}else{const e=t.getLoadable($i.SI).getValue();if(null===e)return c;n($i.wK,[e]),c=[e],h=Ui(d,[Vi(o,e.rowId)],[Wi(o,e.colId)])}const g=function(e){return e.map((e=>e.map((e=>(0,z.Q)((0,Cl.vB)(e.serializedData).slateData))).join("\t"))).join("\n")}(h),m=function(e){const t=document.createElement("html"),n=document.createElement("body");t.appendChild(n);const o=document.createElement("table");n.appendChild(o);const i=document.createElement("tbody");return o.appendChild(i),e.forEach((e=>{const t=document.createElement("tr");i.appendChild(t),e.forEach((e=>{const n=document.createElement("td"),o=(0,aa.renderToStaticMarkup)((0,r.createElement)(wa,{value:(0,Cl.vB)(e.serializedData).slateData,wrapText:!1}));n.innerHTML=o,n.setAttribute(Ca,e.serializedData),t.appendChild(n)}))})),t.outerHTML}(h);return null===(a=i.clipboardData)||void 0===a||a.setData("text/plain",g),null===(s=i.clipboardData)||void 0===s||s.setData("text/html",m),i.preventDefault(),c}function Pa(e,t,n){const o=(0,a.Zl)($i.wK),i=(0,a._8)((t=>{let{snapshot:r,set:o}=t;return t=>{ja(r.getLoadable($i.sO).getValue(),r,o,e.current,t,n)}}),[e,n]),l=(0,a._8)((r=>{let{snapshot:o,set:i}=r;return r=>{const l=ja(o.getLoadable($i.sO).getValue(),o,i,e.current,r,n).map((e=>(0,Ci.hT)(e.rowId,e.colId,Ni.uJ)));t(l)}}),[t,e,n]),s=(0,a._8)((r=>{let{snapshot:i}=r;return r=>{var l,a;const s=i.getLoadable($i.SI).getValue();if(!s)return;const c=e.current.data.map((e=>e.id)),d=e.current.columns.map((e=>e.accessor)),u=c.indexOf(s.rowId),p=d.indexOf(s.colId),f=(null===(l=r.clipboardData)||void 0===l?void 0:l.getData("text/plain"))||"",h=(null===(a=r.clipboardData)||void 0===a?void 0:a.getData("text/html"))||"",g=f.split("\n").map((e=>e.split("\t").map((e=>({slateData:(0,Vo.Tj)(e),color:Ni.l2.None})))));const m=function(e){const t=(new DOMParser).parseFromString(e,"text/html"),n=t.getElementsByTagName("table")[0];if(!n)return[[{slateData:(0,Vo.Tj)(t.body.textContent||""),color:Ni.l2.None}]];const r=[],o=n.getElementsByTagName("tr");for(let i=0;i<o.length;i++){const e=o[i].getElementsByTagName("td");for(let t=0;t<e.length;t++){const n=e[t];r[i]||(r[i]=[]),r[i][t]=Oa(n)}}return r}(h),b=m.length>=g.length?m:g,y=b[0].length;for(const e of b)e.length=y;const{tableUpdates:v,newRowIds:w,newColIds:x}=function(e){let{numTableRows:t,numTableCols:n,numPasteRows:r,numPasteCols:o,activeRowIdx:i,activeColIdx:l}=e;const a=i+r-t,s=l+o-n,c=[],d=[],u=[];for(let p=0;p<a;p++){const e=$o()();d.push(e),c.push((0,Ci.Gq)(e))}for(let p=0;p<s;p++){const e=$o()();u.push(e),c.push((0,Ci.El)(zi.Hr.string,e))}return{tableUpdates:c,newRowIds:d,newColIds:u}}({numTableRows:c.length,numTableCols:d.length,numPasteRows:b.length,numPasteCols:y,activeRowIdx:u,activeColIdx:p}),C=c.concat(w),O=d.concat(x),j=[];b.forEach(((e,t)=>{e.forEach(((e,r)=>{const o=u+t,i=p+r,l=C[o],a=O[i];v.push((0,Ci.Gb)(o,i,e)),j.push({rowId:l,colId:a,tileId:n})}))})),v.length>0&&t(v),o(j)}}),[t,o,e,n]);return(0,r.useMemo)((()=>({cutSelectedCells:l,copySelectedCells:i,pasteSelectedCells:s})),[i,l,s])}var Ta=e=>{const t=(0,r.useRef)(null===e||void 0===e?void 0:e.reorderingColumnId),n=(0,r.useRef)(null===e||void 0===e?void 0:e.reorderingColumnIdx),{0:o,1:i}=(0,r.useState)((null===e||void 0===e?void 0:e.dropPositionIdx)||null),l=(0,r.useRef)(null),a=(0,r.useRef)(null===e||void 0===e?void 0:e.draggingColumnIntialX),s=(0,r.useRef)(null===e||void 0===e?void 0:e.draggingColumnIntialY),c=(0,r.useRef)(null),d=(0,r.useCallback)((e=>{t.current=e}),[t]),u=(0,r.useCallback)((e=>{n.current=e}),[n]),p=(0,r.useCallback)((e=>{l.current=e}),[l]),f=(0,r.useCallback)((e=>{c.current=e}),[c]),h=(0,r.useCallback)((e=>{a.current=e}),[a]),g=(0,r.useCallback)((e=>{s.current=e}),[s]);return(0,r.useMemo)((()=>({reorderingColumnIdRef:t,reorderingColumnIdxRef:n,dropPositionIdx:o,setDropPositionIdx:i,draggingColumnRef:l,draggingColumnIntialXRef:a,draggingColumnIntialYRef:s,scrollableContainerRef:c,setReorderingColumnId:d,setReorderingColumnIdx:u,setDraggingColumnElement:p,setDraggingColumnIntialX:h,setDraggingColumnIntialY:g,setScrollableContainerElement:f})),[o,p,h,g,d,u,f])};function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ea=J.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderRowWrapper",componentId:"y4xr8t-0"})(["display:flex;position:sticky;z-index:4;top:0;"]),Da=J.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderRow",componentId:"y4xr8t-1"})([""," background-clip:padding-box;padding-bottom:'0';& div:last-of-style{margin-right:20px;}"],Li.Y8),Sa=J.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderCellContainer",componentId:"y4xr8t-2"})(["display:flex;position:relative;"]);function Ra(e,t,n){const r=e===t;return{width:`${r?n:0}px`,marginRight:(r?4:0)+"px"}}var Za=e=>{let{headerGroup:t,tileId:n,anyColumnResizing:o,readonly:i,preview:l}=e;const{getHeaderGroupProps:a,headers:s}=t,{reorderingColumnIdRef:c,reorderingColumnIdxRef:d,dropPositionIdx:u}=(0,r.useContext)(gl),p=a(),{width:f}=(null===p||void 0===p?void 0:p.style)||{};return(0,K.jsxs)(Ea,{style:{minWidth:parseInt(f,10)},children:[!i&&(0,K.jsx)(Li.t_,{}),(0,K.jsx)(Da,ka(ka({},p),{},{style:ka(ka({},null===p||void 0===p?void 0:p.style),{},{width:"fit-content"}),$preview:l,children:s.map(((e,t)=>(0,K.jsxs)(Sa,{children:[c.current&&t<=(d.current||0)&&(0,K.jsx)(X.E.div,{transition:H.Z2,initial:Ra(u,t,e.width),animate:Ra(u,t,e.width)}),e.render("Header",{columnIdx:t,isStatic:!1,tileId:n,readonly:i,preview:l,anyColumnResizing:o}),!(l||i||c.current&&t===(d.current||0))&&(0,K.jsx)(Fl.Z,{column:e,tileId:n}),c.current&&t>(d.current||0)&&(0,K.jsx)(X.E.div,{transition:H.Z2,initial:Ra(u,t,e.width),animate:Ra(u,t,e.width)})]},`columnHeader-${e.id}`)))}))]})},_a=n(56913);const $a=["editable","placeholder"];function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Ma=(e,t)=>{let{editable:n,placeholder:r}=e,o=(0,jt.Z)(e,$a);const{wrapText:i,value:a,textSelectionColor:s,contentEditableStyles:c}=o;return n?(0,K.jsx)(_a.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,placeholder:r},o)):(0,K.jsx)(xa,{wrapText:i,slateData:a,style:c,placeholder:r,textSelectionColor:s})};var Aa=(0,r.memo)((0,r.forwardRef)(Ma)),Na=n(85684),za=n(69029);var Fa=(e,t,n,o,i)=>{const{activateNeighborCell:l,activateCell:a,isLastRow:s,focusOnTable:c,applyMultipleUpdates:d}=(0,r.useContext)(Ai),u=(0,r.useCallback)((()=>{if(s(e)){o.current=!0;const r=$o()();d([(0,Ci.hT)(e,t,n),(0,Ci.Gq)(r)]),a(r,t)}else l(e,t,xl.N.Down);return c(),!0}),[s,e,c,o,d,t,n,a,l]);return(0,r.useMemo)((()=>({"mod+b":e=>((0,za.h4)(e,"bold"),!0),"mod+i":e=>((0,za.h4)(e,"italic"),!0),"mod+u":e=>((0,za.h4)(e,"underlined"),!0),"mod+z":(e,t)=>(t.stopPropagation(),e.undo(),!0),"mod+shift+z":(e,t)=>(t.stopPropagation(),e.redo(),!0),esc:e=>((0,Uo.tCj)(e),i(),!0),enter:u,tab:()=>(l(e,t,xl.N.Right),i(),!0),"shift+tab":()=>(l(e,t,xl.N.Left),i(),!0)})),[u,i,l,e,t])};function Ba(e){const{0:t,1:n}=(0,r.useState)(e),o=(0,r.useCallback)((e=>{n((t=>(0,Ni.vk)(t,e)))}),[]),i=(0,r.useCallback)((e=>{n((t=>(0,Ni.gF)(t,e)))}),[]);return{cellData:t,setCellData:n,setCellColor:o,setSlateData:i}}const Ua=(0,J.ZP)(Dl).withConfig({displayName:"FloatingCellEditor__Positioner",componentId:"sc-136s8aw-0"})(["position:absolute;left:","px;top:","px;height:auto;width:","px;"],(e=>e.$left),(e=>e.$top),(e=>e.$width));var Ha=e=>{var t,n;let{tileRef:o,tableContentPadding:i,fontSize:l}=e;const{floatingCellProps:a,cleanUpStates:c}=(0,r.useContext)(El),{rowId:d,colId:u,serializedCellData:p,cellRef:f,domFocusCellKeybindings:h}=a,m=(0,s.l)(g.k6),{left:b=0,top:y=0}=(null===o||void 0===o||null===(t=o.current)||void 0===t?void 0:t.getBoundingClientRect())||{},{left:v=0,top:w=0,width:x=0}=(null===f||void 0===f||null===(n=f.current)||void 0===n?void 0:n.getBoundingClientRect())||{},C=(v-b)/m,O=(w-y)/m,j=x/m,P=(0,r.useRef)(null),{cellData:T,setSlateData:I}=Ba((0,Cl.vB)(p)),k=(0,r.useRef)(!1),{updateCell:E}=(0,r.useContext)(Ai),D=(0,r.useCallback)((()=>{k.current||E(d,u,T),c()}),[c,E,d,u,T]),S=Fa(d,u,T,k,h),R=Ni.mR.fromCellColor(T.color),Z=(0,J.Fg)();return(0,K.jsx)(Ua,{$left:C,$top:O,$width:j,$fontSize:l,"data-testid":"table_floating_cell_editor",$preview:!1,$backgroundColor:R.getBackgroundColor(Z),$textColor:R.getTextColor(Z),children:(0,K.jsxs)(Na.Z,{onClick:()=>D(),listenerOptions:{capture:!0},children:[(0,K.jsx)(wi,{$isFocused:!0}),(0,K.jsx)(Aa,{editorId:`floatingcell-${d}-${u}`,ref:P,value:T.slateData,setValue:I,placeholder:" ",onFocus:()=>{},onBlur:D,autoFocus:!0,keyBindings:S,editable:!0,wrapText:!0,textSelectionColor:R.getTextSelectionColor(Z),contentEditableStyles:{padding:`${i}px`},features:[Ho.Ar.MARKS,Ho.Ar.REWRITE,Ho.Ar.LINKS,Ho.Ar.LISTS]})]})})};var Va=()=>{const{0:e,1:t}=(0,r.useState)(null),n=(0,r.useCallback)((()=>{t(null)}),[t]);return(0,r.useMemo)((()=>({floatingCellProps:e,setFloatingCellProps:t,cleanUpStates:n})),[e,n])};const Wa=(e,t)=>{let{value:n,isEditable:o,wrapText:i,rowId:l,colId:a,setIsFocused:s,domFocusCellKeybindings:c,padding:d}=e;const{updateCell:u}=(0,r.useContext)(Ai),{cellData:p,setCellData:f,setSlateData:h}=Ba((0,Cl.vB)(n)),g=(0,r.useRef)(!1);(0,r.useEffect)((()=>f((0,Cl.vB)(n))),[n,f]);const m=(0,r.useCallback)((()=>{g.current||u(l,a,p),s(!1)}),[s,u,l,a,p]),b=(0,r.useCallback)((()=>{s(!0),g.current=!1}),[s]),y=Fa(l,a,p,g,c),v=(0,r.useMemo)((()=>({padding:`${d}px`})),[d]),w=Ni.mR.fromCellColor(p.color),x=(0,J.Fg)();return(0,K.jsx)(Aa,{editorId:`editablecell-${l}-${a}`,ref:t,value:p.slateData,setValue:h,onBlur:m,onFocus:b,placeholder:" ",editable:o&&i,disableHistory:!1,keyBindings:y,wrapText:i,contentEditableStyles:v,textSelectionColor:w.getTextSelectionColor(x),features:[Ho.Ar.MARKS,Ho.Ar.REWRITE,Ho.Ar.LINKS,Ho.Ar.LISTS]})};var Ya=(0,r.memo)((0,r.forwardRef)(Wa));const Xa=J.ZP.div.withConfig({displayName:"TableHeaderstyles__ColumnEditorTools",componentId:"i6qlwu-0"})(["height:20px;z-index:2;"]),Ga=J.ZP.div.withConfig({displayName:"TableHeaderstyles__HeaderDiv",componentId:"i6qlwu-1"})(["height:100%;position:relative;font-weight:600;border-radius:3px;margin:0;margin-right:","px;"],(e=>e.$marginRight)),Ja=J.ZP.div.withConfig({displayName:"TableHeaderstyles__ColumnDragHandle",componentId:"i6qlwu-2"})(["width:20px;height:3px;border-radius:3px;background-color:",";opacity:",";"],(e=>e.theme.colors.contrast16),(e=>e.$visible?1:0)),qa=J.ZP.div.withConfig({displayName:"TableHeaderstyles__ColumnDragHover",componentId:"i6qlwu-3"})(["height:15px;position:absolute;top:4px;left:8px;cursor:grab;display:flex;align-items:center;justify-content:center;&:hover ","{background-color:",";opacity:1;}"],Ja,(e=>e.theme.colors.contrast));var Ka=(e,t,n,o,i,l,a,c)=>{const{reorderingColumnIdRef:d,dropPositionIdx:u,setDropPositionIdx:p,draggingColumnRef:f,setReorderingColumnId:h,setReorderingColumnIdx:m,setDraggingColumnIntialX:b,setDraggingColumnIntialY:y,scrollableContainerRef:v}=(0,r.useContext)(gl),w=(0,s.l)(g.k6),x=v.current,C=(0,r.useCallback)((e=>{const r=[...n];r.splice(t+1);const o=r.reduce(((e,t)=>e+parseFloat((t.width||"0").toString())+2*mi.YF),Li.QG)-parseFloat((n[t].width||"0").toString())/2;if(x){return e-(o+x.getBoundingClientRect().left-x.scrollLeft)}return 0}),[t,n,x]),O=(0,r.useCallback)((e=>{const r=C(e);if(r>0){let e,o=0;for(e=t+1;e<n.length;e++){const t=n[e].width;if(r<o+t/2){p(e-1);break}o+=t}e===n.length&&p(e-1)}else{let e,o=0;for(e=t-1;e>=0;e--){const t=n[e].width;if(-r<o+t/2){p(e+1);break}o+=t}e<0&&p(0)}}),[t,n,C,p]),j=(0,r.useCallback)((()=>{if(f.current){const e=f.current.getBoundingClientRect(),t=e.width/2+e.left;O(t)}}),[f,O]),P=(0,r.useCallback)((()=>{if(x&&f.current){const e=x.getBoundingClientRect(),t=f.current.getBoundingClientRect(),n=x.scrollWidth>e.width,r=x.scrollWidth-e.width;if(!n)return;((e,t)=>{const n=t.width-.9*t.width;return e>=t.right-n})(t.right,e)&&x.scrollLeft<r?(x.scrollLeft+=1,requestAnimationFrame(P)):((e,t)=>{const n=t.width-.9*t.width;return e<=t.left+n})(t.left,e)&&x.scrollLeft>0&&(x.scrollLeft-=1,requestAnimationFrame(P))}}),[f,x]);return{bindDrag:(0,Oe.c0)((n=>{let{down:r,movement:[s,g],tap:v,event:C,xy:[T]}=n;if(v)a(C);else{if(c(C),!d.current){const n=null===o||void 0===o?void 0:o.getBoundingClientRect();b(null===n||void 0===n?void 0:n.left),y(null===n||void 0===n?void 0:n.bottom),null===x||void 0===x||x.addEventListener("scroll",j),h(e.id),m(t),p(t),l()}f.current&&(f.current.style.transform=`scale(${w}) translate(${s}px, ${g}px)`),O(T),P(),r||(i(d.current,u),h(null),m(null),p(null),b(null),y(null),null===x||void 0===x||x.removeEventListener("scroll",j))}}),{filterTaps:!0})}};function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ts=e=>{let{colId:t,tileId:n,columnWidth:o,bindDrag:i}=e;const l=(0,r.useMemo)((()=>({colId:t,tileId:n})),[t,n]),s=(0,a.sJ)((0,$i.$A)(l)),c=o?parseInt(o.toString(),10)-16-4:o;return(0,K.jsx)(qa,es(es({"data-testid":"table_column_tool_drag_controls","data-disable-drag":!0},i()),{},{style:{width:c},children:(0,K.jsx)(Ja,{$visible:s})}))};var ns=e=>{let{column:t,columns:n,columnIdx:o,isDragAndDrop:i,tileId:l,anyColumnResizing:a,readonly:s,preview:c}=e;const{id:u,getHeaderProps:p}=t,{moveColumn:f,deselectAllCells:h,selectColumn:g,appendSelectColumn:m,selectColsFromColToActive:b}=(0,r.useContext)(Ai),{0:y,1:v}=(0,r.useState)(null),w=(0,r.useRef)(),x=(0,r.useCallback)((e=>{(0,d.ZP)(e)?m(u):e.shiftKey?b(u):g(u),w.current.controlOpen((e=>!e),{x:e.clientX,y:e.clientY})}),[m,u,b,g]),C=(0,r.useCallback)((()=>{w.current.controlOpen(!1)}),[]),{bindDrag:O}=Ka(t,o,n,y,f,h,x,C),{reorderingColumnIdRef:j}=(0,r.useContext)(gl),P=j.current===u&&!i,T=p(),I=(0,r.useMemo)((()=>es(es({},T.style),P?{opacity:"0",width:"0",marginRight:"0"}:{})),[T.style,P]),k=(0,r.useCallback)((e=>{(e.shiftKey||(0,d.ZP)(e))&&e.preventDefault(),e.stopPropagation()}),[]);return(0,K.jsx)(hl,{disabled:s||a,colId:t.id,currentColor:null,tileId:l,dropdownRef:w,showRowOperations:!1,showColumnOperations:!0,children:(0,K.jsx)(Ga,es(es({"data-testid":"table_column",ref:v},T),{},{style:I,$marginRight:(0,hi.pP)(c,i,s),children:!c&&(0,K.jsx)(Xa,{"data-testid":"table_column_tool",onMouseDown:k,children:!s&&!a&&(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(ts,{colId:t.id,tileId:l,columnWidth:t.width,bindDrag:O})})})}))})};var rs=(0,r.forwardRef)(((e,t)=>{let{getContainerBoundingClientRect:n,tableRef:o,scale:i,children:l}=e;const{0:a,1:s}=(0,r.useState)({height:1}),c=(0,r.useCallback)((e=>{if(e){var r;const t=n(),l=null===(r=o.current)||void 0===r?void 0:r.getBoundingClientRect(),a=(t.height-(e.getBoundingClientRect().top-t.top))/i;l&&l.bottom>t.bottom?s({height:a}):s({maxHeight:a})}t(e)}),[n,t,i,o]);return(0,K.jsx)(vi,{ref:c,$scale:i,style:a,children:l})}));function os(e){var t;return"INPUT"===(null===(t=e.target)||void 0===t?void 0:t.tagName)||(0,z.V)(e.target)}var is=(0,r.memo)((e=>{const{cutSelectedCells:t,copySelectedCells:n,pasteSelectedCells:o}=e,i=(0,r.useCallback)((e=>{os(e)||t(e)}),[t]),l=(0,r.useCallback)((e=>{os(e)||n(e)}),[n]),a=(0,r.useCallback)((e=>{os(e)||o(e)}),[o]);return(0,L.Z)({onCut:i,onCopy:l,onPaste:a}),(0,K.jsx)(K.Fragment,{})})),ls=n(87094);function as(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?as(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):as(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const cs={Cell:Ya,Header:ns,width:175,minWidth:50},ds=ss(ss({},cs),{},{minWidth:10}),us=e=>{var t,n,o,i,l;let{tileData:c,updateTileData:d,radius:u,preview:p,width:f,height:h,isTileEndpoint:m=!1,isMobile:b=!1,tableContentFontSize:y,tableContentPadding:v,tableContentPaddingLeft:w,innerTilePadding:x,tableTitleFontSize:C,readonly:O=!0,editMode:j,selected:P,initialColumnReorderingState:T,resizeRef:I}=e;const k=(0,a.Zl)(g.uz),{id:E}=c,D=(0,s.l)(g.k6),S=(0,hi.JA)({width:f,height:h,isMobile:b,preview:p}),R=(0,hi.nd)(c,S),{showTitle:Z,wrapText:_}=c.tableTileData,$=!p&&P&&j,L=void 0===_||null===_||_,M=(0,r.useCallback)((e=>(0,hi.Sd)(d,e)),[d]),A=(0,r.useCallback)((e=>(0,hi.Mj)(d,e)),[d]),N=(0,r.useRef)(R);N.current=R;const z=(0,la.Z)(N,E),F=z.deselectAllCells,B=(0,Ci.ZP)(M,F),U=Pa(N,B.applyMultipleUpdates,E),H=(0,r.useRef)(null),V=(0,r.useRef)(null),W=(0,r.useRef)(null),X=(0,r.useRef)(null),G=(0,r.useRef)(null),J=(0,r.useCallback)((()=>{var e,t;return null===(e=V.current)||void 0===e||null===(t=e.offsetParent)||void 0===t?void 0:t.getBoundingClientRect()}),[]),q=Ta(T),{reorderingColumnIdRef:Q,draggingColumnIntialXRef:ee,draggingColumnIntialYRef:te,setDraggingColumnElement:ne,setScrollableContainerElement:re}=q,oe=O||!!Q.current,ie=Va(),le=!!ie.floatingCellProps,ae=(0,r.useCallback)(((e,t)=>e.id||`${t}`),[]),se=(0,r.useCallback)((()=>{W.current&&fi(W.current)}),[]),ce=(0,r.useCallback)((()=>{F(),se()}),[F,se]);(0,r.useEffect)((()=>{P&&(k((()=>ce)),se())}),[P,se,k,ce]);const de=(0,r.useMemo)((()=>p?ds:cs),[p]),{getTableProps:ue,getTableBodyProps:fe,headerGroups:he,headers:ge,rows:me,prepareRow:be,columns:ye,state:ve}=(0,pi.useTable)(ss(ss({},R),{},{defaultColumn:de,getRowId:ae}),pi.useBlockLayout,ki),we=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;re(null===V||void 0===V||null===(e=V.current)||void 0===e?void 0:e.offsetParent)}),[re,null===V||void 0===V||null===(t=V.current)||void 0===t?void 0:t.offsetParent]),(0,r.useEffect)((()=>{var e,t;!we.current||null!==(e=ve.columnResizing)&&void 0!==e&&e.isResizingColumn||(0,hi.Io)(ye,R.columns,S,d),we.current=null===(t=ve.columnResizing)||void 0===t?void 0:t.isResizingColumn}),[null===(n=ve.columnResizing)||void 0===n?void 0:n.isResizingColumn]),(0,r.useEffect)((()=>{var e;return null!==(e=ve.columnResizing)&&void 0!==e&&e.isResizingColumn?document.body.style.cursor="col-resize":document.body.style.cursor="",()=>{document.body.style.cursor=""}}),[null===(o=ve.columnResizing)||void 0===o?void 0:o.isResizingColumn]),ui()(he.length<=1,"table has more than 1 header group!");const xe=he[0];(0,r.useEffect)((()=>{O&&F()}),[O,F]);const Ce=(0,r.useCallback)((()=>{F()}),[F]),Oe=(0,r.useCallback)((()=>{var e,t;return null!==V&&void 0!==V&&V.current&&(null===V||void 0===V||null===(e=V.current)||void 0===e||null===(t=e.offsetParent)||void 0===t?void 0:t.scrollTop)||0}),[]),{0:je,1:Pe}=(0,r.useState)(!1),{0:Te,1:Ie}=(0,r.useState)(!0),ke=(0,r.useCallback)((e=>{const t=e.target,n=t.scrollLeft>=t.scrollWidth-t.clientWidth;n&&Te?Ie(!1):n||Te||Ie(!0)}),[Te]);(0,r.useEffect)((()=>{var e;const t=null===(e=V.current)||void 0===e?void 0:e.offsetParent;t&&Pe(t.scrollWidth>t.clientWidth)}));const Ee=(0,r.useMemo)((()=>ss(ss(ss({},B),z),{},{focusOnTable:se,tableRef:V,titleRef:X,tableDataRef:N,activeCellRef:G})),[se,B,z]);return(0,K.jsx)(gl.Provider,{value:q,children:(0,K.jsx)(El.Provider,{value:ie,children:(0,K.jsx)(Ai.Provider,{value:Ee,children:(0,K.jsxs)(ia,{innerRef:W,disabled:b||p||!P,children:[(0,K.jsx)(ls.Z,{resizeRef:I,children:(0,K.jsxs)(bi,{$radius:u,$isTextSelectable:!j&&!p,onMouseDown:Ce,ref:H,children:[Z&&(0,K.jsx)(Jl,{ref:X,tileId:c.id,title:(null===c||void 0===c||null===(i=c.tableTileData)||void 0===i?void 0:i.title)||"",updateTableTitle:A,tableTitleFontSize:C,tableInnerPadding:m?At.WX:x,readonly:O,preview:p,selected:P}),(0,K.jsx)(na,{onScroll:ke,useCustomScrollbars:!b&&!p,visible:!m,disableScrollBehavior:le,children:(0,K.jsxs)(yi,ss(ss({ref:V,$preview:p,$readonly:oe,$isMobile:b,$isFloatingEditorShown:le,$tableContentPaddingLeft:w},ue()),{},{"data-disable-drag":!!P||void 0,children:[xe&&(0,K.jsx)(Za,{headerGroup:xe,readonly:oe,preview:p,tileId:E,anyColumnResizing:!(null===(l=ve.columnResizing)||void 0===l||!l.isResizingColumn)}),$&&(0,K.jsx)(is,ss({},U)),(0,K.jsx)(Xl,{prepareRow:be,getTableBodyProps:fe,rows:me,displayWidth:f-x,readonly:oe,tileId:E,tableContentPadding:v,wrapText:L,preview:p,fontSize:y,editMode:j,tileSelected:P,canTableCutCopyPaste:$})]}))}),(0,K.jsx)(Y.M,{children:je&&Te&&(0,K.jsx)(xi,{"data-testid":"table_tile_scrim",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25}})})]})}),Q.current&&(0,K.jsx)(pe.Z,{left:(null===ee||void 0===ee?void 0:ee.current)||0,top:(null===te||void 0===te?void 0:te.current)||0,children:(0,K.jsx)(rs,{ref:ne,tableRef:V,getContainerBoundingClientRect:J,scale:D,children:(0,K.jsx)(oa,{headers:ge,rows:me,columnId:Q.current,prepareRow:be,tileId:E,wrapText:L,tableContentPadding:v,tableContentPaddingLeft:w,fontSize:y,getTableScrolledTop:Oe})})}),le&&(0,K.jsx)(Ha,{tileRef:H,tableContentPadding:v,fontSize:y})]})})})})};var ps=(0,r.memo)(us);const fs=["src","alwaysRender","canEdit","tileId","tileType","activeDragInProgress","isMobile","isTileEndpoint"];function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ms=J.ZP.iframe.withConfig({displayName:"EmbedIframe__StyledIFrame",componentId:"no971f-0"})(["border-width:0px;border-radius:","px;height:100%;position:absolute;top:0;bottom:0;left:0;right:0;width:100%;pointer-events:",";"],(e=>e.radius),(e=>e.pointerEventsEnabled?"auto":"none")),bs=J.ZP.div.withConfig({displayName:"EmbedIframe__Shimmer",componentId:"no971f-1"})(["height:100%;width:100%;animation:",";position:relative;",";"],(ys="60vw",(0,J.F4)(["0%{background-position:0 0;}100%{background-position:"," 0;}"],ys)),(e=>{let{showLoadingShimmer:t,theme:n}=e;return t&&`\n    background-image: linear-gradient(to right, ${n.colors.page} 0%, ${n.colors.loadingShimmer} 20%, ${n.colors.page} 40%, ${n.colors.page} 100%)};\n    background-size: 100% 100%;\n    animation-duration: 5s;\n    animation-fill-mode: forwards;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    border-radius: 13px;\n  `}));var ys;var vs=e=>{let{src:t,alwaysRender:n=!0,canEdit:o,tileId:i,tileType:l,activeDragInProgress:a=!1,isMobile:c,isTileEndpoint:d}=e,u=(0,jt.Z)(e,fs);const{0:f,1:h}=(0,r.useState)(!1),{0:m,1:b}=(0,r.useState)(!!t);(0,r.useEffect)((()=>{const e=setTimeout((()=>{b(!1)}),1e4);return()=>{clearTimeout(e)}}),[]);const y=(0,s.l)(g.Dm),v=(0,s.l)(g.oG);let w=t,x=!a&&(y===i||v||d||!o);c&&!d&&(x=!1);const{ref:C,inView:O}=(0,kn.YD)({});O||f||n||(w=""),!O||f||n||h(!0);const j=e=>{"INITIAL_LOAD"===e.data.type&&"https://www.figma.com"===e.origin&&(document.activeElement&&"IFRAME"===document.activeElement.tagName&&document.activeElement.blur(),window.removeEventListener("message",j))},P=l===p.YUT.Looker?"allow-top-navigation":"";return(0,K.jsx)(bs,{showLoadingShimmer:m,children:(0,K.jsx)(ms,gs(gs({referrerPolicy:"no-referrer",sandbox:`allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts ${P}`,ref:C},u),{},{src:w,pointerEventsEnabled:x,onLoad:()=>{var e,t,n,r;null===(e=window)||void 0===e||null===(t=e.webkit)||void 0===t||null===(n=t.messageHandlers)||void 0===n||null===(r=n.frameHandler)||void 0===r||r.postMessage(!0),b(!1),w&&w.startsWith("https://www.figma.com/embed")&&window.addEventListener("message",j)}}))})};var ws=J.ZP.div.withConfig({displayName:"EmbedStyles",componentId:"bh22fl-0"})(["background-color:",";border-radius:","px;overflow:hidden;height:100%;position:relative;width:100%;"],(e=>{let{theme:t}=e;return t.colors.transparent}),(e=>{let{radius:t}=e;return t})),xs=n(41366);function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function js(e,t,n){return e&&t?(0,K.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n}):n}const Ps=e=>{var t;let{tileId:n,tileType:o,url:i,preview:l,canEdit:s,isMobile:c,isTileEndpoint:d,updateTileData:u,isPageActive:f,updateContentLink:h,height:g,width:m,sizes:b,presentMode:y}=e;const v=(0,a.sJ)(C.X1),w=_t(),x=(null===v||void 0===v?void 0:v.showIcon)&&!(null!==v&&void 0!==v&&null!==(t=v.excludeTileTypes)&&void 0!==t&&t.includes(o));if((0,r.useEffect)((()=>{const{tileType:e}=(0,xs.Q)(i??"");e&&e!==o&&u((t=>Os(Os({},t),{},{type:e})))}),[o,u,i]),l||x||!i){return js(c,i,(0,K.jsx)(Kt,{tileId:n,tileType:o,sizes:b,updateContentLink:h,preview:l,width:m,height:g,presentMode:y}))}const{url:O}=(0,xs.Q)(i);if(!O)return null;const j=o===p.YUT.Figma,P=o===p.YUT.Web&&O.includes("typeform.com"),T=j||P;return(0,K.jsxs)(ws,{radius:b.tileSizes.radius,children:[js(c,i,(0,K.jsx)(St,{isMobile:c,"data-tome-bypass-tap-navigation":"EmbedTile__EmbedStyles",style:{zIndex:1}})),(0,K.jsx)(vs,{radius:b.tileSizes.radius,src:f?O:"",alwaysRender:!T,allowFullScreen:!0,canEdit:s,tileId:n,isMobile:c,isTileEndpoint:d,tileType:o,activeDragInProgress:w})]})};var Ts=(0,r.memo)(Ps),Is=n(44588),ks=n(59764),Es=n(39225),Ds=n(19148),Ss=n(43060);const Rs=e=>{if(1!==e.length)return!1;const[t]=e;return t.type===Ho.uX&&1===t.children.length&&(1===t.level||0===t.level)&&""===t.children[0].text},Zs=e=>{if(1!==e.length)return!1;const[t]=e;return t.type===Ho.uX&&1===t.children.length&&(2===t.level||3===t.level)&&""===t.children[0].text},_s=(e,t)=>{if(!t||e.length>1)return!1;const n=e[0];return(n.type===Ho.JB||n.type===Ho.uX||n.type===Ho.Oo)&&(1===n.children.length&&""===n.children[0].text)};var $s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _s(e,t)?Rs(e)?Ds.ZP.t("utils.slate.titlePlaceholder"):Zs(e)?Ds.ZP.t("utils.slate.headingPlaceholder"):n?Ss.sC:Ss.QT:""},Ls=n(24603),Ms=n(31951);function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zs=J.ZP.div.withConfig({displayName:"SlateTextTile__ClickTargetFlexBoxWrapper",componentId:"sc-17udvdh-0"})(["width:100%;height:100%;min-height:",";display:flex;flex-direction:column;justify-content:",";text-align:",";cursor:",";"],(e=>{let{$isMobileSingleTile:t}=e;return t?"calc(100vh - 62px - 24px - 160px)":"inherit"}),(e=>{let{$verticalAlignment:t}=e;return t}),(e=>{let{$horizontalAlignment:t}=e;return t}),(e=>{let{$selected:t}=e;return t?"text":"default"}));var Fs=e=>{let{tileId:t,tomeId:n,updateTileData:o,isFirstPage:i,preview:l,editMode:a,selected:s,tileIndex:c,bodyFontSize:d,unitWidth:u,innerTilePadding:h,disabled:g,resizeRef:m,textTileData:b,isMobile:y,isSingleTilePage:v,theme:w=null}=e;const x=(0,r.useCallback)((e=>{o((t=>Ns(Ns({},t),{},{textTileData:Ns(Ns({},t.textTileData),{},{content:e})})))}),[o]),{setActiveEditor:C,notifyOfActiveEditorChange:O}=(0,r.useContext)(ks.f),P=!l&&a,T=P&&s,I=(0,r.useRef)(i&&0===c).current,k=(0,r.useRef)(null),E=(0,r.useRef)(),{0:D,1:S}=(0,r.useState)(""),R=(0,r.useRef)(),_=function(e){let{theme:t}=e;const{0:n,1:o}=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{if(t)try{await Ms.Z.getInstance().loadTheme(t,!1)}catch(e){return Z.v.addError(e),void o(!1)}o(!1)})()}),[t]),n}({theme:w}),$=(0,r.useCallback)((e=>{if(!e)return;E.current=e;const t=e.getEditor();C(t)}),[C]),{apolloClient:L,clientId:M}=(0,f.bp)(),{0:A,1:N}=(0,r.useState)((()=>null!==b&&void 0!==b&&b.content&&(null===b||void 0===b?void 0:b.content.length)>0?JSON.parse(b.content):(0,Vo.j8)(I)));(0,r.useEffect)((()=>{const e=u<j.w4/2-1;S($s(A,P,e))}),[P,A,u]);const F=(0,r.useCallback)((()=>{if(I){const e=(0,z.Q)([A[0]]);e&&(0,Es.gM)(n,e.length>100?e.substring(0,100):e,L,M)}}),[I,A,n,L,M]),B=(0,r.useMemo)((()=>{const e=(0,Oi.Z)((e=>{const t=JSON.stringify(e);x(t)}),500);return R.current=e.flush,e}),[x]),U=(0,r.useCallback)((e=>{N(e),B(e)}),[N,B]);(0,r.useEffect)((()=>{N(null!==b&&void 0!==b&&b.content&&(null===b||void 0===b?void 0:b.content.length)>0?JSON.parse(null===b||void 0===b?void 0:b.content):(0,Vo.j8)(I))}),[null===b||void 0===b?void 0:b.content,I]);const H=(0,r.useCallback)((e=>{var t;null===(t=E.current)||void 0===t||t.focusEditor(),e.preventDefault()}),[]),V=(0,r.useCallback)((e=>{var t,n;null===(t=E.current)||void 0===t||t.focusEditor(),null===(n=E.current)||void 0===n||n.appendText(e.key),e.preventDefault()}),[]),W=(0,r.useCallback)((()=>{k.current&&T&&fi(k.current)}),[T]);(0,r.useEffect)((()=>{W()}),[W]);const Y=(0,r.useMemo)((()=>{const e=new Map;return e.set("enter",H),e.set(Il,V),e}),[V,H]),X=(0,r.useCallback)((()=>{var e;C(null===(e=E.current)||void 0===e?void 0:e.getEditor())}),[C]),G=(0,r.useCallback)((e=>{var n,r;const o=document.querySelector(`#editor-${t} [contenteditable=true]`),i=null===o||void 0===o?void 0:o.contains(e.target),l="true"===(null===(n=e.target.children)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.getAttribute("data-slate-placeholder"));if(s&&(!i||l)){var a,c,d;if(null!==(a=E.current)&&void 0!==a&&a.isFocused())null===(c=E.current)||void 0===c||c.moveCursorToEnd();else null===(d=E.current)||void 0===d||d.focusEditor();e.preventDefault()}}),[s,t]),J=(0,r.useCallback)((()=>{var e;return R.current&&R.current(),null===(e=E.current)||void 0===e||e.deselect(),!1}),[]),q=(0,r.useMemo)((()=>({"mod+z":()=>J(),esc:()=>{var e,t;return null===(e=E.current)||void 0===e||e.blurEditor(),null===(t=k.current)||void 0===t||t.focus(),!0}})),[J]);return(0,K.jsx)(kl.G,{ref:k,bindings:Y,disabled:!T,style:{width:"100%",height:"100%"},children:(0,K.jsx)(zs,{onMouseDown:G,$verticalAlignment:(0,Ls.tj)(null===b||void 0===b?void 0:b.verticalAlignment),$horizontalAlignment:(0,Ls.B0)(null===b||void 0===b?void 0:b.horizontalAlignment),$selected:s,$isMobileSingleTile:y&&v,children:(0,K.jsx)(Ss.ZP,{id:`editor-${t}`,"data-testid":"TextEditor",bodyFontSize:d,innerTilePadding:h,$preview:l,$isMobile:y,$horizontalAlignment:(null===b||void 0===b?void 0:b.horizontalAlignment)??p.KxP.Leading,$verticalAlignment:(null===b||void 0===b?void 0:b.verticalAlignment)??p.Q4P.Top,$placeholder:D,disabled:g||P&&!s,isThemeLoading:!_,children:(0,K.jsx)(ls.Z,{resizeRef:m,children:(0,K.jsx)(Aa,{editable:T,keyBindings:q,onBlur:F,onChange:O,onFocus:X,placeholder:D,ref:$,setValue:U,tomeId:n,tileId:t,value:A,wrapText:!0,features:[...Ho.$M]})})})})})},Bs=n(35800);function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Vs=J.ZP.div.withConfig({displayName:"TileError__ErrorMessage",componentId:"sc-1sr2ard-0"})(["display:flex;align-items:center;justify-content:center;text-align:center;height:100%;"]),Ws=()=>(0,K.jsx)(Vs,{children:"This content failed to load."});var Ys=e=>{let{children:t,tile:n}=e;return(0,K.jsx)(Bs.ErrorBoundary,{FallbackComponent:Ws,onError:(e,t)=>function(e,t){Z.v.addError(e,t)}(e,Hs(Hs({},t),{},{tile:n})),children:t})};function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Js=(0,J.ZP)(X.E.div).withConfig({displayName:"Tilestyles__FullscreenModalBackground",componentId:"t1tnhs-0"})(["background-color:",";height:100vh;left:0;overflow:hidden;position:fixed;top:0;width:100vw;z-index:",";"],(e=>{let{theme:t}=e;return t.colors.background}),ie.D2),qs=(0,J.ZP)(X.E.div).withConfig({displayName:"Tilestyles__TileStyles",componentId:"t1tnhs-1"})(["min-height:100%;background-color:",";width:100%;box-sizing:border-box;position:relative;outline:none;display:flex;flex:1;"," pointer-events:",";font-family:",";overflow:hidden;"],(e=>e.theme.colors.transparent),(e=>e.$inFocus&&!e.$preview&&`\n    z-index: ${e.$expanded?ie.D2:1};\n  `),(e=>e.$disablePointer?"none":"unset"),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name})),Ks=J.ZP.div.withConfig({displayName:"Tilestyles__TileBackgroundStyles",componentId:"t1tnhs-2"})([""]);function Qs(e){let{isMobile:t,isExpandedTile:n,expandedTileRef:r,children:o}=e;return(0,K.jsx)(Ks,Gs(Gs({style:Gs({},t?{width:"100%"}:{minWidth:"100%",maxWidth:"100%"})},n?{ref:r}:{}),{},{children:o}))}const ec=i()((()=>Promise.all([n.e(6953),n.e(6440),n.e(438),n.e(5497),n.e(3126),n.e(4700),n.e(4489)]).then(n.bind(n,14489))),{loadableGenerated:{webpack:()=>[14489]}}),tc={display:"flex",flex:1,height:"100%",width:"100%"},nc={initial:{opacity:0},animate:{opacity:1}},rc=(e,t)=>{let{tile:n,tomeId:o,sizes:i,page:l,index:a=0,preview:s=!1,canEdit:c=!1,isSingle:d=!1,activeDragInProgress:u=!1,isFirstPage:f=!1,isPageActive:h=!1,isMobile:g=!1,isTileEndpoint:m=!1,disableAnnotations:b=!1,disableExpand:y=!1,onTileResize:v,rowHeight:w,rowIndex:x,rowId:C,tileIndex:O,pageKind:j}=e;const{tileSizes:P}=i,{expanded:T,unexpanded:I,disableExpand:k,lastExpandedId:E,expandedTileId:D,expandedTileRef:S,tileWidth:R,tileHeight:Z,layoutComputedTileWidth:_,tileWidthUnits:$,tileData:L,updateTileData:M,resizeRef:A,presentMode:N,selected:z,isOtherTileSelected:F,imageCropMode:B,videoCropMode:Y,tileStylesRef:X,onClick:G,onMouseDown:J,displayAnnotationsOverlays:q,toggleExpand:Q,disableCustomDropdownPerTileState:ee,fullscreenScale:te,updateContentLink:ne,saveTileData:re,onOpenDropdown:oe,dropdownItems:ie,tileStylesAnimate:le,codeTileHandleChange:ae,duplicateTile:se}=U({tileRef:t,tile:n,tomeId:o,sizes:i,page:l,index:a,preview:s,canEdit:c,isSingle:d,activeDragInProgress:u,isFirstPage:f,isPageActive:h,isMobile:g,isTileEndpoint:m,disableAnnotations:b,disableExpand:y,onTileResize:v,rowHeight:w,rowIndex:x,rowId:C,tileIndex:O,pageKind:j}),ce=(0,Is.Z)(),de=(0,r.useRef)(null),ue=(0,r.useMemo)((()=>{const e=new Map;return e.set("mod+d",(e=>{e.preventDefault(),se()})),e}),[se]);return(0,K.jsx)(kl.G,{ref:de,bindings:ue,disabled:!z||!c,style:{width:"100%",height:"100%"},children:(0,K.jsx)(Ro.Z,{menuWidth:180,menuPosition:"below",menuAlign:"click",rightClickActivated:!0,disabled:!c||ee,onOpenDropdown:oe,styles:tc,itemsOrFn:ie,triggerRef:null,children:(0,K.jsxs)(ci,{annotationsActive:!b&&!s&&h&&!B&&!Y&&q&&!g,tile:n,tomeId:o,canEdit:c,isMobile:g,children:[T&&g&&(0,K.jsx)(Js,{"data-testid":"fullscreen_modal_background","data-tome-bypass-tap-navigation":"Tile__FullscreenModalBackground",initial:nc.initial,animate:nc.animate,transition:H.Z2}),(0,K.jsxs)(qs,{"data-testid":"tile","data-testid-tile-position":`${x}-${O}`,"data-testid-tile-id":n.id,"data-testid-tile-selected":z,"data-testid-tile-expanded":T,$preview:s,onClick:G,onMouseDown:J,$inFocus:E===n.id,"data-tile-type":n.type,border:P.border,radius:P.radius,ref:X,index:a,$expanded:T,$disablePointer:ce||I||s,animate:le,transition:H.Z2,children:[!s&&c&&(0,K.jsx)(W.Z,{data:L,saveData:re}),(0,K.jsx)(Qs,{isMobile:g,isExpandedTile:D===L.id,expandedTileRef:S,children:(0,K.jsxs)(Ys,{tile:L,children:[("TEXT"===n.type||"TEXT_SLATE"===n.type)&&(0,K.jsx)(Fs,{editMode:c,isFirstPage:f,preview:s,selected:z,tomeId:o,tileIndex:O,isMobile:g,isSingleTilePage:!(null===l||void 0===l||!l.tiles||1!==l.tiles.length),tileId:L.id,unitWidth:$,updateTileData:M,disabled:B||Y||u,bodyFontSize:P.bodyFontSize,innerTilePadding:P.innerTilePadding,resizeRef:A,textTileData:L.textTileData||null,theme:null===l||void 0===l?void 0:l.theme}),V.g$.includes(L.type)&&(0,K.jsx)(Pn,{tileData:L,setTileData:M,canEdit:c,preview:s,selected:z,width:g?R:_,height:w,sizes:i,toggleExpand:Q,isMobile:g,isExpanded:T,expandedScale:te,presentMode:N,disableExpandButton:k||N,isPageActive:h,pageKind:j}),L.type===p.YUT.Video&&(0,K.jsx)(ao,{width:g?R:_,height:w,radius:P.radius,preview:s,selected:z,isOtherTileSelected:F,tileData:L,rowIndex:x,tileIndex:O,updateTileData:M,isSingle:d,isPageActive:h&&!s,editMode:c,sizes:i,presentMode:N,isMobile:g,isExpanded:T,toggleExpand:Q,disableExpand:k,expandedScale:te,hideVideoControls:j===Rt.s.PAGE_ENDPOINT}),L.type===p.YUT.Code&&(0,K.jsx)(ec,{content:L.content||"",radius:P.radius,handleContentChange:ae,preview:s,selected:z,editMode:c,tileFontSize:i.tileSizes.tableTitleFontSize,disabled:!c||B||Y||u||s||!z,innerTilePadding:P.innerTilePadding,resizeRef:A}),L.type===p.YUT.Table&&(0,K.jsx)(ps,{tileData:L,updateTileData:M,radius:P.radius,preview:s,width:R,height:Z,isTileEndpoint:m,isMobile:g,tableContentFontSize:i.tileSizes.tableContentFontSize,tableContentPadding:i.tileSizes.tableContentPadding,innerTilePadding:i.tileSizes.innerTilePadding,tableTitleFontSize:i.tileSizes.tableTitleFontSize,tableContentPaddingLeft:i.tileSizes.tableContentPaddingLeft,readonly:s||!(c&&z),editMode:c,selected:z,resizeRef:A}),V.Zp.includes(L.type)&&(0,K.jsx)(Ts,{tileId:L.id,tileType:L.type,url:L.contentLink,preview:s,canEdit:c,isMobile:g,isTileEndpoint:m,updateTileData:M,isPageActive:h&&!s,updateContentLink:ne,height:w,width:_,sizes:i,presentMode:N}),L.type===p.YUT.Twitter&&(0,K.jsx)(To,{tileId:L.id,preview:s,url:L.contentLink||void 0,updateContentLink:ne,height:w,width:_,sizes:i,presentMode:N,resizeRef:A}),L.type===p.YUT.Blank&&(0,K.jsx)(So,{canEdit:c,preview:s,tileSizes:P})]})})]})]})})})};var oc=(0,r.memo)((0,r.forwardRef)(rc)),ic=n(37887),lc=n(1644),ac=n(26188);var sc=n(50456).ZP`
  query tomeAccessForTile($id: String!) {
    tomeAccessForTile(id: $id)
  }
`,cc=n(87174);var dc=e=>{let{children:t,id:n}=e;const o=(0,ic.a)(sc,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!1,variables:{id:n}}),{user:i,loading:l}=(0,r.useContext)(ac.Z);if(!n)return(0,K.jsx)(cc.Z,{});if(o.loading||o.networkStatus===lc.I.refetch)return(0,K.jsx)(lr.Z,{});if(o.error)return(0,K.jsxs)(K.Fragment,{children:["Error! $",o.error.message]});if(l)return(0,K.jsx)(lr.Z,{});let a={canView:!1,canEdit:!1};return i?a={canView:!0,canEdit:!0}:"PUBLIC"===o.data.tomeAccess&&(a={canView:!0,canEdit:!1}),a.canView?(0,K.jsx)(K.Fragment,{children:t}):(0,K.jsx)(cc.Z,{})}},48811:function(e,t,n){"use strict";var r=n(59499),o=n(4730),i=n(6624),l=n(13285),a=(n(67294),n(59016)),s=n(1922),c=n(85893);const d=["user","size","opacity","animated","style","onClick","delayMs","renderTooltip"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=(0,a.ZP)(l.E.div).withConfig({displayName:"UserAvatar__AvatarMotion",componentId:"oe9jq3-0"})(["display:flex;flex-direction:row;flex-shrink:0;"]),h=(0,a.ZP)(i.fC).withConfig({displayName:"UserAvatar__AvatarRoot",componentId:"oe9jq3-1"})(["height:","px;width:","px;background-color:'transparent';border-radius:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;user-select:none;"],(e=>e.size),(e=>e.size)),g=(0,a.ZP)(i.F$).withConfig({displayName:"UserAvatar__AvatarImage",componentId:"oe9jq3-2"})(["width:100%;height:100%;object-fit:cover;border-radius:inherit;"]),m=(0,a.ZP)(i.Q5).withConfig({displayName:"UserAvatar__AvatarFallback",componentId:"oe9jq3-3"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:white;color:black;font-size:","px;line-height:1;font-weight:500;"],(e=>{let{size:t}=e;return.5*t}));function b(e){const t=e.split(" ");let n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n}t.Z=e=>{const{user:t,size:n,opacity:r=1,animated:i=!1,style:l,onClick:a,delayMs:u,renderTooltip:y}=e,v=(0,o.Z)(e,d),{t:w}=(0,s.$G)(),x=null!==t&&void 0!==t&&t.profileImage?u||600:0;return(0,c.jsx)(f,p(p({style:l,transition:{type:"spring",stiffness:500,damping:30},initial:i?{scale:.1,opacity:0}:{scale:1,opacity:r},animate:{scale:1,opacity:r},exit:i?{scale:.1,opacity:0}:{scale:1,opacity:r},whileHover:i?{scale:1.3,transition:{duration:.25,ease:[.25,.1,.6,1.8]}}:{},onClick:e=>null===a||void 0===a?void 0:a(e)},v),{},{children:(0,c.jsxs)(h,{size:n,children:[(0,c.jsx)(g,{draggable:!1,src:(null===t||void 0===t?void 0:t.profileImage)||"",alt:w("components.userAvatar.profileImageAltText"),referrerPolicy:"no-referrer"}),(0,c.jsx)(m,{delayMs:x,size:n,children:b((null===t||void 0===t?void 0:t.name)||"")})]})}))}},44466:function(e,t,n){"use strict";let r,o,i;n.d(t,{Cl:function(){return o},O9:function(){return i},wk:function(){return r}}),function(e){e.DEFAULT="default",e.MAGENTA="magenta",e.BLUE="blue",e.GRAY="gray"}(r||(r={})),function(e){e.HAIRLINE="hairline",e.WAVY="wavy"}(o||(o={})),function(e){e.CLICK="click",e.ALWAYS="always"}(i||(i={}))},12329:function(e,t,n){"use strict";n.d(t,{Ax:function(){return b},HR:function(){return u},JK:function(){return h},__:function(){return m},bd:function(){return s},dQ:function(){return a},hB:function(){return p},ni:function(){return d},o4:function(){return l},oT:function(){return c},pT:function(){return g}});var r=n(59016),o=n(13285),i=n(53098);const l=(0,r.ZP)(o.E.div).withConfig({displayName:"AnnotationStyles__AnnotationWrapper",componentId:"pcxp0t-0"})(["position:absolute;z-index:",";"],(e=>e.$isSelected?i.sE+1:i.sE)),a=r.ZP.div.withConfig({displayName:"AnnotationStyles__DotClusterContainer",componentId:"pcxp0t-1"})(["position:absolute;margin-left:-",";"],"2px"),s=(0,r.ZP)(o.E.svg).withConfig({displayName:"AnnotationStyles__DotContainer",componentId:"pcxp0t-2"})(["position:absolute;top:0;left:","px;width:","px;height:","px;"],(e=>e.$left?e.$left:0),(e=>e.$size+1),(e=>e.$size+1)),c=(0,o.E)(r.ZP.circle.withConfig({displayName:"AnnotationStyles__Dot",componentId:"pcxp0t-3"})([""," transition:fill 0.2s ease-out;cx:50%;cy:50%;"],(e=>e.$solid?(0,r.iv)(["fill:",";"],e.theme.annotationColors[e.$colorScheme].background):(0,r.iv)(["stroke:",";fill-opacity:0;"],e.theme.annotationColors[e.$colorScheme].background)))),d=r.ZP.circle.withConfig({displayName:"AnnotationStyles__ClusterDotBorder",componentId:"pcxp0t-4"})(["fill:",";cx:50%;cy:50%;"],(e=>e.theme.colors.page)),u=r.ZP.circle.withConfig({displayName:"AnnotationStyles__ClusterDot",componentId:"pcxp0t-5"})(["fill:",";stroke:",";stroke-width:",";cx:50%;cy:50%;"],(e=>e.$solid?e.theme.annotationColors[e.$colorScheme].background:e.theme.colors.background),(e=>e.theme.annotationColors[e.$colorScheme].background),"2px"),p=(0,r.ZP)(o.E.div).withConfig({displayName:"AnnotationStyles__LabelContainer",componentId:"pcxp0t-6"})(["transform:translateY(-50%);width:max-content;min-width:min-content;pointer-events:none;"]),f=(0,r.ZP)(o.E.div).withConfig({displayName:"AnnotationStyles__LabelContent",componentId:"pcxp0t-7"})(["pointer-events:auto;&:hover{cursor:default;}display:inline-block;transition:background 0.2s ease-out;background:",";padding:6px 10px;border-radius:8px;"],(e=>e.theme.annotationColors[e.$colorScheme].background)),h=(0,r.ZP)(f).withConfig({displayName:"AnnotationStyles__DesktopLabelContent",componentId:"pcxp0t-8"})(["box-shadow:0 1.2px 2.2px rgba(0,0,0,0.02),0 2.9px 5.3px rgba(0,0,0,0.028),0 5.4px 10px rgba(0,0,0,0.035),0 9.6px 17.9px rgba(0,0,0,0.042),0 18px 33.4px rgba(0,0,0,0.05),0 43px 80px rgba(0,0,0,0.07) ",";"],(e=>e.$isBeingEdited&&`,0px 0px 0px 1.5px ${e.theme.colors.annotationInnerBorder}, 0px 0px 0px 2.5px ${e.theme.colors.annotationOuterBorder}`)),g=(0,r.ZP)(f).withConfig({displayName:"AnnotationStyles__ClusterLabelContent",componentId:"pcxp0t-9"})(["box-shadow:0 1px 4px rgba(0,0,0,0.2);"]),m=(0,r.ZP)(o.E.span).withConfig({displayName:"AnnotationStyles__Label",componentId:"pcxp0t-10"})(["font-weight:",";font-family:",";font-style:",";font-size:","px;line-height:140%;color:",";> div{min-height:","px;max-width:","px;word-break:break-word;& span{-webkit-user-select:text;user-select:text;cursor:text;}}"],(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}),(e=>14*e.scale),(e=>e.theme.annotationColors[e.$colorScheme].foreground),(e=>13*e.scale),(e=>140*e.scale)),b=(0,r.ZP)(o.E.div).withConfig({displayName:"AnnotationStyles__PresentAnnotationContent",componentId:"pcxp0t-11"})(["position:absolute;top:50%;bottom:50%;"])},90574:function(e,t,n){"use strict";var r=n(59499),o=n(4730),i=n(67294),l=n(24306),a=n(85893);const s=["style"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=(e,t)=>{const{style:n}=e,r=(0,o.Z)(e,s);return(0,a.jsx)(l.Z,d(d({ref:t,style:n,viewBox:"0 0 64 64"},r),{},{children:(0,a.jsx)("path",{d:"M34 14C34 12.8954 33.1046 12 32 12C30.8954 12 30 12.8954 30 14V30H14C12.8954 30 12 30.8954 12 32C12 33.1046 12.8954 34 14 34H30V50C30 51.1046 30.8954 52 32 52C33.1046 52 34 51.1046 34 50V34H50C51.1046 34 52 33.1046 52 32C52 30.8954 51.1046 30 50 30H34V14Z"})}))};t.Z=(0,i.forwardRef)(u)},71179:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,l.jsx)("path",{d:"M23.972 10.5248L9.81761 16.38C9.02721 16.7024 9.03761 17.8256 9.82801 18.1376L24.0448 23.7744C25.2928 24.2736 26.6864 24.2736 27.9344 23.7744L42.1512 18.1376C42.9416 17.8256 42.952 16.7024 42.1616 16.38L28.0072 10.5248C26.7072 9.98399 25.2616 9.98399 23.972 10.5248Z",fill:"#FFBF00"}),(0,l.jsx)("path",{d:"M27.248 26.8528V40.9344C27.248 41.6 27.924 42.0576 28.548 41.8184L44.3872 35.672C44.7512 35.5264 44.9904 35.1832 44.9904 34.788V20.7064C44.9904 20.0408 44.3144 19.5832 43.6904 19.8224L27.8512 25.9688C27.4872 26.1144 27.248 26.4576 27.248 26.8528Z",fill:"#26B5F8"}),(0,l.jsx)("path",{d:"M23.5456 27.5808L18.8448 29.848L18.3664 30.0768L8.44481 34.8296C7.82081 35.1312 7.00961 34.6736 7.00961 33.9768V20.7584C7.00961 20.5088 7.13441 20.2904 7.31121 20.124C7.38401 20.0512 7.46721 19.9888 7.55041 19.9472C7.78961 19.8016 8.12241 19.7704 8.41361 19.8848L23.4624 25.844C24.232 26.1456 24.2944 27.2168 23.5456 27.5808Z",fill:"#ED3049"}),(0,l.jsx)("path",{d:"M8.07043 19.812C7.88323 19.812 7.70643 19.864 7.57123 19.9472C7.48803 19.9992 7.40483 20.0512 7.33203 20.124L18.8448 29.848L23.5456 27.5808C23.8992 27.404 24.076 27.0712 24.076 26.7384C24.076 26.3744 23.868 26 23.4728 25.844L8.42403 19.8848C8.30963 19.8328 8.18483 19.812 8.07043 19.812Z",fill:"#B22437"})]}));t.Z=(0,o.forwardRef)(c)},57142:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,l.jsx)("path",{d:"M52.01 34.0209H16.8385L28.4256 45.5938C29.2109 46.3718 29.2168 47.6392 28.4388 48.4245C27.6607 49.2098 26.3934 49.2157 25.6081 48.4376C25.6031 48.4327 25.5982 48.4277 25.5932 48.4227L10.5707 33.4183C9.7895 32.6388 9.7881 31.3736 10.5676 30.5924C10.5686 30.5914 10.5697 30.5903 10.5707 30.5893L25.5932 15.5848C26.3708 14.799 27.6382 14.7924 28.424 15.57C29.2098 16.3476 29.2164 17.615 28.4388 18.4008C28.4344 18.4052 28.43 18.4096 28.4256 18.414L16.8046 30.0209H52.01C53.1146 30.0209 54.01 30.9163 54.01 32.0209C54.01 33.1255 53.1146 34.0209 52.01 34.0209V34.0209Z"})}))));t.Z=c},86781:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,l.jsx)("path",{d:"M38.4276 48.4568C37.6464 49.239 36.3791 49.2398 35.5969 48.4585C34.8148 47.6773 34.814 46.41 35.5952 45.6278L47.2162 34.0209H12.01C10.9054 34.0209 10.01 33.1255 10.01 32.0209C10.01 30.9164 10.9054 30.0209 12.01 30.0209H47.1823L35.5952 18.4478C34.814 17.6657 34.8148 16.3984 35.5969 15.6171C36.3791 14.8359 37.6464 14.8367 38.4276 15.6188L53.45 30.6233C54.2312 31.403 54.2326 32.6683 53.4529 33.4495C53.452 33.4505 53.451 33.4515 53.45 33.4524L38.4276 48.4568Z"})}))));t.Z=c},24581:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.4142 47.4355C46.6328 48.2172 45.3658 48.2174 44.5841 47.4361C44.5839 47.4359 44.5837 47.4357 44.5835 47.4355L31.9835 34.8355L19.3951 47.4246C18.6093 48.2021 17.342 48.1953 16.5645 47.4095C15.7928 46.6296 15.7928 45.3738 16.5645 44.5939L29.1533 32.0052L16.5668 19.4187C15.7965 18.6258 15.8148 17.3587 16.6077 16.5884C17.3843 15.8339 18.6201 15.8338 19.3968 16.5882L31.9838 29.1746L44.5813 16.5772C45.3526 15.7853 46.6198 15.7687 47.4116 16.54C48.2034 17.3113 48.2201 18.5784 47.4488 19.3703C47.4365 19.3829 47.424 19.3954 47.4113 19.4078L34.8145 32.0052L47.4145 44.6052C48.196 45.3866 48.1961 46.6535 47.4147 47.435C47.4145 47.4352 47.4144 47.4353 47.4142 47.4355L47.4142 47.4355Z"})}))));t.Z=c},10196:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.7763 4.6595L51.5301 9.18284C51.811 10.8684 53.1318 12.1893 54.8173 12.4704L59.3408 13.2241C59.6737 13.2788 59.9347 13.5398 59.9894 13.8728C60.0598 14.3014 59.7694 14.706 59.3408 14.7764L54.8173 15.5304C53.1318 15.8114 51.811 17.1323 51.5301 18.8178L50.7763 23.3411C50.7217 23.6745 50.4604 23.9357 50.1271 23.9903C49.6985 24.0605 49.2941 23.7698 49.2239 23.3411L48.47 18.8178C48.1891 17.1322 46.8681 15.8113 45.1825 15.5304L40.6591 14.7764C40.3261 14.7217 40.0651 14.4607 40.0105 14.1277C39.9401 13.6991 40.2305 13.2945 40.6591 13.2241L45.1825 12.4704C46.8682 12.1895 48.1891 10.8685 48.47 9.18284L49.2239 4.6595C49.2784 4.32619 49.5397 4.06493 49.873 4.01037C50.3017 3.94019 50.7061 4.23082 50.7763 4.6595ZM29.5533 17.319L31.061 26.3654C31.6226 29.7364 34.2641 32.3781 37.635 32.9402L46.6816 34.4476C47.3476 34.557 47.8695 35.079 47.9789 35.7449C48.1197 36.6021 47.5389 37.4112 46.6816 37.552L37.635 39.06C34.2642 39.622 31.6227 42.2636 31.061 45.6346L29.5533 54.6809C29.4442 55.3475 28.9217 55.87 28.2551 55.9791C27.3978 56.1194 26.589 55.5382 26.4486 54.6809L24.941 45.6346C24.3791 42.2634 21.7373 39.6217 18.3661 39.06L9.31978 37.552C8.65385 37.4426 8.13187 36.9207 8.0225 36.2548C7.88171 35.3975 8.46252 34.5884 9.31978 34.4476L18.3661 32.9402C21.7374 32.3784 24.3792 29.7366 24.941 26.3654L26.4486 17.319C26.5578 16.6524 27.0803 16.1299 27.7468 16.0208C28.6042 15.8805 29.413 16.4617 29.5533 17.319Z"})}))));t.Z=c},14961:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,l.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,l.jsx)("path",{d:"M26 26.3302C26 24.6665 26.6609 23.0709 27.8373 21.8945C29.0138 20.7181 30.6093 20.0571 32.273 20.0571C33.9367 20.0571 35.5323 20.7181 36.7087 21.8945C37.8851 23.0709 38.546 24.6665 38.546 26.3302C38.546 27.9939 37.8851 29.5894 36.7087 30.7659C35.5323 31.9423 33.9367 32.6032 32.273 32.6032C30.6093 32.6032 29.0138 31.9423 27.8373 30.7659C26.6609 29.5894 26 27.9939 26 26.3302V26.3302Z",fill:"#1ABCFE"}),(0,l.jsx)("path",{d:"M13.454 38.8762C13.454 37.2125 14.1149 35.6169 15.2913 34.4405C16.4677 33.2641 18.0633 32.6032 19.727 32.6032H26V38.8762C26 40.5399 25.3391 42.1355 24.1627 43.3119C22.9863 44.4883 21.3907 45.1492 19.727 45.1492C18.0633 45.1492 16.4677 44.4883 15.2913 43.3119C14.1149 42.1355 13.454 40.5399 13.454 38.8762V38.8762Z",fill:"#0ACF83"}),(0,l.jsx)("path",{d:"M26 7.51112V20.0572H32.273C33.9367 20.0572 35.5323 19.3962 36.7087 18.2198C37.8851 17.0434 38.546 15.4478 38.546 13.7841C38.546 12.1204 37.8851 10.5249 36.7087 9.34844C35.5323 8.17202 33.9367 7.51112 32.273 7.51112H26Z",fill:"#FF7262"}),(0,l.jsx)("path",{d:"M13.454 13.7841C13.454 15.4478 14.1149 17.0434 15.2913 18.2198C16.4677 19.3962 18.0633 20.0571 19.727 20.0571H26V7.51109H19.727C18.0633 7.51109 16.4677 8.17199 15.2913 9.34841C14.1149 10.5248 13.454 12.1204 13.454 13.7841V13.7841Z",fill:"#F24E1E"}),(0,l.jsx)("path",{d:"M13.454 26.3302C13.454 27.9939 14.1149 29.5894 15.2913 30.7659C16.4677 31.9423 18.0633 32.6032 19.727 32.6032H26V20.0571H19.727C18.0633 20.0571 16.4677 20.7181 15.2913 21.8945C14.1149 23.0709 13.454 24.6665 13.454 26.3302V26.3302Z",fill:"#A259FF"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0",children:(0,l.jsx)("rect",{width:"25.0921",height:"37.6381",transform:"translate(13.454 7.51109)"})})}),(0,l.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,l.jsx)("path",{d:"M26 26.3302C26 24.6665 26.6609 23.0709 27.8373 21.8945C29.0138 20.7181 30.6093 20.0571 32.273 20.0571C33.9367 20.0571 35.5323 20.7181 36.7087 21.8945C37.8851 23.0709 38.546 24.6665 38.546 26.3302C38.546 27.9939 37.8851 29.5894 36.7087 30.7659C35.5323 31.9423 33.9367 32.6032 32.273 32.6032C30.6093 32.6032 29.0138 31.9423 27.8373 30.7659C26.6609 29.5894 26 27.9939 26 26.3302V26.3302Z",fill:"#1ABCFE"}),(0,l.jsx)("path",{d:"M13.454 38.8762C13.454 37.2125 14.1149 35.6169 15.2913 34.4405C16.4677 33.2641 18.0633 32.6032 19.727 32.6032H26V38.8762C26 40.5399 25.3391 42.1355 24.1627 43.3119C22.9863 44.4883 21.3907 45.1492 19.727 45.1492C18.0633 45.1492 16.4677 44.4883 15.2913 43.3119C14.1149 42.1355 13.454 40.5399 13.454 38.8762V38.8762Z",fill:"#0ACF83"}),(0,l.jsx)("path",{d:"M26 7.51112V20.0572H32.273C33.9367 20.0572 35.5323 19.3962 36.7087 18.2198C37.8851 17.0434 38.546 15.4478 38.546 13.7841C38.546 12.1204 37.8851 10.5249 36.7087 9.34844C35.5323 8.17202 33.9367 7.51112 32.273 7.51112H26Z",fill:"#FF7262"}),(0,l.jsx)("path",{d:"M13.454 13.7841C13.454 15.4478 14.1149 17.0434 15.2913 18.2198C16.4677 19.3962 18.0633 20.0571 19.727 20.0571H26V7.51109H19.727C18.0633 7.51109 16.4677 8.17199 15.2913 9.34841C14.1149 10.5248 13.454 12.1204 13.454 13.7841V13.7841Z",fill:"#F24E1E"}),(0,l.jsx)("path",{d:"M13.454 26.3302C13.454 27.9939 14.1149 29.5894 15.2913 30.7659C16.4677 31.9423 18.0633 32.6032 19.727 32.6032H26V20.0571H19.727C18.0633 20.0571 16.4677 20.7181 15.2913 21.8945C14.1149 23.0709 13.454 24.6665 13.454 26.3302V26.3302Z",fill:"#A259FF"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0",children:(0,l.jsx)("rect",{width:"25.0921",height:"37.6381",transform:"translate(13.454 7.51109)"})})})]}));t.Z=(0,o.forwardRef)(c)},8557:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 64 64"},e),{},{children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9989 24.7123H46.7682V10.2153H17.502V10.3515L31.9989 24.7123Z",fill:"#67DBFF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9997 24.7124H17.2305V39.2094H46.4967V39.0733L31.9997 24.7124Z",fill:"#01A3FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2305 39.1411H31.8636V53.7742L17.2305 39.1411Z",fill:"#0162FF"})]})}));t.Z=(0,o.forwardRef)(c)},26705:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,l.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5078 12.1148H36.494V39.8852H15.506L15.5078 12.1148Z",fill:"black",className:"ignore-fill"}),(0,l.jsx)("path",{d:"M11.312 11.0852H15.5078V40.9148H11.312V11.0852Z",fill:"#04FF8E"}),(0,l.jsx)("path",{d:"M36.4922 19.3148H40.688V40.9148H36.4922V19.3148Z",fill:"#8E2EFF"}),(0,l.jsx)("path",{d:"M11.312 39.8852H40.688V44H11.312V39.8852Z",fill:"#00C5FF"}),(0,l.jsx)("path",{d:"M11.312 8H28.0988V12.1148H11.312V8Z",fill:"#FFF152"}),(0,l.jsx)("path",{d:"M36.4922 16.2278V12.1148H32.2946V8H28.0988V20.3426H40.688V16.2278",fill:"#FF5B5B"}),(0,l.jsx)("path",{d:"M36.4922 24.4574V20.3426H40.688",fill:"#551C99"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.0988 8V12.1148H23.9012",fill:"#999131"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0",children:(0,l.jsx)("rect",{width:"36",height:"36",transform:"translate(8 8)"})})})]}))));t.Z=c},74813:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.75C9.41015 9.75 6.5 12.6601 6.5 16.25V35.75C6.5 39.3399 9.41015 42.25 13 42.25H39C42.5899 42.25 45.5 39.3399 45.5 35.75V16.25C45.5 12.6601 42.5899 9.75 39 9.75H13ZM13 13C11.2051 13 9.75 14.4551 9.75 16.25V35.75L14.7982 30.7018C15.6371 29.8629 16.9582 29.7499 17.9274 30.434L22.8959 33.9412C23.0488 34.0491 23.2555 34.0387 23.3967 33.9159L30.7845 27.4917C31.7507 26.6516 33.2022 26.7022 34.1075 27.6075L42.25 35.75V16.25C42.25 14.4551 40.7949 13 39 13H13ZM17.875 24.375C19.6699 24.375 21.125 22.9199 21.125 21.125C21.125 19.3301 19.6699 17.875 17.875 17.875C16.0801 17.875 14.625 19.3301 14.625 21.125C14.625 22.9199 16.0801 24.375 17.875 24.375Z"})}));t.Z=(0,o.forwardRef)(c)},97297:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsxs)(i.Z,{ref:t,style:s({width:52,height:52},e.style),viewBox:"0 0 52 52",children:[(0,l.jsx)("path",{d:"M25.9193 6C25.2852 6.00028 24.6631 6.17291 24.1196 6.49944C23.5761 6.82596 23.1315 7.2941 22.8335 7.85377C22.5355 8.41344 22.3952 9.04359 22.4277 9.67683C22.4602 10.3101 22.6642 10.9226 23.0179 11.4488L24.5118 9.95703C24.4624 9.80821 24.4375 9.65238 24.438 9.49559C24.438 9.20387 24.5245 8.91871 24.6866 8.67616C24.8487 8.43361 25.079 8.24456 25.3485 8.13293C25.618 8.02129 25.9146 7.99209 26.2007 8.049C26.4868 8.10591 26.7496 8.24638 26.9559 8.45265C27.1622 8.65893 27.3026 8.92173 27.3595 9.20784C27.4165 9.49395 27.3872 9.79051 27.2756 10.06C27.164 10.3295 26.9749 10.5599 26.7324 10.7219C26.4898 10.884 26.2047 10.9705 25.913 10.9705C25.7569 10.9709 25.6018 10.946 25.4536 10.8968L23.9618 12.3886C24.4146 12.6956 24.9331 12.8921 25.4756 12.9623C26.0182 13.0325 26.5696 12.9743 27.0856 12.7925C27.6015 12.6107 28.0676 12.3104 28.4464 11.9156C28.8251 11.5208 29.1059 11.0427 29.2661 10.5196C29.4264 9.99658 29.4617 9.44321 29.3691 8.90404C29.2765 8.36487 29.0587 7.85496 28.7331 7.41532C28.4076 6.97568 27.9834 6.61859 27.4946 6.37277C27.0059 6.12696 26.4663 5.99928 25.9193 6V6Z",fill:"#34A853"}),(0,l.jsx)("path",{d:"M24.5286 16.1874C24.5309 15.0066 24.1485 13.8572 23.4393 12.9131L21.5008 14.8495C21.7956 15.3886 21.9034 16.0103 21.8073 16.6172C21.7112 17.2241 21.4167 17.7821 20.9698 18.2039L22.0234 20.7787C22.7916 20.2839 23.4234 19.6044 23.8611 18.8023C24.2988 18.0002 24.5283 17.1012 24.5286 16.1874V16.1874Z",fill:"#FBBC04"}),(0,l.jsx)("path",{d:"M19.1114 18.9667H19.0609C18.6274 18.9667 18.2 18.8654 17.8126 18.6709C17.4253 18.4765 17.0887 18.1941 16.8299 17.8465C16.571 17.4989 16.397 17.0955 16.3216 16.6687C16.2463 16.2419 16.2718 15.8033 16.3961 15.3881C16.5203 14.9728 16.7399 14.5924 17.0373 14.2771C17.3347 13.9617 17.7016 13.7203 18.1089 13.572C18.5162 13.4237 18.9524 13.3726 19.383 13.4228C19.8135 13.473 20.2263 13.6232 20.5885 13.8613L22.508 11.9418C21.8286 11.391 21.0271 11.0113 20.1706 10.8346C19.3141 10.6578 18.4276 10.6892 17.5858 10.926C16.7439 11.1629 15.9712 11.5983 15.3325 12.1957C14.6937 12.7931 14.2077 13.535 13.9151 14.3592C13.6226 15.1833 13.5321 16.0657 13.6512 16.932C13.7704 17.7984 14.0957 18.6236 14.5998 19.3382C15.104 20.0528 15.7722 20.636 16.5485 21.0388C17.3247 21.4417 18.1863 21.6523 19.0609 21.6531C19.4316 21.6533 19.8015 21.6166 20.165 21.5436L19.1114 18.9667Z",fill:"#EA4335"}),(0,l.jsx)("path",{d:"M25.993 21.1939C24.7798 21.1927 23.573 21.3694 22.4111 21.7185L23.9471 25.4712C24.6157 25.3055 25.3021 25.222 25.9909 25.2225C27.9266 25.2231 29.8022 25.8948 31.2982 27.1232C32.7941 28.3515 33.8179 30.0606 34.1951 31.9591C34.5723 33.8577 34.2796 35.8283 33.3668 37.5352C32.454 39.2422 30.9776 40.5798 29.1892 41.3203C27.4007 42.0607 25.4109 42.1582 23.5586 41.5961C21.7064 41.0339 20.1063 39.847 19.0311 38.2374C17.9558 36.6279 17.4719 34.6953 17.6618 32.769C17.8516 30.8426 18.7035 29.0417 20.0722 27.673C20.6612 27.0859 21.3336 26.5889 22.0676 26.1981L20.5484 22.456C17.8131 23.7956 15.6662 26.0949 14.5169 28.9155C13.3677 31.7362 13.2964 34.8811 14.3166 37.7509C15.3368 40.6208 17.3773 43.0149 20.0491 44.4771C22.721 45.9394 25.8374 46.3675 28.8046 45.6798C31.7718 44.9922 34.3822 43.2369 36.1385 40.7484C37.8948 38.26 38.6741 35.2124 38.328 32.1863C37.9818 29.1602 36.5344 26.3673 34.2616 24.3397C31.9888 22.3121 29.0494 21.1916 26.0036 21.1918L25.993 21.1939Z",fill:"#4285F4"})]})));t.Z=c},57903:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 64 64"},e),{},{children:(0,l.jsx)("path",{fill:"#FFD02F",d:"M41.4004 11.0771H35.3089L40.7168 19.4583L29.284 11.0771H23.1925L28.6004 22.0594L17.1676 11.0771H11.0762L16.3949 25.2549L11.0762 52.9233H17.1676L28.6004 23.2565L23.1925 52.9233H29.284L40.7168 20.6566L35.3089 52.9233H41.4004L52.9223 17.4789L41.4004 11.0771Z"})}));t.Z=(0,o.forwardRef)(c)},24978:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 16.25C6.5 12.6601 9.41015 9.75 13 9.75H39C42.5899 9.75 45.5 12.6601 45.5 16.25V35.75C45.5 39.3399 42.5899 42.25 39 42.25H13C9.41015 42.25 6.5 39.3399 6.5 35.75V16.25ZM9.75 16.25C9.75 14.4551 11.2051 13 13 13H23.5625C24.0112 13 24.375 13.3638 24.375 13.8125V18.6875C24.375 19.1362 24.0112 19.5 23.5625 19.5H10.5625C10.1138 19.5 9.75 19.1362 9.75 18.6875V16.25ZM10.5625 22.75C10.1138 22.75 9.75 23.1138 9.75 23.5625V28.4375C9.75 28.8862 10.1138 29.25 10.5625 29.25H23.5625C24.0112 29.25 24.375 28.8862 24.375 28.4375V23.5625C24.375 23.1138 24.0112 22.75 23.5625 22.75H10.5625ZM9.75 33.3125C9.75 32.8638 10.1138 32.5 10.5625 32.5H23.5625C24.0112 32.5 24.375 32.8638 24.375 33.3125V38.1875C24.375 38.6362 24.0112 39 23.5625 39H13C11.2051 39 9.75 37.5449 9.75 35.75V33.3125ZM28.4375 13C27.9888 13 27.625 13.3638 27.625 13.8125V18.6875C27.625 19.1362 27.9888 19.5 28.4375 19.5H41.4375C41.8862 19.5 42.25 19.1362 42.25 18.6875V16.25C42.25 14.4551 40.7949 13 39 13H28.4375ZM27.625 23.5625C27.625 23.1138 27.9888 22.75 28.4375 22.75H41.4375C41.8862 22.75 42.25 23.1138 42.25 23.5625V28.4375C42.25 28.8862 41.8862 29.25 41.4375 29.25H28.4375C27.9888 29.25 27.625 28.8862 27.625 28.4375V23.5625ZM28.4375 32.5C27.9888 32.5 27.625 32.8638 27.625 33.3125V38.1875C27.625 38.6362 27.9888 39 28.4375 39H39C40.7949 39 42.25 37.5449 42.25 35.75V33.3125C42.25 32.8638 41.8862 32.5 41.4375 32.5H28.4375Z"})}));t.Z=(0,o.forwardRef)(c)},62090:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,l.jsx)("path",{d:"M6.9715 39C7.80261 39 8.54248 38.4735 8.81484 37.6883L10.6992 32.2557C10.7276 32.174 10.8046 32.1191 10.8911 32.1191H20.758C20.8447 32.1191 20.9218 32.1741 20.9501 32.256L22.8235 37.686C23.0948 38.4723 23.835 39 24.6668 39C26.0173 39 26.9589 37.6605 26.5016 36.3898L18.8518 15.1323C18.3914 13.853 17.178 13 15.8184 13C14.4588 13 13.2453 13.853 12.7849 15.1323L5.13567 36.3883C4.67814 37.6597 5.62027 39 6.9715 39ZM12.1743 28.8184C12.0347 28.8184 11.9367 28.6808 11.9823 28.5489L15.69 17.8186C15.7098 17.7612 15.7639 17.7227 15.8247 17.7227C15.8855 17.7227 15.9396 17.7612 15.9594 17.8186L19.6671 28.5489C19.7127 28.6808 19.6147 28.8184 19.4752 28.8184H12.1743Z"}),(0,l.jsx)("path",{d:"M36.5657 39.4316C39.7903 39.4316 41.6057 37.7939 42.3293 36.334H42.4817V37.1465C42.4817 38.1702 43.3115 39 44.3352 39C45.3589 39 46.1887 38.1702 46.1887 37.1465V26.0508C46.1887 20.376 41.72 19.2461 38.6223 19.2461C35.7821 19.2461 33.1227 20.1669 31.5309 22.3792C30.8836 23.2788 31.5244 24.4392 32.6051 24.6854C33.4902 24.887 34.3631 24.3759 34.9919 23.7212C35.7675 22.9135 36.9681 22.3184 38.6731 22.3184C41.1233 22.3184 42.3801 23.6006 42.3801 25.8096V25.8984C42.3801 27.2822 40.9582 27.2568 37.4543 27.6631C33.76 28.0947 29.9768 29.0596 29.9768 33.4902C29.9768 37.3242 32.8586 39.4316 36.5657 39.4316ZM37.3909 36.3848C35.2454 36.3848 33.6965 35.4199 33.6965 33.541C33.6965 31.5098 35.4993 30.7861 37.6956 30.4941C38.927 30.3291 41.8469 29.999 42.3928 29.4531V31.9668C42.3928 34.2773 40.552 36.3848 37.3909 36.3848Z"})]}));t.Z=(0,o.forwardRef)(c)},11209:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{fill:"#1D9BF0",d:"M18.8791517,43 C34.3505402,43 42.8163265,30.3001969 42.8163265,19.3056102 C42.8163265,18.9483268 42.8163265,18.5910433 42.79992,18.2337598 C44.4405762,17.0644685 45.8679472,15.5866142 47,13.913878 C45.4905962,14.5797244 43.8663465,15.0182087 42.160064,15.2293307 C43.8991597,14.2062008 45.2280912,12.5659449 45.8679472,10.617126 C44.2436975,11.5752953 42.4389756,12.2573819 40.5194078,12.6309055 C38.9771909,11.0068898 36.795118,10 34.3833533,10 C29.7402961,10 25.9667867,13.7352362 25.9667867,18.3312008 C25.9667867,18.9808071 26.0488195,19.6141732 26.180072,20.2312992 C19.1908764,19.8902559 12.9891957,16.5610236 8.83833533,11.5265748 C8.11644658,12.7608268 7.70628251,14.1899606 7.70628251,15.7165354 C7.70628251,18.6072835 9.19927971,21.1569882 11.4469788,22.6510827 C10.0688275,22.6023622 8.77270908,22.2288386 7.64065626,21.6117126 C7.64065626,21.6441929 7.64065626,21.6766732 7.64065626,21.7253937 C7.64065626,25.7529528 10.5446178,29.1309055 14.3837535,29.8941929 C13.6782713,30.0890748 12.939976,30.1865157 12.1688675,30.1865157 C11.627451,30.1865157 11.102441,30.1377953 10.5938375,30.0403543 C11.6602641,33.3533465 14.777511,35.7568898 18.452581,35.8218504 C15.565026,38.0629921 11.9391757,39.394685 8.00160064,39.394685 C7.32893157,39.394685 6.65626251,39.3622047 6,39.2810039 C9.70788315,41.6195866 14.1376551,43 18.8791517,43"})})}))));t.Z=c},70777:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(0,o.forwardRef)(((e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,l.jsx)("path",{d:"M29.6 56.0004C29.6 57.3259 30.6745 58.4004 32 58.4004C33.3255 58.4004 34.4 57.3259 34.4 56.0004L34.4 28.1945L42.3029 36.0974C43.2402 37.0347 44.7598 37.0347 45.6971 36.0974C46.6343 35.1602 46.6343 33.6406 45.6971 32.7033L33.6971 20.7033C32.7598 19.7661 31.2402 19.7661 30.3029 20.7033L18.3029 32.7033C17.3657 33.6406 17.3657 35.1602 18.3029 36.0974C19.2402 37.0347 20.7598 37.0347 21.6971 36.0974L29.6 28.1945L29.6 56.0004Z"}),(0,l.jsx)("path",{d:"M53.6 10.4004C54.9255 10.4004 56 9.32588 56 8.00039C56 6.67491 54.9255 5.60039 53.6 5.60039L10.4 5.60039C9.07452 5.60039 8 6.67491 8 8.00039C8 9.32587 9.07452 10.4004 10.4 10.4004L53.6 10.4004Z"})]}))));t.Z=c},36902:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsx)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 13C6.5 10.3076 8.68261 8.125 11.375 8.125H40.625C43.3174 8.125 45.5 10.3076 45.5 13V39C45.5 41.6924 43.3174 43.875 40.625 43.875H11.375C8.68261 43.875 6.5 41.6924 6.5 39V13ZM9.75 13C9.75 12.1025 10.4775 11.375 11.375 11.375H13C13.8975 11.375 14.625 12.1025 14.625 13V14.625C14.625 15.5225 13.8975 16.25 13 16.25H11.375C10.4775 16.25 9.75 15.5225 9.75 14.625V13ZM39 11.375C38.1025 11.375 37.375 12.1025 37.375 13V14.625C37.375 15.5225 38.1025 16.25 39 16.25H40.625C41.5225 16.25 42.25 15.5225 42.25 14.625V13C42.25 12.1025 41.5225 11.375 40.625 11.375H39ZM9.75 21.125C9.75 20.2275 10.4775 19.5 11.375 19.5H13C13.8975 19.5 14.625 20.2275 14.625 21.125V22.75C14.625 23.6475 13.8975 24.375 13 24.375H11.375C10.4775 24.375 9.75 23.6475 9.75 22.75V21.125ZM39 19.5C38.1025 19.5 37.375 20.2275 37.375 21.125V22.75C37.375 23.6475 38.1025 24.375 39 24.375H40.625C41.5225 24.375 42.25 23.6475 42.25 22.75V21.125C42.25 20.2275 41.5225 19.5 40.625 19.5H39ZM9.75 29.25C9.75 28.3525 10.4775 27.625 11.375 27.625H13C13.8975 27.625 14.625 28.3525 14.625 29.25V30.875C14.625 31.7725 13.8975 32.5 13 32.5H11.375C10.4775 32.5 9.75 31.7725 9.75 30.875V29.25ZM39 27.625C38.1025 27.625 37.375 28.3525 37.375 29.25V30.875C37.375 31.7725 38.1025 32.5 39 32.5H40.625C41.5225 32.5 42.25 31.7725 42.25 30.875V29.25C42.25 28.3525 41.5225 27.625 40.625 27.625H39ZM9.75 37.375C9.75 36.4775 10.4775 35.75 11.375 35.75H13C13.8975 35.75 14.625 36.4775 14.625 37.375V39C14.625 39.8975 13.8975 40.625 13 40.625H11.375C10.4775 40.625 9.75 39.8975 9.75 39V37.375ZM39 35.75C38.1025 35.75 37.375 36.4775 37.375 37.375V39C37.375 39.8975 38.1025 40.625 39 40.625H40.625C41.5225 40.625 42.25 39.8975 42.25 39V37.375C42.25 36.4775 41.5225 35.75 40.625 35.75H39ZM17.875 13C17.875 12.1025 18.6025 11.375 19.5 11.375H32.5C33.3975 11.375 34.125 12.1025 34.125 13V22.75C34.125 23.6475 33.3975 24.375 32.5 24.375H19.5C18.6025 24.375 17.875 23.6475 17.875 22.75V13ZM19.5 27.625C18.6025 27.625 17.875 28.3525 17.875 29.25V39C17.875 39.8975 18.6025 40.625 19.5 40.625H32.5C33.3975 40.625 34.125 39.8975 34.125 39V29.25C34.125 28.3525 33.3975 27.625 32.5 27.625H19.5Z"})}));t.Z=(0,o.forwardRef)(c)},50591:function(e,t,n){"use strict";var r=n(59499),o=n(67294),i=n(24306),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c=(e,t)=>(0,l.jsxs)(i.Z,s(s({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,l.jsx)("path",{d:"M15.3697 29.7344C13.4659 31.6382 13.4659 34.7249 15.3697 36.6287C17.2736 38.5325 20.3602 38.5325 22.264 36.6287L27.4348 31.458C29.3386 29.5542 29.3386 26.4675 27.4348 24.5637C26.8002 23.9291 26.8002 22.9002 27.4348 22.2656C28.0694 21.631 29.0983 21.631 29.7329 22.2656C32.9059 25.4386 32.9059 30.5831 29.7329 33.7561L24.5621 38.9268C21.3891 42.0998 16.2447 42.0998 13.0717 38.9268C9.89864 35.7538 9.89864 30.6093 13.0717 27.4363L14.7952 25.7128C15.4298 25.0782 16.4587 25.0782 17.0933 25.7128C17.7279 26.3474 17.7279 27.3763 17.0933 28.0109L15.3697 29.7344Z"}),(0,l.jsx)("path",{d:"M36.6271 22.2656C38.531 20.3618 38.531 17.2751 36.6271 15.3713C34.7233 13.4675 31.6367 13.4675 29.7329 15.3713L24.5621 20.542C22.6583 22.4459 22.6583 25.5325 24.5621 27.4363C25.1967 28.0709 25.1967 29.0998 24.5621 29.7344C23.9275 30.369 22.8986 30.369 22.264 29.7344C19.091 26.5614 19.091 21.417 22.264 18.2439L27.4348 13.0732C30.6078 9.90022 35.7522 9.90022 38.9252 13.0732C42.0983 16.2462 42.0983 21.3907 38.9252 24.5637L37.2017 26.2873C36.5671 26.9219 35.5382 26.9219 34.9036 26.2873C34.269 25.6527 34.269 24.6238 34.9036 23.9892L36.6271 22.2656Z"})]}));t.Z=(0,o.forwardRef)(c)},63553:function(e,t,n){"use strict";let r;n.d(t,{y:function(){return r}}),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT"}(r||(r={}))},20543:function(e,t,n){"use strict";n.d(t,{r:function(){return g},Z:function(){return b}});var r=n(59499),o=n(64310),i=n(62830),l=n.n(i),a=n(68652),s=n(16406),c=n(50576);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class p{constructor(e){(0,r.Z)(this,"row",void 0),(0,r.Z)(this,"id",void 0),this.row=e,this.id=e.rowId}addTile(e){if(this.row.tiles.length>=8)throw new Error("Cannot exceed the maximum number of tiles per row, 8");this.row.tiles.push(e)}updateRelativeHeight(e){this.row.relativeHeight=e}removeTile(e){this.row.tiles=this.row.tiles.filter((t=>t.tileId!==e))}getDistributedRelativeWidth(){return 1/this.row.tiles.length}distributeTileWidthsEvenly(){const e=this.getDistributedRelativeWidth();this.row.tiles.map((t=>(t.relativeWidth=e,t)))}replaceTile(e,t){const n=this.tileById(e);if(!n)return!1;const r=u(u({},n),{},{tileId:t});return this.removeTile(e),this.addTile(r),!0}tileById(e){return this.tiles.find((t=>t.tileId===e))}tileIndex(e){return this.tiles.findIndex((t=>t.tileId===e))}get tiles(){return(0,s.Z)(this.row.tiles,"order")}get order(){return this.row.order}canAddMoreTiles(){return this.tiles.length<8}isSingleTile(){return 1===this.tiles.length}isEmpty(){return 0===this.tiles.length}numTiles(){return this.tiles.length}relativeWidthSum(){return this.tiles.reduce(((e,t)=>e+t.relativeWidth),0)}}var f=n(63553),h=n(18036);let g;function m(e,t){if(e>t.length)throw new Error(`${e} exceeds current number of elements.`);return((0===e?0:t[e-1].order)+(e===t.length?t[t.length-1].order+2:t[e].order))/2}!function(e){e[e.NEW_ROW=0]="NEW_ROW",e[e.EXISTING_ROW=1]="EXISTING_ROW",e[e.END=2]="END"}(g||(g={}));class b{constructor(e,t){(0,r.Z)(this,"layout",void 0),(0,r.Z)(this,"tileTypes",void 0),this.layout=JSON.parse(JSON.stringify(e)),this.tileTypes=t}getLayout(){return(0,a.Z)(this.layout)}rowByTileId(e){return this.rows.find((t=>t.tiles.find((t=>t.tileId===e))))}removeRow(e){if(1===this.layout.rows.length)throw new Error("Cannot delete the only row on a Page.");this.layout.rows=this.layout.rows.filter((t=>t.rowId!==e))}rowById(e){return this.rows.find((t=>t.id===e))}rowIndex(e){return this.rows.findIndex((t=>t.id===e))}get rows(){return(0,s.Z)(this.layout.rows,"order").map((e=>new p(e)))}get allTileIds(){return this.tiles.map((e=>e.tileId)).sort(((e,t)=>e.localeCompare(t,"en")))}get firstRow(){return this.rows[0]}get lastRow(){return this.rows[this.rows.length-1]}get numRows(){return this.rows.length}get tiles(){return this.rows.flatMap((e=>e.tiles))}addTileToExistingRowInternal(e,t,n,r,o){const i={tileId:e,order:m(r,n.tiles),relativeWidth:1};return this.tileTypes.set(e,t),n.addTile(i),n.distributeTileWidthsEvenly(),o!==h.lz&&(n.row.relativeHeight=o),i}addTileToNewRow(e,t,n,r,o){const i=l()(),a=[{tileId:e,order:1,relativeWidth:1}],s=m(r,this.rows),c=(0,h._f)(t,n,o);return this.tileTypes.set(e,n),this.addRow(i,s,c,a),a[0]}addTileToExistingRow(e,t,n,r,o,i){const l=this.rowById(r);if(void 0===l)throw new Error(`${r} not found.`);const a=l.tiles;if(o>a.length)throw new Error(`Tile index ${o} is larger than the number of tiles.`);if(l.canAddMoreTiles()){const a=(0,h.eD)(r,t,i);return this.addTileToExistingRowInternal(e,n,l,o,a)}const s=this.rows.findIndex((e=>l.id===e.id));if(o===a.length)return this.addTileToNewRow(e,t,n,s+1,i);const c=a[a.length-1];this.addTileToNewRow(c.tileId,{kind:h.DV.ROW,rowId:r},this.tileTypes.get(c.tileId),s+1,i),l.removeTile(c.tileId);const d=(0,h.eD)(r,t,i);return this.addTileToExistingRowInternal(e,n,l,o,d)}addTileToEndOfPage(e,t,n,r){return this.addTileToExistingRow(e,t,n,this.lastRow.id,this.lastRow.tiles.length,r)}findNoopDropzones(e){if(!e)return{horizontal:[],vertical:[]};const t=this.rowByTileId(e);if(void 0===t)throw new Error(`Unable to find tile with id: ${e}`);const n=this.rows.findIndex((e=>e.id===t.id)),r=t.tiles.findIndex((t=>t.tileId===e)),o=[{rowIdx:n,indices:[r,r+1]}];let i=[];if(t.isSingleTile()){i=[n,n+1];const e=n-1;if(e>=0&&!this.rows[e].isSingleTile()){const t=this.rows[e].numTiles();o.push({rowIdx:e,indices:[t]})}}return{horizontal:i,vertical:o}}previousTileInRow(e,t){const n=this.rowById(t);if(void 0===n)throw new Error(`Row not found in layout ${t}`);const r=n.tileIndex(e);if(0===r)throw new Error(`Previous neighbor in row for tile ${e} not found`);return n.tiles[r-1]}tileNeighborByDirection(e,t,n){var r,i;const l=this.rowByTileId(e);if(!l)return o.v.addError(new Error(`Could not find tile neighbor by direction as row was not found for tileId: ${e}`)),{tileId:null,lastIntentionalColumnIdx:n};const a=this.rowIndex(l.id),s=this.rows[a-1],c=this.rows[a+1],d=l.tileIndex(e);let u=n,p=null;switch(t){case f.y.LEFT:if(0===d)break;u=d-1,p=null===(r=l.tiles[u])||void 0===r?void 0:r.tileId;break;case f.y.RIGHT:if(d===l.tiles.length-1)break;u=d+1,p=null===(i=l.tiles[u])||void 0===i?void 0:i.tileId;break;case f.y.UP:var h,g,m;if(s)l.numTiles()>1&&(u=d),p=(null===s||void 0===s||null===(h=s.tiles[n||d])||void 0===h?void 0:h.tileId)||(null===s||void 0===s||null===(g=s.tiles[d])||void 0===g?void 0:g.tileId)||(null===s||void 0===s||null===(m=s.tiles[0])||void 0===m?void 0:m.tileId);break;case f.y.DOWN:var b,y,v;if(c)l.numTiles()>1&&(u=d),p=(null===c||void 0===c||null===(b=c.tiles[n||d])||void 0===b?void 0:b.tileId)||(null===c||void 0===c||null===(y=c.tiles[d])||void 0===y?void 0:y.tileId)||(null===c||void 0===c||null===(v=c.tiles[0])||void 0===v?void 0:v.tileId)}return{tileId:p,lastIntentionalColumnIdx:u}}moveTile(e,t,n){const r=this.rowByTileId(e);if(void 0===r)throw new Error(`Unable to find tile with id: ${e}`);const o=r.tileById(e);if(!o)return;const i={kind:h.DV.ROW,rowId:r.id},l=this.tileTypes.get(e);switch(t.kind){case g.NEW_ROW:this.addTileToNewRow(e,i,l,t.newRowIdx,n);break;case g.EXISTING_ROW:if(r.id===t.rowId){const e=m(t.newTileIdx,r.tiles);return void(o.order=e)}this.addTileToExistingRow(e,i,l,t.rowId,t.newTileIdx,n);break;case g.END:throw new Error("Moving a tile to the end not supported.")}const a="placeholder";o.tileId=a,this.deleteTile(a,n),r.distributeTileWidthsEvenly()}addRow(e,t,n,r){this.layout.rows.push({rowId:e,order:t,relativeHeight:n,tiles:r})}deleteTile(e,t){const n=this.rowByTileId(e);if(!n)throw new Error(`Tile ${e} is not associated with a row.`);const r=(0,h.Dq)(n.id,e,n.tiles.map((e=>e.tileId)),t,this.tileTypes.get.bind(this.tileTypes));n.row.relativeHeight=r,n.removeTile(e),n.isEmpty()&&this.removeRow(n.id)}isSingleTile(e){const t=this.rowByTileId(e);return!!t&&t.isSingleTile()}getTileTypesForRow(e){return this.rowById(e).tiles.map((e=>e.tileId)).map((e=>this.tileTypes.get(e)))}isEquivalentTo(e){return(0,c.Z)(this.layout,null===e||void 0===e?void 0:e.layout)&&(0,c.Z)(this.tileTypes,null===e||void 0===e?void 0:e.tileTypes)}static copyFrom(e){return new b(e.layout,e.tileTypes)}static fromPage(e){return b.fromLayout(e.layout,new Map)}static fromLayout(e,t){return new b(e,t)}}},18036:function(e,t,n){"use strict";n.d(t,{DV:function(){return i},Dq:function(){return a},_f:function(){return s},eD:function(){return c},lz:function(){return l},nA:function(){return d},tn:function(){return u}});var r=n(67156),o=n(90370);let i;!function(e){e.NEW_TILE="NEW_TILE",e.ROW="ROW"}(i||(i={}));const l="NO_CHANGE";function a(e,t,n,i,l){return n.filter((e=>e!==t)).map((e=>l(e))).every((e=>(0,o.g)(e)===o.Y.FIXED))?null:i(e)/r.Cj}function s(e,t,n){switch(e.kind){case i.NEW_TILE:return function(e){switch((0,o.g)(e)){case o.Y.FIXED:return null;case o.Y.SCALABLE:return 1}}(t);case i.ROW:switch((0,o.g)(t)){case o.Y.FIXED:return null;case o.Y.SCALABLE:return n(e.rowId)/r.Cj}}}function c(e,t,n){switch(t.kind){case i.NEW_TILE:return l;case i.ROW:return Math.max(n(t.rowId),n(e))/r.Cj}}function d(e,t){const n=[...e];n.push(r.Rv),void 0!==t&&n.push(t);return Math.ceil(Math.max(...n))}function u(e,t,n){const o=d(t,n);if("number"!==typeof e)return o;const i=e*r.Cj;return Math.ceil(Math.max(o,i))}},90370:function(e,t,n){"use strict";n.d(t,{Y:function(){return o},g:function(){return i}});var r=n(51718);let o;function i(e){return[r.YUT.Text,r.YUT.TextSlate,r.YUT.Table,r.YUT.Twitter,r.YUT.Code].includes(e)?o.FIXED:o.SCALABLE}!function(e){e.FIXED="FIXED",e.SCALABLE="SCALABLE"}(o||(o={}))},78374:function(e,t,n){"use strict";n.d(t,{GS:function(){return c},LY:function(){return d},M9:function(){return i},MJ:function(){return s},fz:function(){return o},lk:function(){return a},sA:function(){return l}});var r=n(4480);const o=(0,r.xu)({key:"dragIndicator",default:!1}),i=(0,r.cn)({key:"activeDropzone",default:null}),l=(0,r.cn)({key:"moveTileDragInProgress",default:null}),a=(0,r.cn)({key:"rowResizeInProgress",default:!1}),s=(0,r.cn)({key:"tileResizeInProgress",default:!1}),c=(0,r.cn)({key:"fileDragInProgress",default:!1}),d=(0,r.cn)({key:"tileDragData",default:null})},44588:function(e,t,n){"use strict";var r=n(13433),o=n(4480),i=n(60864),l=n(78374);t.Z=()=>{const e=(0,r.l)(i.bT),t=(0,o.sJ)(l.sA),n=(0,o.sJ)(l.GS);return e||t||n}},95483:function(e,t,n){"use strict";n.d(t,{U:function(){return i},l:function(){return o}});var r=n(4480);const o=1e3,i=(0,r.cn)({key:"textSelectionCountState",default:{chars:0,words:0}})},38938:function(e,t,n){"use strict";n.d(t,{qT:function(){return d},zg:function(){return u}});var r=n(99747),o=n(52027),i=n(77493),l=n(64487),a=n(69029);const s=(e,t,n)=>{if(n>e.length)return 0;const r=(new o.diff_match_patch).diff_main(e,t);let i=n,l=0;for(const a of r)if(a[0]===o.DIFF_DELETE?(i-=Math.min(a[1].length,n-l),l+=a[1].length):a[0]===o.DIFF_INSERT?i+=a[1].length:l+=a[1].length,l>=n)break;return i},c=(e,t)=>{if(!t)return{nearestAncestorId:void 0,pathFromAncestorToChild:[],childText:void 0};let n;const o=[];let i;const l=t.path,a=(0,r.MkB)(e,l);if(a){(0,r.GsE)(a)&&(i=a.text);const t=[...l];for(n=a.id;!n&&(0,r.MkB)(e,t)&&t.length;){var s;const i=t.pop();void 0!==i&&o.push(i),n=null===(s=(0,r.MkB)(e,t))||void 0===s?void 0:s.id}o.reverse()}return{nearestAncestorId:n,pathFromAncestorToChild:o,childText:i}},d=function(e){var t,n,o,d,u;let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const f=[...e.children],h=e.selection&&i.e6.isBackward(e.selection)?null===(t=e.selection)||void 0===t?void 0:t.focus:null===(n=e.selection)||void 0===n?void 0:n.anchor,g=e.selection&&i.e6.isBackward(e.selection)?null===(o=e.selection)||void 0===o?void 0:o.anchor:null===(d=e.selection)||void 0===d?void 0:d.focus;let m=0;h&&g&&i.y$.equals(h.path,g.path)&&(m=Math.abs(h.offset-g.offset));const{nearestAncestorId:b,pathFromAncestorToChild:y,childText:v}=c(e,null===(u=e.selection)||void 0===u?void 0:u.anchor);if(f.forEach((t=>e.apply({type:"remove_node",path:[0],node:t}))),p.nodes){(i.NB.isNode(p.nodes)?[p.nodes]:p.nodes).forEach(((t,n)=>e.apply({type:"insert_node",path:[n],node:t})))}l.n_({category:"slate",message:"Reset nodes",level:"info",data:{editor_content:(0,a.fR)(e.children)}});const w=()=>{try{h&&g&&(h.offset=Math.min((0,r.ZJ1)(e,h.path).offset,h.offset),g.offset=Math.min((0,r.ZJ1)(e,h.path).offset,h.offset),(0,r.Ys)(e,{anchor:h,focus:g}))}catch(t){const n=(0,r.ZJ1)(e,[]);n&&(0,r.Ys)(e,n)}};if(h&&b){const t=(0,r.DYv)(e,{at:[],match:{id:b}});if(!t)return void w();const n=(0,r.MkB)(e,[...t[1],...y]);let o=h.offset,i=o;n&&(0,r.GsE)(n)&&v&&(o=s(v,n.text,h.offset),i=Math.min(o+m,n.text.length));try{const n=[...t[1],...y],l=(0,r.ZJ1)(e,n),a={anchor:{path:n,offset:Math.min(l.offset,o)},focus:{path:n,offset:Math.min(l.offset,i)}};(0,r.Ys)(e,a)}catch(x){w()}}else w()},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[...e.children];if(n.forEach((t=>e.apply({type:"remove_node",path:[0],node:t}))),t.nodes){(i.NB.isNode(t.nodes)?[t.nodes]:t.nodes).forEach(((t,n)=>e.apply({type:"insert_node",path:[n],node:t})))}}},5472:function(e,t,n){"use strict";n.d(t,{r9:function(){return x},GB:function(){return j},EA:function(){return T},vV:function(){return P},Sp:function(){return C},gD:function(){return w},bJ:function(){return O},ZP:function(){return I}});var r=n(59499),o=n(67294),i=n(4480),l=n(52260),a=n(60864),s=n(12459),c=n(87495),d=n(9309),u=n(96391),p=n(59016),f=n(85893);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=p.ZP.span.withConfig({displayName:"Mention__StyledMention",componentId:"sc-1ykdwov-0"})(["user-select:all;box-shadow:none;border-radius:4px;padding:0.03em 0.1em 0.1em 0.1em;background-color:",";"],(e=>e.isSelected?e.theme.colors.mentionSelectedBackground:e.theme.colors.mentionBackground));var b=e=>{let{attributes:t,element:n,children:r}=e;const{value:o}=n;return(0,f.jsxs)(m,g(g({"data-testid":"mention_node"},t),{},{contentEditable:!1,isSelected:(0,u.vt)(),children:[o,r]}))};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=e=>{let{attributes:t,children:n}=e;return(0,f.jsx)("ol",v(v({},t),{},{children:n}))},x=e=>{let{attributes:t,children:n}=e;return(0,f.jsx)("ul",v(v({},t),{},{children:n}))},C=e=>{var t;let{attributes:n,children:r,element:o}=e;const i=null!==(t=o.style)&&void 0!==t&&t.color?{color:o.style.color}:{};return(0,f.jsx)("li",v(v({style:i},n),{},{children:r}))},O=e=>{let{attributes:t,children:n}=e;return(0,f.jsx)("p",v(v({},t),{},{children:n}))},j=e=>{let{attributes:t,children:n}=e;return(0,f.jsx)("div",v(v({className:"caption"},t),{},{children:n}))},P=e=>{let{children:t}=e;return(0,f.jsx)("p",{children:t})},T=e=>{var t;let{attributes:n,children:r,element:s}=e;const u=null!==(t=s.style)&&void 0!==t&&t.color?{color:s.style.color}:{},p=(0,i.Zl)(a.Vx),h=(0,i.Zl)(l.R),g=(0,o.useCallback)((e=>{e.stopPropagation();const{isTomeLink:t,tomeId:n,pageId:r}=(0,c.vb)(e.target.parentElement.href);if(t){const{isTomeLink:t,tomeId:o}=(0,c.vb)(window.location.href);t&&o===n&&(r&&p(r),e.preventDefault(),h(!0))}}),[p,h]);return(0,f.jsx)("a",v(v(v({style:u},(0,d.aE)(s.url)),n),{},{href:s.url,onClick:g,children:r}))};var I=e=>{let{attributes:t,children:n,element:r,wrapText:o}=e;if(r.type===s.uJ)return(0,f.jsx)(T,{attributes:t,element:r,children:n});if(!o)return n;switch(r.type){case"mention":return(0,f.jsx)(b,{attributes:t,element:r,children:n});case"blockquote":return(0,f.jsx)("blockquote",v(v({},t),{},{children:n}));case"heading":{const e=void 0===(null===r||void 0===r?void 0:r.level)?4:null===r||void 0===r?void 0:r.level;if(0===e)return(0,f.jsx)("h1",v(v({className:"display"},t),{},{children:n}));const o=`h${e}`;return(0,f.jsx)(o,v(v({},t),{},{children:n}))}case"bulleted-list":return(0,f.jsx)(x,v(v({},t),{},{children:n}));case"numbered-list":return(0,f.jsx)(w,v(v({},t),{},{children:n}));case"list-item":return(0,f.jsx)(C,{element:r,attributes:t,children:n});case"caption":return(0,f.jsx)(j,v(v({},t),{},{children:n}));default:return(0,f.jsx)(O,v(v({},t),{},{children:n}))}}},69029:function(e,t,n){"use strict";n.d(t,{Ak:function(){return k},FE:function(){return w},Gt:function(){return f},Hk:function(){return d},If:function(){return y},Lk:function(){return g},N5:function(){return $},N7:function(){return R},OL:function(){return E},OQ:function(){return h},U9:function(){return O},b2:function(){return P},fR:function(){return _},gj:function(){return T},h4:function(){return j},hL:function(){return b},hW:function(){return x},ku:function(){return p},oM:function(){return I},qJ:function(){return S},t$:function(){return m},th:function(){return v},xm:function(){return D},z_:function(){return C}});var r=n(77493),o=n(99747),i=n(22774),l=n(64310),a=n(50576),s=n(26072),c=n(12459);const d=e=>(0,o.KyJ)(e)&&e.selection?e.selection:{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const i=s.CI(t);s.Cs.includes(t)&&(i.type=t);let a=null;try{a=(0,o.tVv)(e,{match:e=>!(r.ML.isEditor(e)||!r.W_.isElement(e)),mode:"all",at:n||void 0})}catch(f){l.v.addError(`Failed to get node entries: ${f}`)}let d=!1;if(!a)return[!1,!1];const u=Array.from(a,(e=>{const t=e[0],n=t.type===i.type;return("heading"!==i.type||void 0===i.level||t.level===i.level)&&n&&(d=!0),e[0].type===c.pL||"lic"===e[0].type?"":`${e[0].type}-${e[0].type===c.uX?e[0].level:""}`})).filter((e=>!!e)),p=new Set(u);return[d,1===p.size]},p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const[r]=u(e,t,n);return r},f=e=>p(e,"display")||p(e,"title")||p(e,"heading")||p(e,"subheading"),h=e=>p(e,"bulleted-list")||p(e,"numbered-list"),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection;const n={display:p(e,"display",t),title:p(e,"title",t),heading:p(e,"heading",t),subheading:p(e,"subheading",t),paragraph:p(e,c.JB,t),caption:p(e,"caption",t)};return Object.keys(n).reduce(((e,t)=>(n[t]&&e.push(t),e)),[])},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const[r]=(0,o.tVv)(e,{match:e=>!0===e[t],mode:"all",at:n||void 0});return!!r},b=e=>(0,i.Se)(e),y=(e,t)=>{const n=e;(0,o.kRc)(n,(()=>{let e=null;if((e=>f(e)||p(e,"caption"))(n)&&!h(n))for(const t of(0,o.tVv)(n,{mode:"all",match:r.xv.isText})){const r=t[1],i=(0,o.Ow4)(n,r);!e&&i&&(e=i[0]),i&&i[0].type!==c.JB&&s.Ci.includes(i[0].type)&&(0,o.fLV)(n,{type:c.JB},{at:i[1]})}(0,i.kQ)(n,{type:t}),e&&e.type!==c.JB&&(e.children=[],(0,o.qEX)(n,e,{match:e=>e.type===t}));let l=null;for(const t of(0,o.tVv)(n,{mode:"all",match:r.xv.isText})){const e=t[1],r=(0,o.Ow4)(n,e);!r||r[0].type!==c.JB&&r[0].type!==i.wl||(l=(0,o.Ow4)(n,r[1]),l&&(0,o.kKo)(l[0])&&s.Ci.includes(l[0].type)&&((0,o.qEX)(n,l[0],{at:e}),(0,o.hmm)(n,{at:e})))}l&&"caption"===l[0].type&&(0,o.LKm)(n,{at:l[1]})}))},v=(e,t,n)=>{const[r,i]=u(e,t),l=s.Cs.includes(t);if(n&&!e.selection&&(0,o.Ys)(e,{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])}),l)return void y(e,t);const a=r&&i?{type:c.JB}:s.CI(t),d=(0,o.tVv)(e),p=[];for(const c of d){const t=c[0];(0,o.kKo)(t)&&(s.Cs.includes(t.type)&&p.push(c[1]),"paragraph"!==t.type&&"heading"!==t.type&&"caption"!==t.type||(0,o.fLV)(e,a,{at:c[1]}))}p.reverse().forEach((t=>{const n=(0,o.Ow4)(e,t);n&&n[0].type===a.type&&n[0].level===a.level||!n||"list-item"===n[0].type||"heading"===n[0].type||"caption"===n[0].type||"heading"!==a.type&&"caption"!==a.type||(0,o.qEX)(e,a,{at:t})}))},w=e=>{(0,i.Se)(e),(0,o.LKm)(e),(0,o.s2K)(e,[{type:c.JB,children:[{text:""}]}],{mode:"highest"})},x=(e,t)=>{const n=(0,o.tVv)(e,{match:e=>(0,o.kKo)(e)&&(e.type===c.pL||e.type===c.uJ),at:t});for(const i of n){const t=i[0];if((0,o.kKo)(t)&&t.children){const n=(0,o.tVv)(e,{at:i[1],match:r.xv.isText});let l=null;for(const e of n){const t=e[0];if(t.style){if(l&&!(0,a.Z)(l,t.style)){l=null;break}l=t.style}}l?(0,o.fLV)(e,{style:l},{at:i[1]}):t.style&&(0,o.izS)(e,["style"],{at:i[1]})}}},C=(e,t)=>{if(e.selection&&r.e6.isCollapsed(e.selection)){const t=(0,o.Zg$)(e,{match:t=>(0,o.Lqh)(e,t)});(0,o.Ys)(e,{anchor:(0,o.plg)(e,t?t[1]:[]),focus:(0,o.ZJ1)(e,t?t[1]:[])})}else e.selection||(0,o.Ys)(e,{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])});(0,o.GKY)(e,{style:{color:t}}),x(e,e.selection||void 0)},O=(e,t,n)=>{const i=n?d(e):e.selection,[l,a]=u(e,t,i);let c=!1;if(s.Cs.includes(t)){let n=!0;const i=(0,o.tVv)(e,{mode:"highest",match:e=>!r.ML.isEditor(e)&&r.W_.isElement(e)});for(const e of i){const[r]=e,i=(0,o.PfL)(r,0),l=r.type===t,a=i&&i.type===t;if(!l&&!a){n=!1;break}}c=n}l&&a||c||v(e,t,n)},j=(e,t)=>(0,o.w9d)(e,{key:t}),P=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===c.uX,r=t.children.length<=1&&""===t.children[0].text;return n&&r}return!1},T=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===c.Oo,r=t.children.length<=1&&""===t.children[0].text;return n&&r}return!1},I=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===c.ah;if(n){let e=!1;if(0===t.children.length)e=!0;else if(1===t.children.length){const n=t.children[0];e=0===n.children.length||1===n.children.length&&""===n.children[0].text}return n&&e}}return!1},k=e=>{(0,o.oUB)(e,{type:c.JB})},E=e=>{(0,o.r4l)(e,{mode:"highest"}),(0,o.s2K)(e,[{type:c.JB,children:[{text:""}]}],{mode:"highest"})},D=e=>{const{selection:t}=e;return!(!t||!r.e6.isCollapsed(t)||0!==t.anchor.offset)},S=e=>{(0,i.Ej)(e)||e.deleteBackward("character")},R=e=>{const t=h(e),n=p(e,c.ah);return!(!t||!n)&&(e=>{const[t]=(0,o.tVv)(e,{match:e=>!r.ML.isEditor(e)&&r.W_.isElement(e)&&e.type===c.qR||e.type===c.y1});return 1!==t[0].children.length&&(!!e.selection&&""===(0,o.pj6)(e,e.selection)[0].text)})(e)},Z=e=>e.map((e=>(0,o.GsE)(e)?{text:"REDACTED"}:e.children?{type:e.type,children:Z(e.children)}:{type:e.type})),_=e=>JSON.stringify(Z(e)),$=(e,t)=>{const n=new Set,i=(0,o.tVv)(e,{mode:"all",match:r.xv.isText,at:e.selection?e.selection:{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])}});(0,s.xb)(e.children)&&n.add(((e,t)=>{var n;const r=(0,o._6L)(e);return null!==r&&void 0!==r&&null!==(n=r.style)&&void 0!==n&&n.color?r.style.color:e.children[0].type===c.JB?t.paragraph:t.heading})(e,t));for(const[r]of i){var l;const o=r,i=o.text;if(!i||""===i.trim())continue;if(null!==(l=o.style)&&void 0!==l&&l.color){n.add(o.style.color);continue}o.type===c.uX||f(e)?n.add(t.heading):n.add(t.paragraph)}return Array.from(n)}},92556:function(e,t,n){"use strict";var r=n(59499),o=n(59016),i=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=e=>{var t;let{attributes:n,children:r,leaf:l}=e,s=r;const c=(0,o.Fg)(),d=null!==(t=l.style)&&void 0!==t&&t.color?{color:l.style.color}:{};if(l.bold&&(s=(0,i.jsx)("strong",{style:d,children:s})),l.italic&&(s=(0,i.jsx)("em",{style:d,children:s})),l.underlined&&(s=(0,i.jsx)("u",{style:d,children:s})),l.strikethrough&&(s=(0,i.jsx)("del",{style:d,children:s})),l.code&&(s=(0,i.jsx)("code",{style:d,children:s})),l.highlighted)return(0,i.jsx)("span",a(a({},n),{},{style:a(a({},d),{},{background:c.colors.textSelection}),children:s}));if("string"===typeof s){const e=s.split("\n"),t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n!==e.length-1&&(t.push("\ufeff"),t.push((0,i.jsx)("br",{},n)),t.push("\ufeff"));s=(0,i.jsx)(i.Fragment,{children:t})}return(0,i.jsx)("span",a(a({},n),{},{style:d,children:s}))}},70585:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(59499),o=(n(67294),n(59016)),i=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=o.ZP.span.withConfig({displayName:"Placeholder__BasePlaceholder",componentId:"sc-1pkul9z-0"})(["opacity:0.25;"]);t.Z=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)(s,a(a({},t),{},{style:a(a({},t.style),{},{opacity:void 0}),children:n}))}},25180:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(59016),o=n(71893);const i=(0,r.iv)(["white-space:pre !important;word-wrap:normal !important;min-height:auto !important;> span:first-child{::before{content:'';}}> span{::before{content:' ';}}a + span{::before{content:'';}}br{display:none;}"]),l=(0,r.iv)(["height:100%;width:100%;*::selection{background-color:",";}"," & a{","}ol li::marker{font-variant-numeric:unset;}"],(e=>e.$textSelectionColor?e.$textSelectionColor:e.theme.colors.textSelection),(e=>!e.$wrapText&&i),o.Z);t.Z=l},50587:function(e,t,n){"use strict";var r=n(99747),o=n(67294),i=n(96391),l=n(85893);t.Z=e=>{let{autoFocus:t}=e;const n=(0,i.ui)();return(0,o.useEffect)((()=>{t&&setTimeout((()=>{(0,r.$Rk)(n),(0,r.Ys)(n,{anchor:(0,r.ZJ1)(n,[]),focus:(0,r.ZJ1)(n,[])})}),0)}),[t,n]),(0,l.jsx)(l.Fragment,{})}},56913:function(e,t,n){"use strict";n.d(t,{Z:function(){return ze}});var r=n(4730),o=n(59499),i=n(18156),l=n(50576),a=n(67294),s=n(77493),c=n(59016),d=n(4480),u=n(99747),p=n(45984),f=n(22774),h=n(29857),g=n(60910),m=n(26897),b=n(66589),y=n(64487),v=n(33340),w=n(9309),x=n(87495),C=n(12459),O=n(71932),j=n(69029);var P=e=>{const{insertBreak:t}=e;return e.insertSoftBreak=()=>{(0,j.OQ)(e)?e.insertBreak():e.insertText("\n")},e.insertBreak=()=>{var n;const r=null===(n=e.selection)||void 0===n?void 0:n.anchor;if(!r)return;const o=r.path,i=(0,u.ZJ1)(e,o);if(s.E9.equals(i,r)){if(!(0,j.OQ)(e))return y.n_({category:"slate",message:"Hard break with reset (non-list)",level:"info",data:{editor_content:(0,j.fR)(e.children)}}),void(0,u.s2K)(e,[{type:"paragraph",children:[{text:""}]}],{mode:"highest"});if((0,j.N7)(e))return void(0,j.FE)(e)}y.n_({category:"slate",message:"Hard break",level:"info",data:{editor_content:(0,j.fR)(e.children)}}),t()},e};var T=e=>{const{isInline:t,isVoid:n}=e;return e.isInline=e=>"mention"===e.type||t(e),e.isVoid=e=>"mention"===e.type||n(e),e};const I=c.ZP.div.withConfig({displayName:"TextEditorstyles__ScrollableWrapper",componentId:"sc-5y0ntb-0"})(["height:100%;width:100%;cursor:",";"],(e=>e.disabled?"default":"text"));var k=e=>{const{deleteFragment:t}=e;return e.deleteFragment=n=>{const r=(0,u.RIR)(e,e.selection);r&&(0,u.Ys)(e,r),y.n_({category:"slate",message:"Delete fragment",level:"info",data:{editor_content:(0,j.fR)(e.children)}}),t(n)},e};var E=e=>{const{normalizeNode:t}=e;return e.normalizeNode=n=>{switch(t(n),void 0!==n[0].level&&n[0].type!==C.uX&&delete n[0].level,n[0].type){case C.JB:!function(e,t){const n=(0,u.Ow4)(e,t[1]);if(!n)return;const r=n[0];[C.uX,C.JB,C.Oo].includes(r.type)&&(0,u.hmm)(e,{at:t[1]})}(e,n);break;case C.Oo:!function(e,t){const n=(0,u.Ow4)(e,t[1]);if(!n)return;const r=n[0];[C.uX,C.JB,C.Oo].includes(r.type)&&(0,u.hmm)(e,{at:t[1]})}(e,n);break;case C.uX:!function(e,t){const n=(0,u.Ow4)(e,t[1]);if(!n)return;const r=n[0];[C.uX,C.JB,C.Oo].includes(r.type)&&(0,u.hmm)(e,{at:t[1]})}(e,n);break;case C.uJ:case C.pL:(0,j.hW)(e,n[1]);break;case C.y1:case C.qR:!function(e,t){const n=(0,u.Ow4)(e,t[1]);if(!n)return;n[0].type===C.JB&&(0,u.hmm)(e,{at:t[1]})}(e,n)}},e};var D=e=>{const{deleteBackward:t}=e;return e.deleteBackward=n=>{const r=(0,f.j8)(e,{});if(r){const{list:t}=r,l=(0,u.Ow4)(e,t[1]);if((0,f.md)(e,n)){if(!l)return;const t=l[0];if(!t)return;if(t.type===C.uX){var o,i;if(null===(o=e.selection)||void 0===o||!o.focus.path)return;const n=(0,u.pj6)(e,null===(i=e.selection)||void 0===i?void 0:i.focus.path);if(n){const r=(0,u.Ow4)(e,n[1]);r&&r[0].type===C.JB?(0,u.fLV)(e,t,{at:r[1]}):(0,u.qEX)(e,t,{at:n[1]})}}return}}t(n)},e},S=n(95483),R=n(60864),Z=n(5472),_=n(92556),$=n(25180),L=n(48811),M=n(53098),A=n(60559),N=n(9517),z=n(85893);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const U=[],H=c.ZP.div.withConfig({displayName:"SlateMentionPopupComponent__StyledMentionPositioner",componentId:"sc-1a55q8s-0"})(["position:absolute;left:","px;top:","px;bottom:",";visibility:",";z-index:",";max-height:350px;border-radius:","px;"],(e=>e.left),(e=>e.top),(e=>"above"===e.location?"36px":""),(e=>e.shouldShow?"visible":"hidden"),M.Ue,A.nZ);var V=e=>{const t=(0,C.uI)(),{members:n,queryString:r,width:o,backgroundColor:i,location:l,mentionSelectedIndex:c,triggerCurrentItemSelected:d,setSelectedIndex:p}=e,f=(0,u.KyJ)(t),h=n??U,g=(0,a.useRef)(null),{0:m,1:b}=(0,a.useState)(0),{0:y,1:v}=(0,a.useState)(0);(0,a.useEffect)((()=>{var e;if(!g.current)return;if(!g.current.parentElement)return;const{selection:n}=t;if(!n||!s.e6.isCollapsed(n))return;const r=null===(e=(0,u.lrJ)(t,n))||void 0===e?void 0:e.getBoundingClientRect(),o=g.current.parentElement.getBoundingClientRect();r&&o&&(b(r.top-o.top+r.height+6),v(r.left-o.left-36))}),[t,r]);const w=(0,a.useCallback)((e=>B(B({},e),{},{onClick:()=>{d(e.index)},onMouseEnter:()=>{p(e.index)}})),[p,d]);return(0,z.jsx)(H,{"data-testid":"mention_popup",location:l,left:y,top:m,shouldShow:f,ref:g,children:(0,z.jsx)(N.ZP,{width:o,items:h.map((e=>({text:e.name,image:(0,z.jsx)(L.Z,{user:e,size:20,delayMs:0,style:{marginRight:8}}),id:e.id}))),isIndexSelected:e=>e===c,getItemProps:w,onItemClick:void 0,backgroundColor:i})})},W=n(51718);var Y=e=>{var t,n,r;let{enabled:o,tomeId:i,slateEditor:l,didSelectMember:c}=e;const{0:d,1:p}=(0,a.useState)(0),f=(0,a.useRef)(l),{0:h}=(0,a.useState)(o),{0:g,1:m}=(0,a.useState)(void 0),{data:b}=(0,W.bMj)({variables:{id:i},skip:!o}),y=(null===b||void 0===b||null===(t=b.tome)||void 0===t||null===(n=t.org)||void 0===n||null===(r=n.members)||void 0===r?void 0:r.map((e=>{let{user:t}=e;return{id:(null===t||void 0===t?void 0:t.id)||"",name:(null===t||void 0===t?void 0:t.name)||"",profileImage:(null===t||void 0===t?void 0:t.profileImage)||""}})))??[];y.sort(((e,t)=>e.name.localeCompare(t.name)));const v=(0,a.useRef)([]),{0:w,1:x}=(0,a.useState)(void 0);""===g?v.current=[...y]:void 0!==g&&g!==w&&(v.current=y.filter((e=>e.name.toLowerCase().startsWith(g.toLowerCase()))),x(g),p(0));const C=!!i&&void 0!==g&&0!==v.current.length,O=(0,a.useCallback)((()=>{const e=d+1;e>=y.length?p(y.length-1):p(e)}),[d,y.length]),j=(0,a.useRef)(void 0),P=(0,a.useCallback)((()=>{const e=d-1;p(e<0?0:e)}),[d]),T=(0,a.useCallback)((()=>{if(!h)return;const e=f.current,{selection:t}=e;if(t&&s.e6.isCollapsed(t)){const[n]=s.e6.edges(t),r=(0,u.T2j)(e,n,{unit:"character"}),o=r&&(0,u.rxh)(e,r,n);if("@"===(o&&(0,u.eNq)(e,o)))j.current=o,m("");else{const t=(0,u.T2j)(e,n,{unit:"word"}),r=t&&(0,u.T2j)(e,t),o=r&&(0,u.rxh)(e,r,n),i=o&&(0,u.eNq)(e,o),l=i&&i.match(/^@(\w+)$/),a=(0,u.Mxs)(e,n),s=(0,u.rxh)(e,n,a),c=(0,u.eNq)(e,s).match(/^(\s|$)/);l&&c?g!==l[1]&&(j.current=o,m(l[1])):(m(void 0),j.current=void 0)}}}),[g,h]),I=(0,a.useCallback)((e=>{j.current&&(null===c||void 0===c||c(v.current[e],j.current))}),[c]),k=(0,a.useCallback)((e=>{if(h&&void 0!==g){if("ArrowDown"===e.key)return e.preventDefault(),void O();if("ArrowUp"===e.key)return e.preventDefault(),void P();if("Enter"===e.key||"Tab"===e.key){if(!j.current||0===v.current.length)return;e.preventDefault(),null===c||void 0===c||c(v.current[d],j.current)}}}),[d,P,c,O,g,h,j]),E=[...v.current];return{slateMentionsEnabled:h,shouldShowPicker:C,mentionsQueryString:g,returnedMembers:E,onEditorKeyEvent:k,triggerCurrentItemSelected:I,onEditorChange:T,currentHighlightedMemberIndex:d,setCurrentHighlightedMemberIndex:p}},X=n(51854),G=n(62830),J=n.n(G);const q=[{mode:"block",type:C.pL,match:["* ","- "],format:e=>(0,j.If)(e,C.qR)},{mode:"block",type:C.pL,match:["1. ","1) "],format:e=>(0,j.If)(e,C.y1)}],K=e=>{if(!e.selection)return!0;const t=(0,u.pj6)(e,e.selection);if(!t)return!0;const n=(0,u.Ow4)(e,t[1]);return!n||"lic"!==n[0].type&&n[0].type!==C.pL},Q=[{mode:"block",type:typeof C.uX,match:"# ",preFormat:j.hL,format:e=>{(0,u.fLV)(e,{type:C.uX,level:1})},query:K},{mode:"block",type:typeof C.uX,match:"## ",preFormat:j.hL,format:e=>{(0,u.fLV)(e,{type:C.uX,level:2})},query:K},{mode:"block",type:typeof C.uX,match:"### ",preFormat:j.hL,format:e=>{(0,u.fLV)(e,{type:C.uX,level:3})},query:K}],ee=[{mode:"mark",type:C.zN.BOLD,match:"**"},{mode:"mark",type:C.zN.BOLD,match:"__"},{mode:"mark",type:C.zN.ITALIC,match:"*"},{mode:"mark",type:C.zN.ITALIC,match:"_"},{mode:"mark",type:C.zN.CODE,match:"`"},{mode:"mark",type:[C.zN.BOLD,C.zN.ITALIC],match:"***"}];var te=e=>({options:{enableUndoOnDelete:!0,rules:[...e.includes(C.Ar.LISTS)?q:[],...e.includes(C.Ar.TYPE_SCALES)?Q:[],...e.includes(C.Ar.MARKS)?ee:[],...p.hi,...p.Ie,...p.cD,...p.ez,...p.lk,...p.oF.filter((e=>e!==p.Qn[0]&&!p.dS.includes(e)&&!p.km.includes(e)&&!p.Sm.includes(e)))]}});var ne={resetNode:{options:{disableEditorReset:!0,disableFirstBlockReset:!1,rules:[{hotkey:"Backspace",types:[C.uX],predicate:j.b2,onReset:j.Ak},{hotkey:"Backspace",types:[C.Oo],predicate:j.gj,onReset:j.Ak},{hotkey:"Backspace",types:[C.ah],predicate:j.oM,onReset:j.OL},{hotkey:"Backspace",types:[C.pL],predicate:j.N7,onReset:j.FE},{hotkey:"Backspace",types:[C.pL],predicate:j.xm,onReset:j.qJ}]}},autoformat:te,list:{overrideByKey:{ul:{type:C.qR,component:Z.r9,options:{enableResetOnShiftTab:!0}},li:{type:C.pL,component:Z.Sp},ol:{type:C.y1,component:Z.gD,options:{enableResetOnShiftTab:!0}},lic:{type:"lic",component:Z.vV}}},link:{options:{hotkey:"***null***",isUrl:e=>{const t=X.sE(e);return t.length>0&&(t[0].isLink&&0===t[0].start)},getUrlHref:e=>{const t=X.sE(e);if(1===t.length&&t[0].value===e)return t[0].href}},overrideByKey:{a:{type:C.uJ,component:Z.EA}}},nodeId:{options:{reuseId:!0,idCreator:()=>J()()}}},re=n(50587);const oe=e=>{const{insertFragment:t}=e;function n(e){for(let t=0;t<e.length;t++){const r=e[t];if("link"===r.type){const n=r.children;1===n.length&&(0,u.GsE)(n[0])?e[t]=n[0]:(delete r.url,r.type="paragraph")}else(0,u.GsE)(r)||n(r.children)}}return e.insertFragment=e=>{n(e),t(e)},e};var ie=()=>({key:"stripLinks",isElement:!1,withOverrides:e=>oe(e)});const le=e=>{const{insertFragment:t}=e;function n(t){let r=[];for(const o of t)if((0,u.GsE)(o))r.push(o);else{const t=n(o.children);(0,f.TB)(e,o)||"lic"===o.type?r=r.concat(t):"list-item"===o.type?(o.type="paragraph",o.children=t,r.push(o)):(o.children=t,r.push(o))}return r}return e.insertFragment=e=>{const r=n(e);t(r)},e};var ae=()=>({key:"stripLists",isElement:!1,withOverrides:e=>le(e)});const se=e=>{const{insertFragment:t}=e;function n(e){for(const t of e)if((0,u.GsE)(t))for(const e of C.Ik)delete t[e];else n(t.children)}return e.insertFragment=e=>{n(e),t(e)},e};var ce=()=>({key:"stripMarks",isElement:!1,withOverrides:e=>se(e)});var de=()=>({key:"stripTypeScales",isElement:!1,withOverrides:e=>(e=>{const{insertFragment:t}=e;return e.insertFragment=e=>{for(const t of e)"heading"!==t.type&&"caption"!==t.type||(t.type="paragraph");t(e)},e})(e)});var ue=function(e){const t=[];return e.includes(C.Ar.TYPE_SCALES)||t.push(de()),e.includes(C.Ar.LISTS)||t.push(ae()),e.includes(C.Ar.MARKS)||t.push(ce()),e.includes(C.Ar.LINKS)||t.push(ie()),t},pe=n(38938),fe=n(70585),he=n(61813);const ge=e=>{if(e.hasChildNodes())for(let t=0;t<e.children.length;t++)ge(e.children[t]);"#text"!==e.nodeName&&e.hasAttribute("style")&&e.removeAttribute("style")};var me=ge,be=n(71815);const ye=["del","ins","cite","code","data","blockquote","dfn","kbd","rb","rp","rt","rtc","ruby","canvas","noscript","script","embed","iframe","object","param","picture","source","audio","img","map","track","video","aside","figcaption","figure","footer","nav","form","fieldset","label","button","input","textarea","select"].map((e=>e.toUpperCase())),ve={A:e=>({type:"link",url:e.getAttribute("href")}),H1:e=>({type:"heading",level:"display"===e.className?0:1}),H2:()=>({type:"heading",level:2}),H3:()=>({type:"heading",level:3}),H4:()=>({type:"paragraph"}),H5:()=>({type:"paragraph"}),H6:()=>({type:"paragraph"}),LI:()=>({type:"list-item"}),OL:()=>({type:"numbered-list"}),P:e=>"caption"===e.className?{type:"caption"}:{type:"paragraph"},PRE:()=>({type:"code"}),UL:()=>({type:"bulleted-list"}),TD:()=>({type:"paragraph"})},we={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underlined:!0})},xe=function(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=[Node.PROCESSING_INSTRUCTION_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.NOTATION_NODE],i=["\x3c!--","\n","\r","\t"];if(o.includes(e.nodeType)||!n&&"TABLE"===e.nodeName||r&&ye.includes(e.nodeName))return null;if(e.nodeType===Node.TEXT_NODE)return e.textContent?i.includes(e.textContent)||i.includes(e.textContent)?null:e.textContent:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;if("BR"===e.nodeName)return"\n";const{nodeName:l}=e;let a=e;"PRE"===l&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&(a=e.childNodes[0]);let s=Array.from(a.childNodes).map((e=>xe(e,n,r))).flat();if(0===s.length&&(s=[{text:""}]),"BODY"===l)return(0,be.tZ)("fragment",{},s);const c=ve[null===(t=a.parentNode)||void 0===t?void 0:t.nodeName];if("DIV"===l&&!c&&s.every((e=>"string"===typeof e||(null===e||void 0===e?void 0:e.text))))return(0,be.tZ)("element",{type:"paragraph"},s);const d=ve[l];if(d){const t=d(e);return(0,be.tZ)("element",t,s)}const u=we[l];if(u){const e=u();return s.map((t=>"string"===typeof t||null!==t&&void 0!==t&&t.text?(0,be.tZ)("text",e,t):null!==t&&void 0!==t&&t.children?(0,be.tZ)("text",e,t.children):(0,be.tZ)("text",{},{text:""})))}return s};var Ce=xe;function Oe(e){const t=e.replace(/\n|\t|\r/g,"");return(new DOMParser).parseFromString(t,"text/html")}const je=e=>{let t=null===e||void 0===e?void 0:e.commonAncestorContainer;const n=e.cloneContents(),r=n.ownerDocument.createElement("div");r.appendChild(n),r.setAttribute("hidden","true"),n.ownerDocument.body.appendChild(r);let o=r.innerHTML;for(;"LI"===t.nodeName||"UL"===t.nodeName||"OL"===t.nodeName;)e.selectNode(t),o=`<${t.nodeName}>${o}</${t.nodeName}>`,t=null===e||void 0===e?void 0:e.commonAncestorContainer;return o};var Pe=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{insertData:r,isInline:o,setFragmentData:i}=e;return e.setFragmentData=t=>{if(i(t),e.selection){const n=(0,u.lrJ)(e,e.selection);if(!n)return;t.setData("text/html",je(n))}},e.isInline=e=>"link"===e.type||o(e),e.insertData=o=>{if(o.getData("application/x-slate-fragment"))return void r(o);const i=r=>{me(r.body);const o=Ce(r.body,t,n);if(o){const t=(0,u.mfU)(e,{descendants:o});return y.n_({category:"slate",message:"Adding HTML data",level:"info",data:{paste_content:(0,j.fR)(t),editor_content:(0,j.fR)(e.children)}}),e.insertFragment(t),!0}return!1},l=o.getData("text/html");if(l){if(i(Oe(l)))return}const a=o.getData("text/plain");if(a){const e=(0,X.sE)(a);if(0===e.length)return void r(o);if(1===e.length&&e[0].value===a)return void r(o);if(e.length>=1){const e=`<body><p>${(0,he.Z)(a)}</p></body>`;if(i((new DOMParser).parseFromString(e,"text/html")))return}}r(o)},e};var Te=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{key:"withHtml",isElement:!1,withOverrides:n=>Pe(n,e,t)}},Ie=n(23402);var ke=e=>({key:"maxLength",isElement:!1,withOverrides:t=>(0,Ie.Z)(e)(t)}),Ee=n(68079),De=n.n(Ee);var Se=e=>{const{insertData:t,insertText:n,isInline:r}=e;return e.isInline=e=>"link"===e.type||r(e),e.insertText=t=>{y.n_({category:"slate",message:"Insert text (withLinks)",level:"info",data:{content:t,is_url:De()(t),editor_content:(0,j.fR)(e.children)}}),t&&De()(t)?(0,w.uT)(e,t):n(t)},e.insertData=n=>{const r=n.getData("text/plain");r&&De()(r)?(0,w.uT)(e,r):t(n)},e};var Re=()=>({key:"links",isElement:!1,withOverrides:e=>Se(e)});const Ze=["autoFocus","features","maxCharacterLimit","onUnmount"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Le=a.lazy((()=>Promise.all([n.e(9141),n.e(6477),n.e(4208),n.e(9455)]).then(n.bind(n,59455)))),Me={contentEditableStyles:void 0},Ae=(0,c.ZP)(I).withConfig({displayName:"SlateEditor__StyledEditableWrapper",componentId:"sc-1sc7j9h-0"})(["& > [contenteditable]{"," -webkit-user-select:auto;user-select:auto;}"],$.Z),Ne=(0,a.forwardRef)(((e,t)=>{let{editorId:n,tomeId:r,tileId:o,value:c,setValue:I,onChange:$,onFocus:L,onBlur:M,onPaste:A,onUnmount:N,autoFocus:F=!1,placeholder:B,keyBindings:U,wrapText:H,textSelectionColor:W,contentEditableStyles:X,features:G,maxCharacterLimit:J,initialPasteData:q,disableHistory:K=!0}=e;const{0:Q,1:ee}=(0,a.useState)(null),{0:te,1:oe}=(0,a.useState)(!1),ie=(0,a.useRef)(),le=(0,a.useCallback)((()=>(0,u.ZUk)([...ue(G),{key:u.mnA,type:C.JB,isElement:!0,component:Z.bJ},{key:C.Oo,type:C.Oo,isElement:!0,component:Z.GB},(0,p.wQ)(ne.autoformat(G)),(0,u.SPV)(),(0,f.V8)(ne.list),(0,h.Tv)(ne.link),(0,g.gH)(ne.resetNode),(0,m.kd)(ne.nodeId),Re(),ke(J),Te(G.includes(C.Ar.HTML_TABLES),G.includes(C.Ar.STRICT_MODE)),(0,b.n4)()])),[G,J]);ie.current||(ie.current=E(D(k(P(T((0,C.Y_)({plugins:le(),disableCorePlugins:{history:K},id:n})))))),ie.current.children=c);const ae=ie.current,{0:se,1:ce}=(0,a.useState)(c);(0,a.useEffect)((()=>{ae.children.length&&!(0,l.Z)(c,ae.children)&&((0,pe.qT)(ae,{nodes:c}),ce(c))}),[c,ae]);const de=(0,a.useRef)(!1),he=(0,u.KyJ)(ae);(0,a.useEffect)((()=>{q&&he&&!de.current&&(ae.insertData(q),de.current=!0)}),[ae,q,he]);const ge=(0,d.Zl)((0,v.TU)(o||"")),me=(0,d.Zl)(S.U),be=G.includes(C.Ar.TYPE_SCALES),ye=G.includes(C.Ar.MENTIONS),ve=G.includes(C.Ar.MARKS),{0:we,1:xe}=(0,a.useState)(!1),Ce=Y({tomeId:r??"",enabled:ye,slateEditor:ae,didSelectMember:(e,t)=>{(0,u.Ys)(ae,t);const n=s.y$.parent(t.anchor.path),r=1===n.length&&0===n[0],o={userId:e.id,value:`@${e.name}`,type:"mention",children:[{text:""}]},i={text:"\u200b"},l={text:" "};r?(0,u.s2K)(ae,[i,o,l]):(0,u.s2K)(ae,[o,l])}}),Oe=(0,a.useCallback)((e=>(0,z.jsx)(Z.ZP,$e($e({},e),{},{wrapText:H}))),[H]),je=(0,a.useCallback)((e=>(0,z.jsx)(_.Z,$e({},e))),[]),Pe=(0,a.useCallback)((e=>{let[,t]=e;if(!we)return[];const n=(0,u.rxh)(ae,t);if(!n||!Q)return[];const r=s.e6.intersection(Q,n);if(!r)return[];return[$e({highlighted:!0},r)]}),[ae,Q,we]);(0,a.useImperativeHandle)(t,(()=>({appendText:e=>{(0,u.OmN)(ae,e,{at:{anchor:(0,u.ZJ1)(ae,[]),focus:(0,u.ZJ1)(ae,[])}})},replaceText:e=>{(0,u.OmN)(ae,e,{at:{anchor:(0,u.plg)(ae,[]),focus:(0,u.ZJ1)(ae,[])}})},isFocused:()=>(0,u.KyJ)(ae),focusEditor:()=>{ae&&!(0,u.KyJ)(ae)&&((0,u.$Rk)(ae),y.n_({category:"slate",message:"Editor focus from handle",level:"info",data:{editor_content:(0,j.fR)(ae.children)}}),(0,u.Ys)(ae,{anchor:(0,u.ZJ1)(ae,[]),focus:(0,u.ZJ1)(ae,[])}))},blurEditor:()=>{ae&&(0,u.KyJ)(ae)&&((0,u.tCj)(ae),y.n_({category:"slate",message:"Editor blur from handle",level:"info",data:{editor_content:(0,j.fR)(ae.children)}}))},moveCursorToEnd:()=>{ae&&(0,u.Ys)(ae,{anchor:(0,u.ZJ1)(ae,[]),focus:(0,u.ZJ1)(ae,[])})},getEditor:()=>ae,deselect:()=>{(0,u._Hq)(ae)}})));const Ie=(0,a.useMemo)((()=>({"shift+enter":()=>(ae.insertSoftBreak(),!0),"mod+b":()=>!!ve&&((0,j.h4)(ae,"bold"),!0),"mod+i":()=>!!ve&&((0,j.h4)(ae,"italic"),!0),"mod+u":()=>!!ve&&((0,j.h4)(ae,"underlined"),!0),"mod+e":()=>!!ve&&((0,j.h4)(ae,"code"),!0),"mod+l":()=>(xe(!0),!0),"shift+mod+s":()=>!!ve&&((0,j.h4)(ae,"strikethrough"),!0),"opt+mod+0":()=>((0,j.ku)(ae,"paragraph")||(0,j.th)(ae,"paragraph"),!0),"opt+mod+1":()=>!!be&&((0,j.ku)(ae,"title")||(0,j.th)(ae,"title"),!0),"opt+mod+2":()=>!!be&&((0,j.ku)(ae,"heading")||(0,j.th)(ae,"heading"),!0),"opt+mod+3":()=>!!be&&((0,j.ku)(ae,"subheading")||(0,j.th)(ae,"subheading"),!0),"shift+mod+7":()=>((0,j.ku)(ae,"numbered-list")?(0,j.th)(ae,"paragraph"):(0,j.th)(ae,"numbered-list"),!0),"shift+mod+8":()=>((0,j.ku)(ae,"bulleted-list")?(0,j.th)(ae,"paragraph"):(0,j.th)(ae,"bulleted-list"),!0)})),[ae,ve,be]),Ee=(0,a.useCallback)((e=>{var t;null===(t=Ce.onEditorKeyEvent)||void 0===t||t.call(Ce,e);const n=$e($e({},Ie),U);for(const r in n)(0,i.ZP)(r,e)&&n[r](ae,e)&&e.preventDefault()}),[Ce,Ie,U,ae]),De=(0,a.useCallback)((e=>((0,u.zbr)(ae.selection)?e.preventDefault():e.stopPropagation(),!1)),[ae.selection]),Se=(0,a.useCallback)((e=>{e.detail>=3&&(0,l.Z)(c,O.yS)&&(e.preventDefault(),e.stopPropagation())}),[c]),Ze=(0,a.useCallback)((e=>{var t;const n=ae.selection,r=(0,u.zbr)(ae.selection);ge(!r),n?(me({chars:(0,u.mRq)(ae).length,words:(0,u.mRq)(ae).trim().split(" ").length}),ee({anchor:n.anchor,focus:n.focus})):ee(null),null===(t=Ce.onEditorChange)||void 0===t||t.call(Ce),(0,l.Z)(c,e)||(0,O.vk)(c,e)||I(e),$&&$()}),[ae,Ce,$,ge,me,I,c]),_e=(0,a.useCallback)((()=>{const e=(0,u.zbr)(ae.selection);(0,R.ii)(!0),ge(!e),"function"===typeof L&&L()}),[ae.selection,L,ge]),Me=(0,a.useCallback)((()=>{(0,R.ii)(!1),ge(!1),"function"===typeof M&&M()}),[M,ge]),Ne=(0,a.useRef)(M);Ne.current=M;const ze=(0,a.useRef)(N);ze.current=N,(0,a.useEffect)((()=>()=>{var e,t;null===(e=Ne.current)||void 0===e||e.call(Ne),(0,R.ii)(!1),null===(t=ze.current)||void 0===t||t.call(ze,ie.current)}),[]);const{0:Fe,1:Be}=(0,a.useState)(),Ue=(0,a.useCallback)((()=>{Q&&((0,u.$Rk)(ae),(0,u.Ys)(ae,Q))}),[ae,Q]),He=(0,a.useCallback)((e=>{Ue(),Q&&((0,w.T8)(ae,e?(0,x.N1)(e):void 0),I(ae.children))}),[ae,Ue,Q,I]);return(0,a.useEffect)((()=>{if(we){if(!ae.selection)return;const e=Array.from((0,u.tVv)(ae,{match:e=>"link"===e.type})),t=e[0],n=(0,u.mRq)(ae);1===e.length&&t&&"link"===t[0].type&&(0,u.eNq)(ae,t[1]).includes(n)?((0,u.Ys)(ae,t[1]),Be(t[0].url)):Be(void 0)}}),[ae,we]),(0,z.jsxs)(u.hv7,{id:n,editor:ae,initialValue:se||O.yS,onChange:Ze,editableProps:{className:"slate-editor",renderLeaf:je,renderElement:Oe,placeholder:B,renderPlaceholder:fe.Z,decorate:Pe,style:X,onFocus:_e,onBlur:Me,onContextMenu:De,onKeyDown:e=>{Ee(e)},onMouseDown:Se,onPaste:e=>null===A||void 0===A?void 0:A(e)},renderEditable:e=>(0,z.jsx)(Ae,{disabled:!1,"data-placeholder":B,$wrapText:H,$textSelectionColor:W,children:e}),children:[(0,z.jsx)(re.Z,{autoFocus:F}),G.length>0&&(0,z.jsx)(a.Suspense,{fallback:null,children:(0,z.jsx)(Le,{linkContents:Fe,focusAndActivateLastSelection:Ue,features:G,showLinkInput:we,setShowLinkInput:xe,linkifyLastSelection:He})}),Ce.slateMentionsEnabled&&Ce.shouldShowPicker&&(0,z.jsx)(V,{location:"below",width:180,members:Ce.returnedMembers,queryString:Ce.mentionsQueryString,triggerCurrentItemSelected:Ce.triggerCurrentItemSelected,mentionSelectedIndex:Ce.currentHighlightedMemberIndex,setSelectedIndex:Ce.setCurrentHighlightedMemberIndex})]})}));Ne.defaultProps=Me;var ze=(0,a.forwardRef)(((e,t)=>{let{autoFocus:n,features:o,maxCharacterLimit:i,onUnmount:l}=e,s=(0,r.Z)(e,Ze);const c=`editor-with-features${o.map((e=>`-${e}`))}-charlimit-${i}`,{0:d,1:p}=(0,a.useState)(!1);return(0,z.jsx)(Ne,$e({autoFocus:n||d,features:o,maxCharacterLimit:i,ref:t,onUnmount:e=>{p(!!e&&(0,u.KyJ)(e)),null===l||void 0===l||l(e)}},s),c)}))},59764:function(e,t,n){"use strict";n.d(t,{N:function(){return s},f:function(){return a}});var r=n(67294),o=n(4480),i=n(32579),l=n(85893);const a=r.createContext({}),s=e=>{let{children:t}=e;const n=(0,r.useRef)(),s=(0,o.Zl)(i.Z),c=(0,r.useCallback)((()=>{s((e=>!e))}),[s]),d=(0,r.useCallback)((e=>{e!==n.current&&(n.current=e,c())}),[c]),u=(0,r.useCallback)((()=>{c()}),[c]),p=(0,r.useMemo)((()=>({activeEditorRef:n,setActiveEditor:d,notifyOfActiveEditorChange:u})),[u,d]);return(0,l.jsx)(a.Provider,{value:p,children:t})}},32579:function(e,t,n){"use strict";const r=(0,n(4480).cn)({key:"slateEditorUpdateState",default:!1});t.Z=r},67171:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});n(67294);var r=n(13285),o=n(59016),i=n(85893);const l=(e,t,n,r)=>{const o=(r-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},a=(e,t,n,r,o)=>{const i=l(e,t,n,o),a=l(e,t,n,r),s=o-r<=180?"0":"1";return["M",i.x,i.y,"A",n,n,0,s,0,a.x,a.y].join(" ")};t.Z=e=>{let{size:t,stroke:n,background:l,foreground:s,rotationDuration:c}=e;const d="dark"===(0,o.Fg)().UITheme?n:n+.5,u=t/2,p=t/2,f=t/2-d/2,h=a(u,p,f,0,270);return(0,i.jsxs)(r.E.svg,{width:t,height:t,viewBox:`0 0 ${t} ${t}`,fill:"none",children:[(0,i.jsx)(r.E.circle,{cx:u,cy:p,r:f,strokeWidth:d,stroke:l}),(0,i.jsx)(r.E.path,{d:h,strokeWidth:d,strokeLinecap:"round",animate:{rotate:360,stroke:s},transition:{rotate:{ease:"linear",repeat:1/0,duration:c}},style:{originX:`${u}px`,originY:`${p}px`}})]})}},87094:function(e,t,n){"use strict";n(67294);var r=n(85893);t.Z=e=>{let{children:t,resizeRef:n,style:o}=e;return(0,r.jsx)("div",{style:o,"data-tile-resize-observer":!0,ref:n,children:t})}},19579:function(e,t,n){"use strict";n.d(t,{A:function(){return i},B:function(){return o}});var r=n(4480);let o;!function(e){e.NONE="NONE",e.CLICK_IMAGE_TILE_UPLOAD_BUTTON="CLICK_IMAGE_TILE_UPLOAD_BUTTON",e.CLICK_IMAGE_TILE_CREATE_BUTTON="CLICK_IMAGE_TILE_CREATE_BUTTON"}(o||(o={}));const i=(0,r.xu)({key:"triggerAfterAddTileActionState",default:{action:o.NONE,triggered:!1}})},17463:function(e,t,n){"use strict";n.d(t,{aY:function(){return s},vw:function(){return a},z1:function(){return l}});var r=n(62830),o=n.n(r),i=n(4480);const l=(0,i.cn)({key:"trackMediaUploadInProgressState",default:new Set}),a=(0,i.xu)({key:"mediaUploadLocalStateState",default:{uploadId:void 0,inProgress:!1,progress:0,localMediaUrl:void 0,localFileData:void 0},effects:e=>[t=>{let{getLoadable:n,onSet:r}=t;const o=n(l).contents;return r((t=>{t.inProgress?o.add(e):o.delete(e)})),()=>{o.delete(e)}}]});function s(e){return{uploadId:o()(),inProgress:!1,progress:0,localMediaUrl:URL.createObjectURL(e),localFileData:e}}},3868:function(e,t,n){"use strict";n.d(t,{p:function(){return p}});var r=n(59499),o=n(67294),i=n(4480),l=n(59016),a=n(85769),s=n(53098),c=n(85893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=l.ZP.div.withConfig({displayName:"ResizeHandle__ResizeHandleBlock",componentId:"sc-1o9b4xh-0"})(["background:",";width:4px;margin-left:-2px;height:calc(100% + 4px);z-index:",";"],(e=>e.theme.colors.uiAccent),s.pQ);t.Z=e=>{let{column:t,tileId:n}=e;const r=(0,o.useMemo)((()=>({colId:t.id,tileId:n})),[t.id,n]),[l,s]=(0,i.FV)((0,a.qh)(r));(0,o.useEffect)((()=>()=>s(!1)),[s]);const d=(0,o.useCallback)((()=>s(!0)),[s]),f=(0,o.useCallback)((()=>s(!1)),[s]),h=t.getResizerProps();return(0,c.jsx)(p,u(u({"data-disable-drag":!0},h),{},{onMouseEnter:d,onMouseLeave:f,style:u(u({},h.style),{},{opacity:t.isResizing||l?1:0})}))}},35784:function(e,t,n){"use strict";n.d(t,{N0:function(){return s},QG:function(){return l},RH:function(){return d},Y8:function(){return a},bC:function(){return u},t_:function(){return c}});var r=n(59016),o=n(9304),i=n(3868);const l=20,a=(0,r.iv)(["position:relative;& div:last-of-type{","{margin-right:10px;}}"],i.p),s=r.ZP.div.withConfig({displayName:"Rowstyles__StyledRow",componentId:"de31ww-0"})(["",""],a),c=r.ZP.div.withConfig({displayName:"Rowstyles__RowEditorTools",componentId:"de31ww-1"})(["position:sticky;left:0;min-width:","px;z-index:1;&:hover{z-index:4;}"],l),d=r.ZP.div.withConfig({displayName:"Rowstyles__RowDragHandle",componentId:"de31ww-2"})(["height:20px;width:3px;border-radius:3px;background-color:",";opacity:0;"," ",":hover &{opacity:1;}"],(e=>e.theme.colors.contrast16),"",o.J),u=r.ZP.div.withConfig({displayName:"Rowstyles__RowDragHover",componentId:"de31ww-3"})(["outline:0;position:absolute;display:",";top:0;bottom:0;width:19px;cursor:grab;align-items:center;justify-content:center;&:hover ","{background-color:",";opacity:1;}"],(e=>e.$readonly?"none":"flex"),d,(e=>e.theme.colors.contrast))},9304:function(e,t,n){"use strict";n.d(t,{J:function(){return p}});var r=n(59499),o=n(4730),i=n(67294),l=n(59016),a=n(60314),s=n(85893);const c=["children","innerRef","isThisRowBeingDragged","preview","tableScrollLeft"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=l.ZP.div.withConfig({displayName:"RowCropper__StyledRowCropper",componentId:"sc-18m5wcx-0"})(["margin-bottom:",";"," border-radius:","px;",""],(e=>e.preview?"1px":"4px"),(e=>!e.isThisRowBeingDragged&&"\n    display: flex;\n  "),a.vT,(e=>e.isThisRowBeingDragged&&`filter: ${e.theme.colors.tableRowDragDropShadow};`)),f=e=>{const{children:t,innerRef:n,isThisRowBeingDragged:r,preview:l,tableScrollLeft:a}=e,d=(0,o.Z)(e,c),f=(0,i.useRef)(null),h=(0,i.useCallback)((e=>{f.current=e,"function"===typeof n&&n(e)}),[n]);return(0,i.useEffect)((()=>{r&&a&&null!==f&&void 0!==f&&f.current&&(f.current.scrollLeft=a)}),[r,a]),(0,s.jsx)(p,u(u({isThisRowBeingDragged:r,preview:l,ref:h},d),{},{children:t}))};t.Z=(0,i.memo)(f)},60314:function(e,t,n){"use strict";n.d(t,{YF:function(){return r},oZ:function(){return l},tn:function(){return i},vT:function(){return o}});const r=2,o=3,i=10,l=550},76024:function(e,t,n){"use strict";n.d(t,{CD:function(){return h},Db:function(){return m},Nw:function(){return c},bI:function(){return d},bM:function(){return g},fq:function(){return f},vw:function(){return b}});var r=n(59499),o=n(4730),i=n(67294);n(85893);const l=["style","className"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c={init:"init"},d={Cell:e=>{let{value:t=""}=e;return t},width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>{const{style:n,className:r}=t,i=(0,o.Z)(t,l);return e=s(s({},e),i),n&&(e.style=e.style?s(s({},e.style||{}),n||{}):n),r&&(e.className=e.className?e.className+" "+r:r),""===e.className&&delete e.className,e}),{})}function p(e,t,n){return"function"===typeof t?p({},t(e,n)):Array.isArray(t)?u(e,...t):u(e,t)}const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[...e,n].reduce(((e,r)=>p(e,r,s(s({},t),{},{userProps:n}))),{})}};function h(e,t,n,r){e.findIndex((e=>e.pluginName===n));t.forEach((t=>{e.findIndex((e=>e.pluginName===t))}))}function g(e){const t=i.useRef();return t.current=e,i.useCallback((()=>t.current),[])}const m="undefined"!==typeof document?i.useLayoutEffect:i.useEffect;function b(e,t){const n=i.useRef(!1);m((()=>{n.current&&e(),n.current=!0}),t)}},83926:function(e,t,n){"use strict";n.d(t,{El:function(){return b},Gb:function(){return g},Gq:function(){return y},ZP:function(){return w},hT:function(){return m}});var r=n(59499),o=n(48583),i=n.n(o),l=n(62830),a=n.n(l),s=n(67294),c=n(4480),d=n(17382),u=n(85769),p=n(63897);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return r=>{const{data:o}=r,l=o[e],a=r.columns[t].accessor,s=l[a];i()(void 0!==s,`Bad colId. row: ${l}, colId: ${a}`);const c="function"===typeof n?(0,p.qC)(n((0,p.vB)(s))):(0,p.qC)(n),d=[...o];return d.splice(e,1,h(h({},l),{},{[a]:c})),h(h({},r),{},{data:d})}}function m(e,t,n){return r=>{const o=r.data.findIndex((t=>t.id===e));if(o<0)return h({},r);const i=r.columns.findIndex((e=>e.accessor===t));return i<0?h({},r):g(o,i,n)(r)}}function b(e,t,n){return r=>{const o={label:`Col ${r.columns.length+1}`,accessor:t||a()(),columnType:e};let i;void 0!==n?(i=[...r.columns],i.splice(n,0,o)):i=[...r.columns,o];const l=r.data.map((t=>h(h({},t),{},{[o.accessor]:(0,d.Zr)(e)})));return h(h({},r),{},{columns:i,data:l})}}function y(e,t){return n=>{const r=Object.fromEntries(n.columns.map((e=>[e.accessor,(0,d.Zr)(e.columnType)]))),o=h({id:e||a()()},r);let i;return void 0!==t?(i=[...n.data],i.splice(t,0,o)):i=[...n.data,o],h(h({},n),{},{data:i})}}function v(e,t){e((e=>{let n=e;return t.forEach((e=>{n=e(n)})),n}))}function w(e,t){const n=(0,c._8)((e=>{let{snapshot:t}=e;return(e,n)=>{const r=t.getLoadable(u.sO).getValue(),o=[];r.forEach((e=>{o.push(m(e.rowId,e.colId,n))})),v(e,o)}}),[]);return(0,s.useMemo)((()=>({updateCell:(t,n,r)=>function(e,t,n,r){e(m(t,n,r))}(e,t,n,r),applyToSelectedCells:t=>n(e,t),insertColumn:(t,n)=>function(e,t,n){const r=a()();return e(b(t,r,n)),r}(e,t,n),insertRow:t=>function(e,t){const n=a()();return e(y(n,t)),n}(e,t),deleteRow:n=>function(e,t,n){t(),e((e=>{const t=e.data.filter((e=>e.id!==n));return h(h({},e),{},{data:t})}))}(e,t,n),deleteRowsByIdx:n=>function(e,t,n){t(),e((e=>{const t=e.data.filter(((e,t)=>!n.includes(t)));return h(h({},e),{},{data:t})}))}(e,t,n),deleteColumn:n=>function(e,t,n){t(),e((e=>{const t=e.columns.filter((e=>e.accessor!==n)),r=e.data.map((e=>{const t=h({},e);return delete t[n],t}));return h(h({},e),{},{columns:t,data:r})}))}(e,t,n),deleteColumnsByIdx:n=>function(e,t,n){t(),e((e=>{const t=e.columns.filter(((e,t)=>!n.includes(t))),r=e.columns.filter(((e,t)=>n.includes(t))).map((e=>e.accessor)),o=e.data.map((e=>{const t=h({},e);return r.forEach((e=>{delete t[e]})),t}));return h(h({},e),{},{columns:t,data:o})}))}(e,t,n),renameColumn:(t,n)=>function(e,t,n){e((e=>{const r=e.columns.map((e=>e.accessor===t?h(h({},e),{},{label:n}):e));return h(h({},e),{},{columns:r})}))}(e,t,n),moveColumn:(t,n)=>function(e,t,n){e((e=>{const r=[...e.columns],o=r.findIndex((e=>e.accessor===t));return r.splice(n,0,r.splice(o,1)[0]),h(h({},e),{},{columns:r})}))}(e,t,n),moveRow:(t,n)=>function(e,t,n){e((e=>{const r=[...e.data];return r.splice(n,0,r.splice(t,1)[0]),h(h({},e),{},{data:r})}))}(e,t,n),applyMultipleUpdates:t=>v(e,t)})),[n,t,e])}},60112:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(48583),o=n.n(r),i=n(67294),l=n(4480),a=n(85769),s=n(84282),c=n(34425);function d(e,t){const n=(0,l.Zl)(a.uL),r=(0,l.Zl)(a.wK),d=(0,l.Zl)(a.DS),u=(0,i.useCallback)((()=>e.current.data.map((e=>e.id))),[e]),p=(0,i.useCallback)((()=>e.current.columns.map((e=>e.accessor))),[e]),f=(0,i.useCallback)((e=>{n(e),r(e?[e]:[])}),[n,r]),h=(0,i.useCallback)(((e,n,r)=>{const{rowId:o,colId:i}=(0,s.V)(u(),p(),e,n,r);f({rowId:o,colId:i,tileId:t})}),[u,p,f,t]),g=(0,i.useCallback)(((e,n)=>{f({rowId:e,colId:n,tileId:t})}),[f,t]),m=(0,i.useCallback)(((e,n)=>{const r=[...e].sort(c.uR),o=[...n].sort(c.uR),i=[];for(let l=o[0];l<=o[1];l++)for(let e=r[0];e<=r[1];e++)i.push({rowId:u()[e],colId:p()[l],tileId:t});return i}),[u,p,t]),b=(0,l._8)((e=>{let{snapshot:n}=e;return(e,i)=>{const l=n.getLoadable(a.uL).getValue();if(!l)return void f({rowId:e,colId:i,tileId:t});const s=u().indexOf(l.rowId),c=p().indexOf(l.colId),d=u().indexOf(e),h=p().indexOf(i);[c,s,d,h].forEach((e=>{o()(e>=0,`Could not find value in row/col indexes. Value is ${e}`)})),r(m([s,d],[c,h]))}}),[u,p,r,m,f,t]),y=(0,i.useCallback)((()=>{f(null)}),[f]),v=(0,l._8)((e=>{let{snapshot:t,set:n}=e;return(e,r)=>{const o=t.getLoadable(a.sO).getValue();if(o.length<=1)return;const i=o.filter((t=>!(t.rowId===e&&t.colId===r)));n(a.wK,i);const l=t.getLoadable(a.uL).getValue();(null===l||void 0===l?void 0:l.rowId)===e&&l.colId===r&&n(a.uL,i[0])}}),[]),w=(0,i.useCallback)((e=>{f({rowId:e,colId:p()[0],tileId:t})}),[f,p,t]),x=(0,i.useCallback)((e=>{w(e);const n=p().map((n=>({rowId:e,colId:n,tileId:t})));r(n)}),[p,w,r,t]),C=(0,l._8)((e=>{let{snapshot:t}=e;return async e=>{const o=t.getLoadable(a.uL).getValue();if(!o)return void x(e);const i=u().indexOf(o.rowId),l=p().length-1,s=u().indexOf(e);r(m([i,s],[0,l])),n(o)}}),[p,u,x,m,n,r]),O=(0,i.useCallback)((e=>{const n=p().map((n=>({rowId:e,colId:n,tileId:t})));d(n)}),[p,d,t]),j=(0,i.useCallback)((e=>{f({rowId:u()[0],colId:e,tileId:t})}),[f,u,t]),P=(0,i.useCallback)((e=>{j(e);const n=u().map((n=>({rowId:n,colId:e,tileId:t})));r(n)}),[u,j,r,t]),T=(0,l._8)((e=>{let{snapshot:t}=e;return async e=>{const n=t.getLoadable(a.uL).getValue();if(!n)return void P(e);const o=p().indexOf(n.colId),i=u().length-1,l=p().indexOf(e);r(m([0,i],[o,l]))}}),[p,u,P,m,r]),I=(0,i.useCallback)((e=>{const n=u().map((n=>({rowId:n,colId:e,tileId:t})));d(n)}),[u,d,t]),k=(0,i.useCallback)((()=>{f({rowId:u()[0],colId:p()[0],tileId:t})}),[f,u,p,t]),E=(0,i.useCallback)((e=>e===u()[u().length-1]),[u]),D=(0,i.useCallback)(((e,t)=>e===u()[0]&&t===p()[0]),[u,p]);return(0,i.useMemo)((()=>({activateNeighborCell:h,activateCell:g,activateFirstCellInRow:w,activateFirstCellInColumn:j,selectRow:x,appendSelectRow:O,activateFirstCellInTable:k,selectColumn:P,appendSelectColumn:I,isLastRow:E,isFirstCellInTable:D,deselectAllCells:y,removeCellFromSelection:v,selectFromToActive:b,selectRowsFromRowToActive:C,selectColsFromColToActive:T,rowIds:u,colIds:p})),[h,g,w,j,x,O,k,P,I,E,D,y,v,b,C,T,u,p])}},43060:function(e,t,n){"use strict";n.d(t,{QT:function(){return s},sC:function(){return c}});var r=n(59016),o=n(22951),i=n(51718),l=n(71893),a=n(70585);const s="Type something...",c="Type...",d=r.ZP.div.withConfig({displayName:"TextStyles",componentId:"a2k2i1-0"})(["white-space:break-spaces;font-family:",";font-weight:",";font-style:",";font-size:","px;& > div{width:100%;}[data-slate-placeholder] + span{width:1px;}a > [data-slate-node] > [data-slate-leaf] > [data-slate-string]{display:inline !important;}[data-slate-string]{white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word;}",";.slate-editor{.slate-placeholder{h1,h2,h3,p{color:",";margin-top:0;margin-bottom:0;}}}[data-placeholder] .slate-editor{h1,h2,h3,p{height:max-content;[data-slate-node],[data-slate-leaf]{position:relative;max-width:100%;min-height:max-content;}}}.slate-editor,.tomeEditor{outline:none;color:",";padding:0.77em;padding-top:0.54em;padding-bottom:0.54em;",";",";user-select:",";width:100%;font-size:inherit;line-height:inherit;overflow-wrap:break-word;caret-color:",";font-variant-ligatures:none;text-rendering:geometricPrecision;"," *::selection{background-color:",";-webkit-appearance:none;}.selection{background-color:",";}u .selection{text-decoration:underline;}& > *:last-child{margin-bottom:0 !important;}h1,h2,h3{font-family:",";font-weight:",";font-style:",";color:",";margin:0;padding:0;display:block;strong{","}em{","}em strong{","}code{font-family:",";em{font-family:",";font-style:",";}strong{font-family:",";font-weight:",";}}}.display{font-size:",";line-height:1.05;min-height:1.05em;letter-spacing:-0.01em;margin-bottom:0.2em;}.display > * > li{margin-bottom:0.2em;}h1{font-size:",";line-height:1.05;min-height:1.05em;letter-spacing:-0.01em;margin-bottom:0.2em;}h1 > * > li{margin-bottom:0.2em;}h2{font-size:",";line-height:1.1;min-height:1.1em;letter-spacing:-0.01em;margin-bottom:0.5em;}h2 > * > li{margin-bottom:0.5em;}h3{font-size:1em;line-height:1.4;min-height:1.4em;letter-spacing:0;margin-bottom:0.5em;}h3 > * > li{margin-bottom:0.5em;}h1 + h2{margin-top:0.5em;}> p,> ul,> ol,blockquote,blockquote > p{color:",";line-height:1.4;min-height:1.4em;}p{margin-top:0;margin-bottom:0.6em;}.caption,.caption{font-size:",";line-height:1.3;min-height:1.3em;letter-spacing:0;margin-top:0;margin-bottom:0.6em;-webkit-user-select:text;user-select:text;}.caption + .display,.caption + h1,.caption + h2,.caption + h3{margin-top:0;}li{margin-left:0.5em;margin-bottom:0.5em;ul,ol{margin-bottom:0;}}li > p{display:inline;}li li{margin-left:0em;margin-top:0.5em;font-size:1em;}ul{list-style-type:none !important;}li ul,li ol{margin-bottom:0.5em;margin-top:0.5em;}ul > li::before{position:absolute;margin-right:0em;}ul > li::before,ul ul ul ul > li::before{content:'\u2022';margin-left:-1em;transform:scale(1);}ul ul > li::before,ul ul ul ul ul > li::before{position:absolute;content:'\u26ac';transform:scale(0.9);margin-left:-1.05em;}ul ul ul > li::before,ul ul ul ul ul ul > li::before{position:absolute;content:'\u25aa';transform:scale(0.65);margin-left:-1.1em;}",";",";",";li > span:first-child{margin-left:3px;}p + h1,p + h2{margin-top:0.6em;}p + h3,ul + h3,ol + h3{margin-top:1em;}ul + h2,ol + h2{margin-top:0.5em;}ul + p,ol + p{margin-top:0.5em;}blockquote{margin:0;}blockquote > *{"," ",";}blockquote em{","}blockquote strong{","}blockquote em strong{","}blockquote > h1,blockquote > h2,blockquote > h3{border-left-color:",";border-right-color:",";"," strong{","}em{","}em strong{","}}blockquote > ul,blockquote > ol{padding-left:0;",";}ul,ol{margin:0;display:block;padding-inline-start:1em;}ol li::marker{font-variant-numeric:unset;}ol ol ol ol{list-style-type:decimal;}ol ol,ol ol ol ol ol{list-style-type:lower-alpha;}ol ol ol,ol ol ol ol ol ol{list-style-type:lower-roman;}strong{","}em{","}em strong{","}a{"," &:hover{color:inherit;}}code{display:inline-block;font-family:",";background-color:",";border-radius:0.18em;padding:0 0.18em;letter-spacing:0;em{font-family:",";font-style:",";}strong{font-family:",";font-weight:",";}}.mention{background-color:",";border-radius:4px;padding:0.03em 0.1em 0.1em 0.1em;}.mention.selection{background-color:",";}","{color:",";opacity:1;}}"],(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}),(e=>{let{bodyFontSize:t}=e;return t}),(e=>e.$placeholder&&(0,r.iv)(["[data-slate-placeholder]{"," position:static !important;width:fit-content;-webkit-user-select:none;}[data-slate-placeholder] + span{","}[data-slate-leaf]{display:inline-flex;}"],e.$horizontalAlignment===i.KxP.Leading&&"order: 1;",e.$horizontalAlignment!==i.KxP.Trailing&&"position: absolute;")),(e=>{let{theme:t}=e;return t.colors.editorPlaceholder}),(e=>e.$placeholder?e.theme.colors.editorPlaceholder:e.$bodyTextColor??e.theme.colors.editorParagraph),(e=>e.$horizontalAlignment===i.KxP.Center&&`\n      padding-left: ${2*e.innerTilePadding+3}px;\n      padding-right: ${2*e.innerTilePadding+1}px;\n    `),(e=>e.$horizontalAlignment===i.KxP.Trailing&&`\n      padding-left: ${2*e.innerTilePadding+5}px;\n    `),(e=>e.disabled||e.$preview?"none":"text"),(e=>e.theme.colors.contentAccent),o.qc,(e=>e.theme.colors.textSelection),(e=>e.theme.colors.textSelection),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.name}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.weight}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.style}),(e=>e.isThemeLoading?e.$placeholder?e.theme.colors.editorPlaceholder:e.theme.colors.editorHeading:"transparent"),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.heading.name};\n        font-weight: ${t.fonts.content.strong.heading.weight};\n        font-style: ${t.fonts.content.strong.heading.style};`}),(e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.em.heading.name};\n          font-weight: ${t.fonts.content.em.heading.weight};\n          font-style: ${t.fonts.content.em.heading.style};`}),(e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.strongem.heading.name};\n          font-weight: ${t.fonts.content.strongem.heading.weight};\n          font-style: ${t.fonts.content.strongem.heading.style};`}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}),(e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}),(e=>{let{theme:t}=e;return t.fonts.content.em.heading.style}),(e=>{let{theme:t}=e;return t.fonts.content.strong.monospace}),(e=>{let{theme:t}=e;return t.fonts.content.strong.heading.weight}),(e=>e.$isMobile?"2.369em":"4.624em"),(e=>e.$isMobile?"1.777em":"2.776em"),(e=>e.$isMobile?"1.333em":"1.666em"),(e=>e.isThemeLoading?e.$placeholder?e.theme.colors.editorPlaceholder:e.theme.colors.editorParagraph:"transparent"),(e=>e.$isMobile?"0.714em":"0.6849em"),(e=>{let{$horizontalAlignment:t}=e;return t!==i.KxP.Leading&&"\n        // List marker has to follow with horizontal alignment, so for center/trailing alignment, we draw in the inside.\n        ul, ol {\n          list-style-position: inside;\n          padding-inline-start: 0px !important;\n          padding-left: 0px !important;\n        }\n\n        ol > li {\n          position: relative;\n        }\n\n        // center/right aligned lists don't need a left margin.\n        li {\n          margin-left: 0px;\n        }\n\n        // same for nested lists.\n        li li {\n          margin-left: 0px;\n        }\n    "}),(e=>{let{$horizontalAlignment:t}=e;return t===i.KxP.Center&&"\n    ol > li {\n      position: relative;\n    }\n    "}),(e=>{let{$horizontalAlignment:t}=e;return t===i.KxP.Trailing&&"\n        // nested TODO: Figure out a better strategy\n        li li {\n          // padding-right: 2.25em;\n        }\n    "}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.em.paragraph.name};\n        font-weight: ${t.fonts.content.em.paragraph.weight};\n        font-style: ${t.fonts.content.em.paragraph.style};`}),(e=>{let{$horizontalAlignment:t,theme:n}=e;return t===i.KxP.Trailing?`\n        border-right: 0.1333em solid ${n.colors.editorParagraph};\n        padding-right: 0.666em;\n      `:`\n        border-left: 0.1333em solid ${n.colors.editorParagraph};\n        padding-left: 0.666em;\n      `}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.baseline.paragraph.name};\n        font-weight: ${t.fonts.content.baseline.paragraph.weight};\n        font-style: ${t.fonts.content.baseline.paragraph.style};`}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strongem.paragraph.name};\n        font-weight: ${t.fonts.content.strongem.paragraph.weight};\n        font-style: ${t.fonts.content.strongem.paragraph.style};`}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.paragraph.name};\n        font-weight: ${t.fonts.content.strong.paragraph.weight};\n        font-style: ${t.fonts.content.strong.paragraph.style};`}),(e=>{let{theme:t}=e;return t.colors.editorHeading}),(e=>{let{theme:t}=e;return t.colors.editorHeading}),(e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.em.heading.name};\n          font-weight: ${t.fonts.content.em.heading.weight};\n          font-style: ${t.fonts.content.em.heading.style};`}),(e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.strongem.heading.name};\n          font-weight: ${t.fonts.content.strongem.heading.weight};\n          font-style: ${t.fonts.content.strongem.heading.style};`}),(e=>{let{theme:t}=e;return`\n            font-family: ${t.fonts.content.baseline.heading.name};\n            font-weight: ${t.fonts.content.baseline.heading.weight};\n            font-style: ${t.fonts.content.baseline.heading.style};`}),(e=>{let{theme:t}=e;return`\n            font-family: ${t.fonts.content.strong.heading.name};\n            font-weight: ${t.fonts.content.strong.heading.weight};\n            font-style: ${t.fonts.content.strong.heading.style};`}),(e=>{let{$horizontalAlignment:t}=e;return t===i.KxP.Trailing?"\n        padding-inline-start: 1em;\n        padding-inline-end: 0.666em;\n      ":"\n        padding-inline-start: 1.666em;\n      "}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.paragraph.name};\n        font-weight: ${t.fonts.content.strong.paragraph.weight};\n        font-style: ${t.fonts.content.strong.paragraph.style};`}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.em.paragraph.name};\n        font-weight: ${t.fonts.content.em.paragraph.weight};\n        font-style: ${t.fonts.content.em.paragraph.style};`}),(e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strongem.paragraph.name};\n        font-weight: ${t.fonts.content.strongem.paragraph.weight};\n        font-style: ${t.fonts.content.strongem.paragraph.style};`}),l.Z,(e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}),(e=>e.theme.colors.codeBackground),(e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}),(e=>{let{theme:t}=e;return t.fonts.content.em.paragraph.style}),(e=>{let{theme:t}=e;return t.fonts.content.strong.monospace}),(e=>{let{theme:t}=e;return t.fonts.content.strong.paragraph.weight}),(e=>e.theme.colors.contrast8),(e=>e.theme.colors.textSelection),a.H,(e=>{let{theme:t}=e;return t.colors.editorPlaceholder}));t.ZP=d},77206:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r=(0,n(4480).xu)({key:"videoIsBufferedState",default:!1})},31709:function(e,t,n){"use strict";var r=n(67294),o=n(4480),i=n(43028);t.Z=()=>{const e=(0,o.sJ)(i.z);return(0,r.useMemo)((()=>({documentVisibility:e})),[e])}},95636:function(e,t,n){"use strict";n.d(t,{n:function(){return r},z:function(){return o}});const r="https://tome.imgix.net/",o="https://backend.tome.app/"},50135:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(67294),o=n(85893);const i=r.createContext({tomeId:""});t.Z=e=>{let{tomeId:t,children:n}=e;return(0,o.jsx)(i.Provider,{value:{tomeId:t},children:n})}},30383:function(e,t,n){"use strict";n.d(t,{G:function(){return l},d:function(){return a}});var r=n(67294),o=n(85893);const i=(0,r.createContext)(null),l=e=>{let{children:t}=e;const n=(0,r.useRef)({element:null,rowIndex:null,tileIndex:null});return(0,o.jsx)(i.Provider,{value:{videoPlayingRef:n},children:t})},a=()=>{const e=(0,r.useContext)(i);return{videoPlayingRef:null===e||void 0===e?void 0:e.videoPlayingRef}}},48264:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(64310),o=n(41977),i=n(67294),l=n(82326),a=n(51718),s=n(80838);function c(e){let{tomeId:t}=e;const[n]=(0,a.BnV)(),c=(0,i.useRef)(null),d=(0,i.useRef)(null);return(0,i.useCallback)(((e,i,a,u,p,f,h,g,m,b)=>{if(c.current===a)return;r.v.addAction("fileUpload",{uploadVideo:{uploadId:u,initiate:Date.now()}}),c.current=a;let y=0;const v=new s.Z,w=e=>{v.stop(),r.v.addError(e),r.v.addAction("fileUpload",{uploadVideo:{uploadId:u,error:Date.now()}}),c.current=null,null===m||void 0===m||m()};(0,l.Z)((()=>n({variables:{filename:i,tileId:p,pageId:f,tomeId:t}}))).then((async t=>{let{data:n}=t;const{videoId:i,uploadUrl:l}=(null===n||void 0===n?void 0:n.uploadVideo)||{};if(!i||!l)return void r.v.addError(new Error("uploadVideo response returned but with invalid data"));r.v.addAction("fileUpload",{uploadVideo:{videoId:i,uploadId:u,start:Date.now()}}),null===b||void 0===b||b(i);const s={endpoint:l,file:e,method:"PUT",attempts:3,delayBeforeAttempt:1,chunkSize:5120};v.start((()=>{var e;null===(e=d.current)||void 0===e||e.abort(),w(new Error("Upload progress timeout"))}),1e4);try{d.current=(0,o.createUpload)(s)}catch(p){return d.current=null,void w(p)}d.current.on("error",w),d.current.on("progress",(e=>{let{detail:t}=e;const n=t/100;n>y&&(y=n,v.refresh()),null===h||void 0===h||h(n)})),d.current.on("success",(()=>{d.current=null,c.current=null,v.stop(),null===g||void 0===g||g(a),r.v.addAction("fileUpload",{uploadVideo:{videoId:i,uploadId:u,complete:Date.now()}})}))})).catch((e=>{w(e)}))}),[t,n])}},57982:function(e,t,n){"use strict";var r=n(67294);t.Z=e=>{let{disabled:t,onCut:n,onCopy:o,onPaste:i}=e;const l=(0,r.useCallback)((e=>{n&&n(e)}),[n]),a=(0,r.useCallback)((e=>{o&&o(e)}),[o]),s=(0,r.useCallback)((e=>{i&&i(e)}),[i]);(0,r.useEffect)((()=>(t||(document.addEventListener("cut",l),document.addEventListener("copy",a),document.addEventListener("paste",s)),()=>{document.removeEventListener("cut",l),document.removeEventListener("copy",a),document.removeEventListener("paste",s)})),[t,a,l,s])}},88902:function(e,t,n){"use strict";n.d(t,{TT:function(){return i},W9:function(){return a},ye:function(){return l}});var r=n(67294),o=n(26188);let i;!function(e){e.ANNOTATIONS="annotations",e.DRAGGABLE_PANELS="draggablePanels",e.FONTS="fonts",e.LIVE_SEEN_HEADS="liveSeenHeads",e.NARRATION_VIDEO_OVERRIDE="narrationVideoOverride",e.WORKSPACE_COLORS="workspaceColors",e.XL="xl",e.AI_IMAGE_OUTPAINTING="aiImageOutpainting",e.AI_COST_AUTO_TOME_GENERATION="aiCostAutoTomeGeneration",e.AI_COST_TOME_PAGE_GENERATION="aiCostTomePageGeneration",e.AI_COST_DALLE_TILE_GENERATION="aiCostDalleTileGeneration",e.AI_COST_OUTPAINTING="aiCostOutpainting",e.AI_ONBOARDING_TO_AUTOTOME="aiOnboardingToAutoTome",e.CODE_TILE="codeTile",e.DOC_TO_TOME="docToTome",e.PDF_GENERATION="pdfGeneration",e.TEXT_REWRITE_ASYNC="textRewriteAsync",e.TEXT_COLOR="textColor",e.TEXT_COLOR_SIDEBAR="textColorSidebar",e.YOUTUBE_TO_TOME="youtubeToTome",e.AUTOTOME_V2="autotomeV2",e.TILE_CUT_COPY_PASTE="tileCutCopyPaste",e.IMAGE_TILE_ADVANCED_SETTINGS="imageTileAdvancedSettings",e.NEW_USER_REFERRAL_CREDITS="newUserReferralCredits",e.INVITER_REFERRAL_CREDITS="inviterReferralCredits"}(i||(i={}));const l=e=>{const{flags:t}=(0,r.useContext)(o.Z),n=!0===(null===t||void 0===t?void 0:t[e]);return(0,r.useMemo)((()=>n),[n])},a=e=>{const{flags:t}=(0,r.useContext)(o.Z),n=null===t||void 0===t?void 0:t[e];return(0,r.useMemo)((()=>n),[n])}},57451:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294);function o(){const{0:e,1:t}=(0,r.useState)(!1);return(0,r.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}},89202:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294);function o(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e})),t.current}},61505:function(e,t,n){"use strict";var r=n(59499),o=n(50576),i=n(67294),l=n(95821);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=(e,t)=>{const n=(0,i.useCallback)((e=>({id:e.id,tomeId:t,title:e.title||"",type:e.type||"",content:e.content||"",contentLink:e.contentLink||l.mt,imageAttributes:s({},e.imageAttributes),imageTileData:s({},e.imageTileData),videoTileData:s({},e.videoTileData),tableTileData:s({},e.tableTileData),mediaTileData:s({},e.mediaTileData),fileUploadTileData:s({},e.fileUploadTileData),textTileData:s({},e.textTileData),annotations:e.annotations})),[t]),{0:r,1:a}=(0,i.useState)((()=>n(e))),c=(0,i.useCallback)((e=>{a((t=>{delete t.__skipUndo;const n="function"===typeof e?e(t):e;return Object.is(n,t)?t:s(s({},n),{},{__skipSave:!1})}))}),[a]);return(0,i.useEffect)((()=>{const t=n(e);(0,o.Z)(t,r)||a(s(s({},t),{},{__skipSave:!0}))}),[e,n]),{tileData:r,updateTileData:c}}},1313:function(e,t,n){"use strict";n.d(t,{gF:function(){return p},l2:function(){return c},mR:function(){return d},uJ:function(){return u},vk:function(){return f}});var r=n(59499),o=n(64310),i=n(19148),l=n(71932);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let c;!function(e){e.None="none",e.Gray="gray",e.Blue="blue",e.Yellow="yellow",e.Green="green",e.Red="red"}(c||(c={}));class d{constructor(e,t){(0,r.Z)(this,"userText",void 0),(0,r.Z)(this,"themeAccessor",void 0),this.userText=e,this.themeAccessor=t}getBackgroundColor(e){return e.tableColors[this.themeAccessor].background}getTextColor(e){return e.tableColors[this.themeAccessor].text}getTextSelectionColor(e){return e.tableColors[this.themeAccessor].selection}static fromCellColor(e){switch(e){case c.None:return d.NONE;case c.Gray:return d.GRAY;case c.Blue:return d.BLUE;case c.Yellow:return d.YELLOW;case c.Green:return d.GREEN;case c.Red:return d.RED;default:return o.v.addError(new Error("Invalid color"),{cellColor:e}),d.NONE}}}(0,r.Z)(d,"NONE",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.defaultColor"),"none")),(0,r.Z)(d,"GRAY",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.gray"),"gray")),(0,r.Z)(d,"BLUE",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.blue"),"blue")),(0,r.Z)(d,"YELLOW",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.yellow"),"yellow")),(0,r.Z)(d,"GREEN",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.green"),"green")),(0,r.Z)(d,"RED",new d(i.ZP.t("commandPrompt.tiles.table.tableCellDataColor.red"),"red"));const u={slateData:l.yS,color:c.None};function p(e,t){return s(s({},e),{},{slateData:t})}function f(e,t){return s(s({},e),{},{color:t})}},73849:function(e,t,n){"use strict";n.d(t,{Hr:function(){return r},lh:function(){return i},ng:function(){return l},zv:function(){return o}});const r={string:0},o=3,i=1/o,l=(e,t)=>t?1/e:2/e},17382:function(e,t,n){"use strict";n.d(t,{Io:function(){return b},JA:function(){return w},Mj:function(){return m},Sd:function(){return h},VL:function(){return v},Zr:function(){return p},nd:function(){return g},pP:function(){return y}});var r=n(59499),o=n(50576),i=n(67294),l=n(63897),a=n(60314),s=n(35784),c=n(73849);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=e=>(c.Hr.string,l.Ot),f=(e,t)=>{const n=u({},e);return Object.keys(n).forEach((e=>{n[e]*=t,n[e]-=2*a.YF})),n},h=(e,t)=>{e((e=>{var n,r,i;const l="function"===typeof t?t(null===e||void 0===e||null===(n=e.tableTileData)||void 0===n?void 0:n.payload):t;if(l.columns=l.columns.map((e=>{const t=u({},e);return delete t.width,t})),(0,o.Z)(null===e||void 0===e||null===(r=e.tableTileData)||void 0===r?void 0:r.payload,l))return e;const a=l.columns.map((e=>e.accessor)),s={};return a.forEach((t=>{var n;const r=null===(n=e.tableTileData)||void 0===n?void 0:n.columnWidths[t];s[t]=r||c.lh})),u(u({},e),{},{tableTileData:u(u({},e.tableTileData),{},{columnWidths:s,payload:u(u({},null===e||void 0===e||null===(i=e.tableTileData)||void 0===i?void 0:i.payload),l)})})}))},g=(e,t)=>{var n,r;return(0,i.useMemo)((()=>{var n,r,o,i,l,a,s;return{data:(null===(n=e.tableTileData)||void 0===n||null===(r=n.payload)||void 0===r?void 0:r.data)||[],columns:(a=(null===(o=e.tableTileData)||void 0===o||null===(i=o.payload)||void 0===i?void 0:i.columns)||[],s=f(null===(l=e.tableTileData)||void 0===l?void 0:l.columnWidths,t),a.map((e=>"string"===typeof e.accessor&&Object.prototype.hasOwnProperty.call(s,e.accessor)?u(u({},e),{},{width:s[e.accessor]}):u({},e))))}}),[JSON.stringify(null===(n=e.tableTileData)||void 0===n?void 0:n.payload),JSON.stringify(null===(r=e.tableTileData)||void 0===r?void 0:r.columnWidths),t])},m=(e,t)=>{e((e=>{var n;return t===(null===e||void 0===e||null===(n=e.tableTileData)||void 0===n?void 0:n.title)?e:u(u({},e),{},{tableTileData:u(u({},null===e||void 0===e?void 0:e.tableTileData),{},{title:t})})}))},b=(e,t,n,r)=>{e.length===t.length&&e.every(((n,r)=>{var o,i;return(null===(o=e[r])||void 0===o?void 0:o.width)===(null===(i=t[r])||void 0===i?void 0:i.width)}))||r((t=>{const r=((e,t)=>{const n=u({},e);return Object.keys(n).forEach((e=>{n[e]+=2*a.YF,n[e]/=t})),n})((e=>{const t={};for(const n of e)"number"===typeof n.width&&(t[n.id]=n.width);return t})(e),n);return u(u({},t),{},{tableTileData:u(u({},t.tableTileData),{},{columnWidths:r})})}))},y=(e,t,n)=>e?1:t?0:n?4:2,v=(e,t,n,r,o,i)=>{const{scrollLeft:l=0,scrollTop:a=0}=o;let s=l,c=a;const d=e.right-i;if(!(t.top>=e.top&&t.bottom<=e.bottom&&t.left>=e.left&&t.right<=d)){let n=0;const r=t.right-d,o=t.left-e.left;o<0?n=o:r>0&&(n=Math.min(r,o)),s=l+n;let i=0;const u=t.top-e.top,p=t.bottom-e.bottom;u<0?i=u:p>0&&(i=Math.min(p,u)),c=a+i}return 0===r&&(s=0),0===n&&(c=0),{scrollLeft:s,scrollTop:c}},w=e=>{let{width:t,height:n,isMobile:r=!1,preview:o=!1}=e;if(r)return a.oZ;const i=t<=n,l=2*a.YF;return(o?t:t-2*s.QG+l)/(i?1:2)}},84282:function(e,t,n){"use strict";let r;n.d(t,{N:function(){return r},V:function(){return o}}),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Next=4]="Next",e[e.Previous=5]="Previous"}(r||(r={}));const o=(e,t,n,o,i)=>{let l=e.indexOf(n),a=t.indexOf(o);const s=e.length,c=t.length;switch(i){case r.Up:l>0&&(l-=1);break;case r.Down:l+1<s&&(l+=1);break;case r.Left:a>0&&(a-=1);break;case r.Right:a+1<c&&(a+=1);break;case r.Next:a+1<c?a+=1:l+1<s&&(a=0,l+=1);break;case r.Previous:a>0?a-=1:l>0&&(a=c-1,l-=1)}return{rowId:e[l],colId:t[a]}}},95821:function(e,t,n){"use strict";n.d(t,{Gs:function(){return g},gx:function(){return m},ln:function(){return a.l},mt:function(){return u},mz:function(){return s.Z},xR:function(){return a.x}});var r=n(59499),o=n(25934),i=n(51718),l=n(6748),a=n(55075),s=n(74682);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u="",p=["id","tomeId"],f=["tableTileData.columnWidths"];function h(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];const l=Object.keys(t);let a=!1;for(let s=0;s<l.length;s++){const c=l[s],d=[...i,c];if(!(0===o&&p.includes(c)||c.startsWith("__"))){const i=t[c],l=e?e[c]:void 0;if("object"!==typeof i||null===i||Array.isArray(i)||f.includes(d.join(".")))i!==l&&(n[c]=l,r[c]=i,a=!0);else{const e={},t={};h(l,i,t,e,o+1,d)&&(r[c]=e,n[c]=t,a=!0)}}}return a}function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{id:c,tomeId:u}=e,p=r||e.__skipUndo,f=e.__skipRedo,g=t.cache.readFragment({id:`Tile:${c}`,fragment:i.mXG}),m={},b={},y=h(g,e,m,b);if(!y)return null;const v=(0,o.Z)(),w=[{operation:i.C8.UpdateTile,id:c,tile:d({},b)}],x=[{operation:i.C8.UpdateTile,id:c,tile:d({},m)}],C={id:v,tomeId:u,clientId:n,apply:w,revert:x},O=(0,s.Z)(C);return C.__skipRedo=f,(0,l.iO)(t,O,C,p,a),c}function m(e,t,n,r,a,s){const c=n.frontendPageLayout;n.deleteTile(e);const d=[{operation:i.C8.DeleteTile,id:e,page:{id:t.id}},{operation:i.C8.UpdatePage,id:t.id,page:{layout:c.getLayout()}}],u=(0,l.oF)(d,a.cache),p={id:(0,o.Z)(),tomeId:r,clientId:s,apply:d,revert:u};(0,l.iO)(a,p)}},39225:function(e,t,n){"use strict";n.d(t,{$Q:function(){return b},Ag:function(){return f},GW:function(){return d},W8:function(){return u},gM:function(){return p},gS:function(){return m},h6:function(){return h},pq:function(){return g}});var r=n(59499),o=n(25934),i=n(51718),l=n(6748),a=n(71932);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d="New Tome";function u(e,t,n,r){const a=[{operation:i.C8.UpdateTome,id:e,tome:c({},t)}],s=(0,l.oF)(a,n.cache),d={id:(0,o.Z)(),tomeId:e,clientId:r,apply:a,revert:s};(0,l.iO)(n,d)}function p(e,t,n,r){const o=n.cache.readFragment({id:`Tome:${e}`,fragment:i.Z5p});o&&o.title===d&&u(e,{title:t},n,r)}function f(e,t){let{cache:n}=t;const{me:r}=n.readQuery({query:i.fkZ})||{};r&&n.modify({id:n.identify(r),fields:{recentTomes(t,r){let{readField:o}=r;const i=t.nodes.filter((t=>e.id!==o("id",t))),l={__ref:n.identify(e)};return c(c({},t),{},{nodes:[l,...i]})}}})}const h=(e,t)=>{var n;const r=t.id,{me:o}=e.readQuery({query:i.fkZ})||{};o&&(e.modify({id:e.identify(t),fields:{deleted:()=>!0}}),e.modify({id:e.identify(o),fields:{recentTomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>r!==n("id",e)));return c(c({},e),{},{nodes:o})},tomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>r!==n("id",e)));return c(c({},e),{},{nodes:o})},discoverTomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>r!==n("id",e)));return c(c({},e),{},{nodes:o})},deletedTomes(e){const t=[{__ref:`Tome:${r}`,deleted:!0},...e.nodes];return c(c({},e),{},{nodes:t})}}}),o&&null!==(n=o.memberships)&&void 0!==n&&n[0]&&e.modify({id:e.identify(o.memberships[0]),fields:{tomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>r!==n("id",e)));return c(c({},e),{},{nodes:o})}}}))};function g(e,t){var n,r,o,i,l,a;return c(c({},e),{},{me:c(c({},e.me),{},{org:c(c({},null===e||void 0===e||null===(n=e.me)||void 0===n?void 0:n.org),{},{tomes:c(c({},null===e||void 0===e||null===(r=e.me)||void 0===r||null===(o=r.org)||void 0===o?void 0:o.tomes),{},{nodes:[t,...(null===e||void 0===e||null===(i=e.me)||void 0===i||null===(l=i.org)||void 0===l||null===(a=l.tomes)||void 0===a?void 0:a.nodes)||[]]})})})})}function m(e,t){var n,r,o;return c(c({},e),{},{me:c(c({},e.me),{},{sharedWithMeTomes:c(c({},null===e||void 0===e||null===(n=e.me)||void 0===n?void 0:n.sharedWithMeTomes),{},{nodes:[t,...(null===e||void 0===e||null===(r=e.me)||void 0===r||null===(o=r.sharedWithMeTomes)||void 0===o?void 0:o.nodes)||[]]})})})}function b(e){var t,n,r,o;return 1===e.pages.length&&1===(null===(t=e.pages[0].tiles)||void 0===t?void 0:t.length)&&e.pages[0].tiles[0].type===i.YUT.Text&&(!(null!==(n=e.pages[0].tiles[0].textTileData)&&void 0!==n&&null!==(r=n.content)&&void 0!==r&&r.length)||(0,a.xb)(JSON.parse(null===(o=e.pages[0].tiles[0].textTileData)||void 0===o?void 0:o.content)))}},26072:function(e,t,n){"use strict";n.d(t,{CI:function(){return r.CI},Ci:function(){return r.Ci},Cs:function(){return r.Cs},Tj:function(){return r.Tj},j8:function(){return r.j8},xb:function(){return r.xb},yS:function(){return r.yS}});var r=n(71932)},71932:function(e,t,n){"use strict";n.d(t,{CI:function(){return d},Ci:function(){return c},Cs:function(){return s},Tj:function(){return h},cZ:function(){return p},j8:function(){return y},vk:function(){return f},xb:function(){return u},yS:function(){return g}});var r=n(59499),o=n(50576),i=n(94430);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=["numbered-list","bulleted-list"],c=["display","title","heading","subheading","caption","paragraph"],d=e=>s.includes(e)?{type:"list-item"}:"display"===e?{type:"heading",level:0}:"title"===e?{type:"heading",level:1}:"heading"===e?{type:"heading",level:2}:"subheading"===e?{type:"heading",level:3}:"caption"===e?{type:"caption"}:"blockquote"===e?{type:"blockquote"}:{type:"paragraph"},u=e=>0===(0,i.Q)(e).length,p=e=>{if(!u(e)||0===e.length)return{tag:null,className:void 0};if("paragraph"===e[0].type)return{tag:"p",className:void 0};if("caption"===e[0].type)return{tag:"p",className:"caption"};if("heading"===e[0].type){if(0===e[0].level)return{tag:"h1",className:"display"};if(1===e[0].level)return{tag:"h1",className:void 0};if(2===e[0].level)return{tag:"h2",className:void 0};if(3===e[0].level)return{tag:"h3",className:void 0}}return{tag:null,className:void 0}};function f(e,t){if(1!==e.length||1!==t.length)return!1;const n=e[0],r=t[0];return delete n.id,delete r.id,(0,o.Z)(n,r)}function h(e){return"string"===typeof e?[{type:"paragraph",children:[{text:e}]}]:e}const g=h(""),m=[a(a({},g[0]),d("heading"))],b=[a(a({},g[0]),d("title"))],y=e=>e?b:m},83809:function(e,t,n){"use strict";n.d(t,{A:function(){return y}});var r=n(19148),o=n(51718),i=n(95821),l=n(60864),a=n(59499),s=n(62830),c=n.n(s),d=n(68652),u=n(6748),p=n(20543),f=n(16344),h=n(74682);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n,r,i,l){var a;const s=p.Z.fromPage(n),g=s.rowByTileId(e),b=(0,f.ZP)(t.type,1!==(null===(a=g.tiles)||void 0===a?void 0:a.length)),y=g.tileById(e),v=c()(),w=[{operation:o.C8.CreateTile,id:v,tile:m(m({order:y.order},b),t),page:{id:n.id}}],x=(0,u.oF)(w,i.cache),C=(0,d.Z)(s.getLayout());g.replaceTile(y.tileId,v),w.push({operation:o.C8.DeleteTile,id:y.tileId,page:{id:n.id}}),w.push({operation:o.C8.UpdatePage,id:n.id,page:{layout:s.getLayout()}}),x.push({operation:o.C8.RecoverTile,id:y.tileId,page:{id:n.id}}),x.push({operation:o.C8.UpdatePage,id:n.id,page:{layout:C}});const O={id:c()(),tomeId:r,clientId:l,apply:w,revert:x},j=(0,h.Z)(O);return(0,u.iO)(i,j,O),v}const y=function(e,t,n,a,s,c,d){var u;let p=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(1===(null===(u=t.tiles)||void 0===u?void 0:u.length)){const n=b(e,{type:o.YUT.Text},t,s,c,d);return(0,l.ak)({message:r.ZP.t("logic.tile.tileDeletedMessage"),action:"undo"}),(0,l.Dm)(n),void a.closePropertyPanel()}(0,i.gx)(e,t,n,s,c,d),p&&(0,l.ak)({message:r.ZP.t("logic.tile.tileDeletedMessage"),action:"undo"}),(0,l.Dm)(null)}},55075:function(e,t,n){"use strict";n.d(t,{l:function(){return g},x:function(){return m}});var r=n(59499),o=n(62830),i=n.n(o),l=n(64310),a=n(18036),s=n(6748),c=n(20543),d=n(51718),u=n(16344),p=n(74682);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n,r,o,f,g){const m=n.frontendPageLayout;let b=[];const y=[];let v=g;r.forEach((r=>{var o;const s=(0,u.ZP)(r.type,1===(null===(o=m.lastRow)||void 0===o?void 0:o.tiles.length)),p=i()();let f;switch(y.push(p),v.kind){case c.r.NEW_ROW:f=n.addTileToNewRow(p,r.type,v.newRowIdx);break;case c.r.EXISTING_ROW:f=n.addTileToExistingRow(p,{kind:a.DV.NEW_TILE},r.type,v.rowId,v.newTileIdx);break;case c.r.END:f=n.addTileToEndOfPage(p,{kind:a.DV.NEW_TILE},r.type)}const{order:g}=f;b=b.concat([{operation:d.C8.CreateTile,id:p,tile:h(h({order:g},s),r),page:{id:t}},{operation:d.C8.UpdatePage,id:t,page:{layout:m.getLayout()},tome:{id:e}}]);let w=1;const x=n.getTileRowId(p);switch(v.kind){case c.r.EXISTING_ROW:w=v.rowId===x?v.newTileIdx+1:0;break;case c.r.NEW_ROW:case c.r.END:w=1}x?v={kind:c.r.EXISTING_ROW,rowId:x,newTileIdx:w}:(l.v.addError(new Error("Could not find the row id for a recently added tile during multi file drag and drop")),v={kind:c.r.END})}));const w=(0,s.oF)(b,o.cache),x={id:i()(),tomeId:e,clientId:f,apply:b,revert:w},C=(0,p.Z)(x);return(0,s.iO)(o,C,x),y}function m(e,t,n,r,o,i,l){return g(e,t,n,[r],o,i,l)[0]}},70371:function(e,t,n){"use strict";function r(e,t){const{width:n,height:r}=e,o=Math.max(n/t,r);return{width:o*t,height:o}}function o(e,t,n){const{width:r,height:o}=t,i=Math.sqrt(e*o*r/n);return{width:i*n,height:i}}function i(e,t,n){const{posX:r,posY:i,scale:l}=e,{width:a,height:s}=t,{width:c,height:d}=o(l,t,n);return{size:{width:c,height:d},position:{x:a/2-r*c,y:s/2-i*d}}}function l(e,t){const{width:n,height:r}=t,{position:{x:o,y:i},size:{width:l,height:a}}=e;return{posX:(n/2-o)/l,posY:(r/2-i)/a,scale:l*a/(n*r)}}function a(e,t){const{width:n,height:o}=r(e,t),{width:i,height:l}=e;return{posX:.5,posY:.5,scale:n*o/(i*l)}}function s(e,t){const{width:n,height:r}=function(e,t){const{width:n,height:r}=e,o=Math.min(n/t,r);return{width:o*t,height:o}}(e,t),{width:o,height:i}=e;return{posX:.5,posY:.5,scale:n*r/(o*i)}}function c(e,t){return s(e,t)}function d(e,t){return e/t}function u(e,t){return e*t}function p(e,t){return e/t}n.d(t,{Lj:function(){return s},UN:function(){return o},X6:function(){return i},Zn:function(){return c},Zt:function(){return l},ew:function(){return u},iI:function(){return a},lW:function(){return d},le:function(){return p}})},16344:function(e,t,n){"use strict";n.d(t,{SQ:function(){return f},ZP:function(){return m},qV:function(){return h},vJ:function(){return g}});var r=n(59499),o=n(62830),i=n.n(o),l=n(17704),a=n(73054),s=n(33002),c=n(63897),d=n(73849);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let f;!function(e){e[e.Title=1]="Title",e[e.Heading=2]="Heading",e[e.Subtitle=3]="Subtitle"}(f||(f={}));const h=e=>`[{"type":"heading","children":[{"text":""}],"level":${e}}]`;function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={},o=[],l={},a=(0,d.ng)(e,n);for(let i=0;i<e;i++){const e=`col${i+1}`;r[e]=a,o.push({label:`Col ${i+1}`,accessor:e,columnType:d.Hr.string}),l[e]=c.Ot}const s=[];for(let c=0;c<t;c++)s.push(p({id:i()()},l));return{tableTileData:{wrapText:!0,showHeader:!0,showTitle:!1,title:null,columnWidths:r,payload:{columns:o,data:s}}}}function m(e,t){switch(e){case"TEXT":case"TEXT_SLATE":return{textTileData:{content:h(f.Heading)}};case"IMAGE":case"IMAGE_GENERATIVE":return{imageAttributes:p({},l.A),mediaTileData:p({},a.R),fileUploadTileData:p({},a.D),imageTileData:p({},l.l)};case"VIDEO":return{videoTileData:p({},s.C),mediaTileData:p({},a.R),fileUploadTileData:p({},a.D)};case"TABLE":{const e=d.zv;return g(t?e:2*e,3,t)}default:return{}}}},43886:function(e,t,n){"use strict";n.d(t,{f:function(){return i},q:function(){return l}});var r=n(95636),o=n(84081);const i=e=>{var t;return!(!o.g$.includes(e.type)||null===(t=e.imageAttributes)||void 0===t||!t.imagePath)};function l(e){const{imageAttributes:t}=e,{imagePath:n}=t||{};if(n)try{const e=new URL(n);if("s3:"===e.protocol){const t=new URL(r.n);return e.searchParams.set("dl",""),e.toString().replace("s3://",`https://${t.host}/`)}return e.toString()}catch{return}}},83942:function(e,t,n){"use strict";n.d(t,{$V:function(){return w},BX:function(){return g},Jn:function(){return h},OV:function(){return v},T8:function(){return y}});var r=n(4730),o=n(59499),i=n(19148),l=n(51718),a=n(41366),s=n(60864),c=n(95636);const d=["imageAttributes"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f="s3://";function h(e,t,n){const{imagePath:r}=e,{localMediaUrl:o}=t;if(n!==l.Jpv.Ready)return o;if(null!==r&&void 0!==r&&r.startsWith(f))return`/${r.replace(f,"")}`;if(r)try{new URL(r);return r}catch{}}function g(e){const t=y(e);return t?t({src:e,width:2048}):`${c.n+e}?auto=format&fit=max&w=2048`}const m=e=>{let{src:t}=e;return t},b=e=>{let{src:t,width:n}=e,r=t;return n<=100?r=t.replace(/giphy.gif/,"100w.gif"):n<=200&&(r=t.replace(/giphy.gif/,"200w.gif")),r};function y(e){try{if("localhost"===new URL(e).hostname)return e=>{let{src:t,width:n}=e;return`${t}?w=${n}`}}catch(r){}const t=e.startsWith("blob:"),n=!t&&!e.startsWith("/");return e.startsWith("https://media.giphy.com/media/")?b:n||t?m:void 0}const v=(e,t,n,r)=>{e((e=>p(p({},e),{},{contentLink:t,imageAttributes:p(p({},e.imageAttributes),{},{imagePath:t}),imageTileData:p(p({},e.imageTileData),{},{prompt:n}),mediaTileData:p(p({},e.mediaTileData),{},{aspectRatio:null,fillCropCenterX:null,fillCropCenterY:null,fillCropScale:null,mediaFillType:r?l.EwX.Fill:null,mediaStatus:l.Jpv.Ready}),fileUploadTileData:{uploadId:null,createdAt:null}})))},w=(e,t)=>{const n=(0,a.w)(t),o=e=>p(p({},e),{},{contentLink:t,imageAttributes:p(p({},e.imageAttributes),{},{imagePath:t}),mediaTileData:p(p({},e.mediaTileData),{},{aspectRatio:null,fillCropCenterX:null,fillCropCenterY:null,fillCropScale:null,mediaFillType:null,mediaStatus:l.Jpv.Ready}),fileUploadTileData:{uploadId:null,createdAt:null}});let c=o;if(n&&n.tileType===l.YUT.Giphy&&n.tileData){const e=n.tileData,{imageAttributes:t}=e,l=(0,r.Z)(e,d);c=e=>{const n=o(e);return p(p(p({},n),l),{},{imageAttributes:p(p({},n.imageAttributes),t)})},(0,s.ak)({message:i.ZP.t("logic.tile.recognizedGiphyURLMessage")})}e(c)}},47250:function(e,t,n){"use strict";n.d(t,{Dl:function(){return p},TX:function(){return c},_E:function(){return u},ud:function(){return d}});var r=n(59499),o=n(51718),i=n(95821);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){const{annotations:n}=function(e,t){return e.cache.readFragment({id:`Tile:${t}`,fragment:o.mXG,fragmentName:"TileFragment"})}(e,t)||{};return n||[]}function c(e,t,n){return s(e,t).find((e=>e.id===n))}function d(e,t,n,r,o){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>{};const c=s(r,t),d=c&&[...c]||[];d.push(a({},n));const u={id:t,tomeId:e};u.annotations=d,(0,i.Gs)(u,r,o,!1,l)}function u(e,t,n,r,o){const l=[...s(r,t)],a=l.findIndex((e=>e.id===n.id));if(-1===a)return;l[a]=n;const c={id:t,tomeId:e,annotations:l};(0,i.Gs)(c,r,o,!1)}function p(e,t,n,r,o){const l={id:t,tomeId:e,annotations:s(r,t).filter((e=>e.id!==n))};(0,i.Gs)(l,r,o,!1)}},94196:function(e,t,n){"use strict";n.d(t,{y:function(){return u},I:function(){return d}});var r=n(70594),o=n(64310),i=n(51718),l=n(82326),a=n(80838);let s;!function(e){e.SignedUrlFailed="SIGNED_URL_FAILED",e.S3UploadFailed="S3_UPLOAD_FAILED",e.UploadProgressTimeout="UPLOAD_PROGRESS_TIMEOUT"}(s||(s={}));const c=async e=>{let{mutationFn:t,onUploadComplete:n,file:i,onUploadError:c,onUploadProgress:d,uploadId:u}=e;o.v.addAction("fileUpload",{uploadImage:{uploadId:u,initiate:Date.now()}});let p=0;const f=new a.Z,h=(e,t)=>{f.stop(),o.v.addError(t),o.v.addAction("fileUpload",{uploadImage:{uploadId:u,error:Date.now()}}),c(e,i.type)},g=new AbortController;let m;f.start((()=>{g.abort(),h(s.UploadProgressTimeout,new Error("Upload progress timeout"))}),1e4);try{m=await(0,l.Z)(t)}catch(w){return void h(s.SignedUrlFailed,w)}const{uploadUrl:b,onUploadCompleteData:y}=m;if(!b)return void h(s.SignedUrlFailed,new Error("Failed to create upload signature"));const v={headers:{"Content-Type":i.type},validateStatus:e=>e>=200&&e<300,onUploadProgress:e=>{const t=e.progress??0;t>p&&(p=t,f.refresh()),null===d||void 0===d||d(t)},signal:g.signal};o.v.addAction("fileUpload",{uploadImage:{uploadId:u,start:Date.now()}});try{await r.Z.create(v).put(b,i)}catch(w){return void h(s.S3UploadFailed,w)}o.v.addAction("fileUpload",{uploadImage:{uploadId:u,complete:Date.now()}}),f.stop(),n(y)},d=e=>{let{apolloClient:t,tomeId:n,onUploadComplete:r,file:o,onUploadError:l,onUploadProgress:a,uploadId:s}=e;c({mutationFn:async()=>{var e;const r=null===(e=(await t.mutate({mutation:i.iwV,variables:{fileName:o.name,fileType:o.type,tomeId:n}})).data)||void 0===e?void 0:e.signUpload;return{uploadUrl:null===r||void 0===r?void 0:r.url,onUploadCompleteData:{imagePath:null===r||void 0===r?void 0:r.imagePath,imageUrlTile:null===r||void 0===r?void 0:r.imageUrlTile,imageUrlPreview:null===r||void 0===r?void 0:r.imageUrlPreview}}},onUploadComplete:r,file:o,onUploadError:l,onUploadProgress:a,uploadId:s})},u=e=>{let{apolloClient:t,orgId:n,onUploadComplete:r,file:o,onUploadError:l,onUploadProgress:a,uploadId:s}=e;c({mutationFn:async()=>{var e;const r=null===(e=(await t.mutate({mutation:i._su,variables:{fileName:o.name,fileType:o.type,orgId:n}})).data)||void 0===e?void 0:e.signLogoUpload;return{uploadUrl:null===r||void 0===r?void 0:r.uploadUrl,onUploadCompleteData:{imagePath:null===r||void 0===r?void 0:r.imagePath}}},file:o,onUploadComplete:r,onUploadError:l,onUploadProgress:a,uploadId:s})}},4034:function(e,t,n){"use strict";n.d(t,{xs:function(){return u},sD:function(){return d},f3:function(){return c},t2:function(){return f},Z5:function(){return p}});var r=n(67294),o=n(4480),i=n(59499);class l{constructor(e){var t=this;(0,i.Z)(this,"setPropertyPanelStack",void 0),(0,i.Z)(this,"closePropertyPanel",(()=>{this.setPropertyPanelStack({stack:[],isManuallySet:!1})})),(0,i.Z)(this,"resetIsManuallySet",(()=>{this.setPropertyPanelStack((e=>({stack:e.stack,isManuallySet:!1})))})),(0,i.Z)(this,"pushPropertyPanel",(e=>{this.setPropertyPanelStack((t=>{const n=[...t.stack];return n.push(e),{stack:n,isManuallySet:!1}}))})),(0,i.Z)(this,"pushPropertyPanels",(e=>{this.setPropertyPanelStack((t=>({stack:[...t.stack,...e],isManuallySet:!1})))})),(0,i.Z)(this,"popPropertyPanel",(()=>{this.setPropertyPanelStack((e=>{if(0===e.stack.length)return e;const t=[...e.stack];return t.pop(),{stack:t,isManuallySet:!1}}))})),(0,i.Z)(this,"setPropertyPanel",(e=>{this.setPropertyPanelStack((t=>{const n="function"===typeof e?e(l.getCurrentPropertyPanel(t.stack)):e;return{stack:null===n?[]:[n],isManuallySet:!1}}))})),(0,i.Z)(this,"setPropertyPanels",(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.setPropertyPanelStack({stack:e,isManuallySet:n})})),this.setPropertyPanelStack=e}static getCurrentPropertyPanel(e){return e[e.length-1]??null}}var a=l;const s=(0,o.cn)({key:"propertyPanelStackState",default:{stack:[],isManuallySet:!1}}),c=()=>{const e=(0,o.sJ)(s),t=a.getCurrentPropertyPanel(e.stack);return(0,r.useMemo)((()=>t),[t])},d=()=>(0,o.sJ)(s).isManuallySet,u=()=>{const e=(0,o.sJ)(s);return(0,r.useCallback)((t=>e.stack.includes(t)),[e])},p=()=>(0,o.sJ)(s).stack.length,f=()=>{const e=(0,o.Zl)(s);return(0,r.useMemo)((()=>new a(e)),[e])}},90170:function(e,t){"use strict";var n;!function(e){e.ADD_TILE="addTile",e.ANNOTATION="annotation",e.COLOR_PICKER="colorPicker",e.TEXT_COLOR_PICKER="textColorPicker",e.CUSTOMIZE="customize",e.RECORD="record",e.TILE="tile",e.IMAGE_GENERATION_HISTORY="imageGenerationHistory",e.IMAGE_EDIT="imageEdit",e.OUTPAINTING="outpainting",e.IMAGE_CREATE="imageCreate"}(n||(n={})),t.Z=n},97210:function(e,t,n){"use strict";n.d(t,{Hl:function(){return i},LN:function(){return c},Qc:function(){return d},Qf:function(){return a},f8:function(){return s},tF:function(){return l}});var r=n(4480),o=n(44466);const i=(0,r.cn)({key:"createAnnotationsModeState",default:!1}),l=(0,r.cn)({key:"displayAnnotationsOverlaysState",default:!0}),a=(0,r.cn)({key:"activeAnnotationState",default:null}),s=(0,r.cn)({key:"annotationCreateCursorActiveState",default:!0}),c=(0,r.cn)({key:"annotationCreationOptionsState",default:{color:o.wk.DEFAULT,line:o.Cl.HAIRLINE,displayType:o.O9.CLICK}}),d=(0,r.cn)({key:"inProgressAnnotationState",default:null})},78963:function(e,t,n){"use strict";n.d(t,{VJ:function(){return l},cm:function(){return o},s5:function(){return i}});var r=n(4480);const o=(0,r.cn)({key:"imageCropModeState",default:!1}),i=(0,r.cn)({key:"videoCropModeState",default:!1}),l=(0,r.cn)({key:"cropModeInitialState",default:null})},37865:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});const r=(0,n(4480).xu)({key:"mediaAlertsState",default:null})},52260:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});const r=(0,n(4480).cn)({key:"showAttributionState",default:!0})},85769:function(e,t,n){"use strict";n.d(t,{$A:function(){return O},Ao:function(){return y},DS:function(){return m},SI:function(){return d},Tc:function(){return w},YS:function(){return b},qh:function(){return C},sO:function(){return u},uL:function(){return h},wK:function(){return g},yg:function(){return p}});var r=n(59499),o=n(4480);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const a=(0,o.cn)({key:"activeCellState",default:null}),s=(0,o.cn)({key:"selectedCellsState",default:[]}),c=(0,o.xu)({key:"tableTileCellState",default:{active:!1,selected:!1}}),d=(0,o.nZ)({key:"activeCellSelector",get:e=>{let{get:t}=e;return t(a)}}),u=(0,o.nZ)({key:"selectedCellsSelector",get:e=>{let{get:t}=e;return t(s)}}),p=(0,o.nZ)({key:"multipleCellsSelectedSelector",get:e=>{let{get:t}=e;return t(s).length>1}});function f(e){return Object.values(e).join("-")}const h=(0,o.nZ)({key:"setActiveCellSelector",get:e=>{let{get:t}=e;return t(a)},set:(e,t)=>{let{get:n,set:r}=e;const i=n(a);i&&r(c(i),(e=>l(l({},e),{},{active:!1}))),t instanceof o.nY?r(a,null):(r(c(t),(e=>l(l({},e),{},{active:!0}))),r(a,t))}}),g=(0,o.nZ)({key:"setSelectedCellsSelector",get:e=>{let{get:t}=e;return t(s)},set:(e,t)=>{let{get:n,set:r}=e;n(s).forEach((e=>{r(c(e),(e=>l(l({},e),{},{selected:!1})))})),t.forEach((e=>{r(c(e),(e=>l(l({},e),{},{selected:!0})))})),r(s,t)}}),m=(0,o.nZ)({key:"appendSelectedCellsSelector",get:e=>{let{get:t}=e;return t(s)},set:(e,t)=>{let{set:n}=e;t.forEach((e=>{n(c(e),(e=>l(l({},e),{},{selected:!0})))})),n(s,(e=>{const n=[...e],r=e.map((e=>f(e)));return t.forEach((e=>{r.includes(f(e))||n.push(e)})),e.length===n.length?e:n}))}}),b=(0,o.CG)({key:"activeCellSelectorByKey",get:e=>t=>{let{get:n}=t;return n(c(e)).active},set:e=>(t,n)=>{let{set:r}=t;n&&r(h,e)}}),y=(0,o.CG)({key:"selectedCellSelectorByKey",get:e=>t=>{let{get:n}=t;return n(c(e)).selected},set:e=>(t,n)=>{let{set:r}=t;r(c(e),(e=>l(l({},e),{},{selected:n}))),r(s,n?t=>t.map((e=>f(e))).includes(f(e))?t:[...t,e]:t=>[...t].filter((t=>f(t)!==f(e))))}}),v=(0,o.xu)({key:"tableRowState",default:{height:0}}),w=(0,o.CG)({key:"rowHeights",get:e=>t=>{let{get:n}=t;return n(v(e)).height},set:e=>(t,n)=>{let{set:r}=t;"number"===typeof n&&r(v(e),(e=>e.height!==n?{prev:e,height:n}:e))}}),x=(0,o.xu)({key:"tableColumnState",default:{resizeHandleShowing:!1,dragHandleShowing:!1}}),C=(0,o.CG)({key:"resizeHandleHoverColumn",get:e=>t=>{let{get:n}=t;return n(x(e)).resizeHandleShowing},set:e=>(t,n)=>{let{get:r,set:o}=t;if("boolean"===typeof n){const t=x(e);o(t,l(l({},r(t)),{},{resizeHandleShowing:n}))}}}),O=(0,o.CG)({key:"dragHandleHoverColumn",get:e=>t=>{let{get:n}=t;return n(x(e)).dragHandleShowing},set:e=>(t,n)=>{let{get:r,set:o}=t;if("boolean"===typeof n){const t=x(e);o(t,l(l({},r(t)),{},{dragHandleShowing:n}))}}})},33340:function(e,t,n){"use strict";n.d(t,{L2:function(){return s},TU:function(){return o},X1:function(){return i},bP:function(){return d},j3:function(){return a},mK:function(){return u},pt:function(){return l},xZ:function(){return c}});var r=n(4480);const o=(0,r.xu)({key:"disableCustomDropdownPerTileState",default:!1}),i=(0,r.cn)({key:"embedTileOverrideState",default:null}),l=(0,r.xu)({key:"nullTileSelectedInputState",default:!1}),a=(0,r.xu)({key:"imageGenerativeTileNullStatePromptState",default:null}),s=(0,r.xu)({key:"imageGenerativeTilePromptState",default:""}),c=(0,r.xu)({key:"imageGenerativeTileGeneratedImagesState",default:null}),d=(0,r.xu)({key:"outpaintPreviewSelectionState",default:null}),u=(0,r.cn)({key:"outpaintInputState",default:null})},55204:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});const r=(0,n(4480).xu)({key:"globalTomeOverlayState",default:!1})},10115:function(e){var t=function(e){let t,n;this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),"VIDEO"===e.tagName?(t=e.videoWidth,n=e.videoHeight):(t=e.width,n=e.height),document.body.appendChild(this.canvas),this.canvas.width=t,this.canvas.height=n,this.width=t,this.height=n,this.context.drawImage(e,0,0,this.width,this.height)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.update=function(e){this.context.putImageData(e,0,0)},t.prototype.getPixelCount=function(){return this.width*this.height},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},t.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)},t.prototype.markPixels=function(e){for(var t=this.context.getImageData(0,0,this.width,this.height),n=0;n<e.length;n++){var r=e[n];t.data[r++]=255,t.data[r++]=0,t.data[r++]=0,t.data[r++]=255}this.context.putImageData(t,0,0)};var n=function(){};n.prototype.getBackGroundColor=function(e,t){var n=this.getPalette(e,5,t);return n.length>0?n[0]:null};if(n.prototype.getPalette=function(e,n,r){"undefined"===typeof n&&(n=10),"undefined"===typeof r&&(r=10);var i,l=new t(e),a=l.getImageData().data,s=Math.round(.01*l.getWidth()),c=Math.round(.01*l.getHeight()),d=[],u=[],p=0,f=0;i=c*l.getWidth();for(var h=0;h<i;h+=r)y=a[(b=4*h)+0],v=a[b+1],w=a[b+2],a[b+3]>=125?(d.push([y,v,w]),u.push(b)):p+=1,f+=1;i=l.getHeight()*l.getWidth();for(h=(l.getHeight()-c)*l.getWidth();h<i;h+=r)y=a[(b=4*h)+0],v=a[b+1],w=a[b+2],a[b+3]>=125?(d.push([y,v,w]),u.push(b)):p+=1,f+=1;i=(l.getHeight()-c)*l.getWidth();h=c*l.getWidth();for(var g=0,m=0;h<i;h+=r)y=a[(b=4*h)+0],v=a[b+1],w=a[b+2],a[b+3]>=125?(d.push([y,v,w]),u.push(b)):p+=1,f+=1,(g+=r)>=s&&(h=(c+(m+=r))*l.getWidth(),g=0);i=(l.getHeight()-c)*l.getWidth();var b,y,v,w;for(h=c*l.getWidth()+(l.getWidth()-s-r),g=0,m=0;h<i;h+=r)y=a[(b=4*h)+0],v=a[b+1],w=a[b+2],a[b+3]>=125?(d.push([y,v,w]),u.push(b)):p+=1,f+=1,(g+=r)>=s&&(h=(c+(m+=r))*l.getWidth()+(l.getWidth()-s-r),g=0);if(p/f>.7)return l.removeCanvas(),[0];{const e=new Map;d.forEach((t=>{const n=function(e,t,n){return(255&e)<<16|(255&t)<<8|255&n}(...t);e.get(n)?e.set(n,e.get(n)+1):e.set(n,1)}));const t=Math.max(...e.values());if(t/f>.7)return l.removeCanvas(),[...e.keys()].filter((n=>e.get(n)===t)).map((e=>function(e){return[e>>16&255,e>>8&255,255&e]}(e)))}var x=o.quantize(d,n);if(!x)return l.removeCanvas(),[];var C=x.palette();return l.removeCanvas(),C},!r)var r={map:function(e,t){var n={};return t?e.map((function(e,r){return n.index=r,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,r,o){return n.index=o,e+t.call(n,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?r.map(e,t):e)}};var o=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function n(e,t,n,r,o,i,l){var a=this;a.r1=e,a.r2=t,a.g1=n,a.g2=r,a.b1=o,a.b2=i,a.histo=l}function o(){this.vboxes=new t((function(e,t){return r.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function i(t,n){if(n.count()){var o=n.r2-n.r1+1,i=n.g2-n.g1+1,l=n.b2-n.b1+1,a=r.max([o,i,l]);if(1==n.count())return[n.copy()];var s,c,d,u,p=0,f=[],h=[];if(a==o)for(s=n.r1;s<=n.r2;s++){for(u=0,c=n.g1;c<=n.g2;c++)for(d=n.b1;d<=n.b2;d++)u+=t[e(s,c,d)]||0;p+=u,f[s]=p}else if(a==i)for(s=n.g1;s<=n.g2;s++){for(u=0,c=n.r1;c<=n.r2;c++)for(d=n.b1;d<=n.b2;d++)u+=t[e(c,s,d)]||0;p+=u,f[s]=p}else for(s=n.b1;s<=n.b2;s++){for(u=0,c=n.r1;c<=n.r2;c++)for(d=n.g1;d<=n.g2;d++)u+=t[e(c,d,s)]||0;p+=u,f[s]=p}return f.forEach((function(e,t){h[t]=p-e})),g(a==o?"r":a==i?"g":"b")}function g(e){var t,r,o,i,l,a=e+"1",c=e+"2",d=0;for(s=n[a];s<=n[c];s++)if(f[s]>p/2){for(o=n.copy(),i=n.copy(),l=(t=s-n[a])<=(r=n[c]-s)?Math.min(n[c]-1,~~(s+r/2)):Math.max(n[a],~~(s-1-t/2));!f[l];)l++;for(d=h[l];!d&&f[l-1];)d=h[--l];return o[c]=l,i[a]=o[c]+1,[o,i]}}}return n.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,r=n.histo;if(!n._count_set||t){var o,i,l,a=0;for(o=n.r1;o<=n.r2;o++)for(i=n.g1;i<=n.g2;i++)for(l=n.b1;l<=n.b2;l++)index=e(o,i,l),a+=r[index]||0;n._count=a,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,r=n.histo;if(!n._avg||t){var o,i,l,a,s=0,c=0,d=0,u=0;for(i=n.r1;i<=n.r2;i++)for(l=n.g1;l<=n.g2;l++)for(a=n.b1;a<=n.b2;a++)s+=o=r[e(i,l,a)]||0,c+=o*(i+.5)*8,d+=o*(l+.5)*8,u+=o*(a+.5)*8;n._avg=s?[~~(c/s),~~(d/s),~~(u/s)]:[~~(8*(n.r1+n.r2+1)/2),~~(8*(n.g1+n.g2+1)/2),~~(8*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var t=this,n=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},o.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,o=this.vboxes,i=0;i<o.size();i++)((n=Math.sqrt(Math.pow(e[0]-o.peek(i).color[0],2)+Math.pow(e[1]-o.peek(i).color[1],2)+Math.pow(e[2]-o.peek(i).color[2],2)))<t||void 0===t)&&(t=n,r=o.peek(i).color);return r},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return r.naturalOrder(r.sum(e.color),r.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(l,a){if(!l.length||a<2||a>256)return!1;var s=function(t){var n,r,o,i,l=new Array(32768);return t.forEach((function(t){r=t[0]>>3,o=t[1]>>3,i=t[2]>>3,n=e(r,o,i),l[n]=(l[n]||0)+1})),l}(l);s.forEach((function(){0}));var c=function(e,t){var r,o,i,l=1e6,a=0,s=1e6,c=0,d=1e6,u=0;return e.forEach((function(e){r=e[0]>>3,o=e[1]>>3,i=e[2]>>3,r<l?l=r:r>a&&(a=r),o<s?s=o:o>c&&(c=o),i<d?d=i:i>u&&(u=i)})),new n(l,a,s,c,d,u,t)}(l,s),d=new t((function(e,t){return r.naturalOrder(e.count(),t.count())}));function u(e,t){for(var n,r=1,o=0;o<1e3;)if((n=e.pop()).count()){var l=i(s,n),a=l[0],c=l[1];if(!a)return;if(e.push(a),c&&(e.push(c),r++),r>=t)return;if(o++>1e3)return}else e.push(n),o++}d.push(c),u(d,.75*a);for(var p=new t((function(e,t){return r.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));d.size();)p.push(d.pop());u(p,a-p.size());for(var f=new o;p.size();)f.push(p.pop());return f}}}();e.exports&&(e.exports=n)},63897:function(e,t,n){"use strict";n.d(t,{Ot:function(){return s},qC:function(){return l},vB:function(){return a}});var r=n(1313),o=n(71932);function i(e){return Array.isArray(e)}const l=e=>JSON.stringify(e),a=e=>{try{const n=JSON.parse(e);return void 0!==(t=n).color&&i(t.slateData)?n:i(n)?{slateData:n,color:r.l2.None}:{slateData:o.yS,color:r.l2.None}}catch(n){return{slateData:(0,o.Tj)(e),color:r.l2.None}}var t},s=l(r.uJ)},24955:function(e,t,n){"use strict";n.d(t,{$i:function(){return m},AL:function(){return s},Gj:function(){return T},Io:function(){return d},M2:function(){return c},N3:function(){return u},Pb:function(){return P},QQ:function(){return g},Qs:function(){return v},ck:function(){return x},lW:function(){return h},xV:function(){return w}});var r=n(64310),o=n(51718),i=n(10115),l=n.n(i),a=n(84081);const s=o.EwX.Fit,c="dark",d=o.ubC.None,u=new Map([["light","white"],["dark","transparent"]]),p=new Set(["image/apng","image/gif","image/jpeg","image/jpg","image/png","image/svg+xml","image/webp","image/bmp","image/tiff","image/heif","image/heic"]),f=new Set([".heic",".heif",".cr2",".nef",".psd"]),h=`image/*,${[...f].join(",")}`;function g(e){var t;if(p.has(e.type))return!0;const n=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return!!f.has(`.${n}`)}function m(e){if("white"===e)return 1;if("transparent"===e)return 0;let t=0,n=0,r=0;4===e.length?(t=Number(`0x${e[1]}${e[1]}`),n=Number(`0x${e[2]}${e[2]}`),r=Number(`0x${e[3]}${e[3]}`)):7===e.length&&(t=Number(`0x${e[1]}${e[2]}`),n=Number(`0x${e[3]}${e[4]}`),r=Number(`0x${e[5]}${e[6]}`)),t/=255,n/=255,r/=255;const o=Math.min(t,n,r);let i=0;return i=(Math.max(t,n,r)+o)/2,i=+(100*i).toFixed(1)/100,i}const b=(e,t,n)=>{let r=0,o=0,i=0,l=0;const a=e.length,s=Math.floor(a*t),c=Math.floor(a*n);for(let d=s;d<c;d+=4){r=e[d],o=e[d+1],i=e[d+2];l+=(Math.max(r,o,i)+Math.min(r,o,i))/2}return l=Math.floor(l/((c-s)/4)),l/255},y=(e,t,n)=>{const r=document.createElement("canvas"),o=e.naturalWidth,i=e.naturalHeight;r.width=o,r.height=i;const l=r.getContext("2d");l.drawImage(e,0,0);const a=l.getImageData(0,0,o,i);return b(a.data,t,n)},v=(e,t,n)=>{const r=e.current;if(!r)return 0;const o=document.createElement("canvas"),i=r.videoWidth,l=r.videoHeight;o.width=i,o.height=l;const a=o.getContext("2d");if(a.drawImage(r,0,0,i,l),i&&l){const e=a.getImageData(0,0,i,l);return b(e.data,t,n)}return 0};function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return void t(0);const o=new Image;let i;o.src=e,o.crossOrigin="anonymous",o.onload=()=>{i=y(o,n,r),t(i)}}function x(e){return a.g$.includes(e)}const C=(e,t,n)=>`#${[e,t,n].map((e=>{const t=e.toString(16);return 1===t.length?`0${t}`:t})).join("")}`,O=(e,t,n)=>255===e&&255===t&&255===n,j=(e,t,n)=>0===e&&0===t&&0===n,P=e=>{let t;try{t=(new(l())).getBackGroundColor(e)}catch(o){let t,n;if("VIDEO"===e.tagName){const r=e;t=r.videoWidth,n=r.videoHeight}else if("IMG"===e.tagName){const r=e;t=r.width,n=r.height}r.v.addError(o,{sourceElementTag:e.tagName,sourceWidth:t,sourceHeight:n})}let n=null;return t&&(4===t.length&&0===t[3]?n="dark":3===t.length&&(n=O(t[0],t[1],t[2])?"light":j(t[0],t[1],t[2])?"black":C(t[0],t[1],t[2]))),n};function T(e,t){return!(n=null===e||void 0===e?void 0:e.imagePath)||0===n.length||t===o.Jpv.UploadInProgress;var n}},36947:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});const r=e=>t=>{e.forEach((e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)}))}},22449:function(e,t){"use strict";t.Z=function(){}},94430:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},V:function(){return i}});var r=n(77493);const o=e=>0===e.length?"":e.map((e=>r.NB.string(e))).join(""),i=e=>{const t=null===e||void 0===e?void 0:e.attributes.getNamedItem("data-slate-string"),n=null===e||void 0===e?void 0:e.attributes.getNamedItem("data-slate-zero-width");return t||n}},24603:function(e,t,n){"use strict";n.d(t,{B0:function(){return l},oA:function(){return a},tj:function(){return o},xZ:function(){return i}});var r=n(51718);const o=e=>{if(!e)return"flex-start";return{top:"flex-start",center:"center",bottom:"flex-end",distribute:"space-between"}[e]||"flex-start"},i=e=>e||r.Q4P.Top,l=e=>{if(!e)return"left";return{leading:"left",center:"center",trailing:"right"}[e]||"left"},a=e=>e||r.KxP.Leading},12459:function(e,t,n){"use strict";n.d(t,{$M:function(){return i},Ar:function(){return o},Ch:function(){return h},Ik:function(){return a},JB:function(){return c},L$:function(){return f},Oo:function(){return d},Y_:function(){return x},ah:function(){return u},pL:function(){return b},qR:function(){return y},r3:function(){return g},uI:function(){return w},uJ:function(){return s},uX:function(){return p},y1:function(){return v},yq:function(){return m},zN:function(){return l}});var r=n(99747);let o;!function(e){e.MENTIONS="mentions",e.TYPE_SCALES="typeScales",e.EXPANDED_TYPE_SCALES="expandedTypeScales",e.LINKS="links",e.MARKS="marks",e.REWRITE="rewrite",e.LISTS="lists",e.HTML_TABLES="html_tables",e.STRICT_MODE="strict_mode",e.COLORS="colors"}(o||(o={}));const i=Object.values(o).filter((e=>e!==o.STRICT_MODE));Object.values(o);let l;!function(e){e.BOLD="bold",e.ITALIC="italic",e.CODE="code",e.STRIKETHROUGH="strikethrough",e.UNDERLINED="underlined"}(l||(l={}));const a=Object.values(l),s="link",c="paragraph",d="caption",u="blockquote",p="heading",f="display",h="title",g="heading",m="subheading",b="list-item",y="bulleted-list",v="numbered-list",w=()=>{const e=(0,r.U7P)();if(!e)throw new Error("Attempting to get a Slate editor outside of a <Slate> component");return e},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.JIX)(e)}},9309:function(e,t,n){"use strict";n.d(t,{T8:function(){return c},aE:function(){return h},uT:function(){return s}});var r=n(59499),o=n(99747),i=n(77493);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=(e,t,n)=>{if((e=>{const[t]=(0,o.tVv)(e,{match:e=>!i.ML.isEditor(e)&&i.W_.isElement(e)&&"link"===e.type});return!!t})(e)&&(e=>{(0,o.LKm)(e,{match:e=>!i.ML.isEditor(e)&&i.W_.isElement(e)&&"link"===e.type})})(e),!t||!t.length)return;const r=n||e.selection,l=r&&i.e6.isCollapsed(r),a={type:"link",url:t,children:l?[{text:t}]:[]};l?(0,o.s2K)(e,a):(0,o.qEX)(e,a,{at:r,split:!0})},c=(e,t,n)=>{s(e,t,n)},d=e=>{let t;try{t=new URL(e)}catch(n){return!1}return t.pathname.replace(/\/+$/,"")===window.location.pathname},u={"data-tome-bypass-tap-navigation":"SlateTextTile__Link"},p=a(a({},u),{},{rel:"noreferrer noopener",target:"_blank"}),f=a({},u),h=e=>d(e)?f:p},23402:function(e,t,n){"use strict";var r=n(77493);const o=e=>r.NB.string(e),i=e=>e.map(o).join("").length,l=(e,t,n)=>{let a=t;return e.reduce(((e,t)=>{const s=o(t).length;return a+s<=n?(e.push(t),a+=s,e):(a<n&&(r.xv.isText(t)?(t.text=t.text.slice(0,n-a),a+=t.text.length):(t.children=l(t.children,0,n-a),a+=i(t.children)),e.push(t)),e)}),[])};t.Z=e=>t=>{const{insertText:n,insertBreak:o,insertFragment:a}=t;if(!e)return t;const s=e=>i(e);return t.insertText=r=>{const o=s(t.children);if(o+r.length<=e)return n(r),!0;const i=e-o;return i>0?(n(r.substr(0,i)),!0):(n(" "),t.deleteBackward("character"),!1)},t.insertData=e=>{const n=e.getData("application/x-slate-fragment");if(n){const e=decodeURIComponent(window.atob(n)),r=JSON.parse(e);t.insertFragment(r)}else t.insertTextData(e)},t.insertTextData=e=>{const n=e.getData("text/plain").trim().split(/\r\n|\r|\n/);let o=!1,i=!1;for(const l of n){o&&r.YR.splitNodes(t,{always:!0});const e=t.insertText(l);if(i||(i=e),!e)break;o=!0}return i},t.insertBreak=()=>{s(t.children)>=e||o()},t.insertFragment=r=>{const o=s(t.children);if(o+i(r)<=e)return void a(r);const c=l(r,o,e);c.length>0?a(c):(n(" "),t.deleteBackward("character"))},t}},58874:function(e,t){"use strict";t.Z=e=>{const{insertText:t}=e;return e.insertTextData=e=>{const n=e.getData("text/plain").replace(/\r\n|\r|\n/g," ").trim();return t(n),!0},e}},34425:function(e,t,n){"use strict";function r(e,t){return e-t}function o(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}function i(e,t){return new Date(t).getTime()-new Date(e).getTime()}n.d(t,{Fq:function(){return o},hT:function(){return i},uR:function(){return r}})},41366:function(e,t,n){"use strict";n.d(t,{Q:function(){return d},w:function(){return c}});var r=n(51718);function o(e){let t;try{t=new URL(e)}catch{}if(!t)return null;if("airtable.com"!==t.hostname&&"www.airtable.com"!==t.hostname)return null;return`https://airtable.com/embed/${t.pathname.replace(/^\/+|\/+$/g,"")}?backgroundColor=grayLight`}function i(e){let t;try{t=new URL(e)}catch{}return t?"figma.com"!==t.hostname&&"www.figma.com"!==t.hostname?null:"https://www.figma.com/embed?embed_host=astra&url=".concat(e):null}function l(e){let t,n;try{if(t=new URL(e.replace(/\/$/,"")),"miro.com"!==t.hostname&&"www.miro.com"!==t.hostname)return null;const r=t.pathname.split("/").filter((e=>e.length));n=r[r.length-1]}catch(r){return null}return`https://miro.com/app/embed/${n}?autoplay=yep`}function a(e){let t;try{t=new URL(e)}catch(o){return null}if("framer.com"!==t.hostname&&"www.framer.com"!==t.hostname)return null;const[,n,...r]=t.pathname.split("/");return"embed"===n?e:"share"===n?`https://${t.hostname}/embed/${r.join("/")}`:null}function s(e){let t;try{t=new URL(e)}catch(r){return null}if(!t.hostname.endsWith(".looker.com"))return null;t.searchParams.set("allow_login_screen","true"),t.searchParams.set("embed_domain",window.location.origin);const[,n]=t.pathname.split("/");return"embed"===n?t.href:["looks","explore","dashboards","dashboards-legacy","dashboards-next"].includes(n)?(t.pathname=`/embed${t.pathname}`,t.href):null}function c(e){let t,n,o;try{t=new URL(e)}catch{}if(!t)return{};switch(t.hostname){case"media.giphy.com":n=r.YUT.Giphy,o={contentLink:t.href,imageAttributes:{imagePath:t.href},mediaTileData:{mediaStatus:r.Jpv.Ready}};break;case"www.giphy.com":case"giphy.com":{const[,e,i]=t.pathname.split("/");if("gifs"===e&&i){const e=i.split("-"),t=`https://media.giphy.com/media/${e[e.length-1]}/giphy.gif`;n=r.YUT.Giphy,o={contentLink:t,imageAttributes:{imagePath:t},mediaTileData:{mediaStatus:r.Jpv.Ready}}}break}case"figma.com":case"www.figma.com":n=r.YUT.Figma,o={contentLink:t.href};break;case"airtable.com":case"www.airtable.com":n=r.YUT.Airtable,o={contentLink:t.href};break;case"twitter.com":case"www.twitter.com":n=r.YUT.Twitter,o={contentLink:t.href};break;case"miro.com":case"www.miro.com":n=r.YUT.Miro,o={contentLink:t.href};break;case"framer.com":case"www.framer.com":n=r.YUT.Framer,o={contentLink:t.href};break;default:t.hostname.endsWith(".looker.com")?(n=r.YUT.Looker,o={contentLink:t.href}):t.pathname.includes("embed")&&(n=r.YUT.Web,o={contentLink:t.href})}return{tileType:n,tileData:o}}function d(e){let t;try{t=new URL(e)}catch{}if(!t)return{url:null};if(t.hostname.endsWith(".looker.com"))return{tileType:r.YUT.Looker,url:s(e)};switch(t.hostname){case"figma.com":case"www.figma.com":return{tileType:r.YUT.Figma,url:i(e)};case"airtable.com":case"www.airtable.com":return{tileType:r.YUT.Airtable,url:o(e)};case"miro.com":case"www.miro.com":return{tileType:r.YUT.Miro,url:l(e)};case"framer.com":case"www.framer.com":return{tileType:r.YUT.Framer,url:a(e)};case"docs.google.com":{if(t.pathname.match("/forms/"))return t.pathname=t.pathname.replace(/\/edit$/,"/viewform"),{tileType:r.YUT.Web,url:t.href};t.pathname=t.pathname.replace(/\/edit$/,"/preview");const e=t.pathname.split("/"),n=e[e.length-1];return"preview"!==n&&"pubhtml"!==n&&(t.pathname=`${t.pathname}/preview`),{tileType:r.YUT.Web,url:t.href}}case"www.youtube.com":case"m.youtube.com":case"music.youtube.com":case"youtu.be":{const e=/(?:.+?)?(?:\/v\/|watch\/|\?v=|&v=|youtu\.be\/|\/v=|^youtu\.be\/|watch%3Fv%3D)([a-zA-Z0-9_-]{11})+/,n=t.href.match(e),o=t.searchParams.get("t");return t.searchParams.delete("v"),t.searchParams.delete("t"),o&&t.searchParams.set("start",o),n&&(null===n||void 0===n?void 0:n.length)>1?{tileType:r.YUT.Web,url:[`https://www.youtube.com/embed/${n[1]}`,t.searchParams.toString()].filter((e=>e)).join("?")}:{tileType:r.YUT.Web,url:t.href}}case"app.mode.com":return t.pathname.endsWith("/embed")||(t.pathname=`${t.pathname}/embed`),{tileType:r.YUT.Web,url:t.href};case"twitter.com":case"www.twitter.com":return{tileType:r.YUT.Twitter,url:t.href};case"sketchfab.com":case"www.sketchfab.com":{const e=(t.pathname||"").trim();if(e.length&&!e.endsWith("/embed")){let r="";try{var n;r=`${(null===(n=e.match(/[/-]([0-9a-z]{32,32})+/))||void 0===n?void 0:n[1])||""}`}catch(c){}r&&(t.pathname=`/models/${r}/embed`)}return t.protocol="https:",{tileType:r.YUT.Web,url:t.href}}default:return{url:t.href}}}},26190:function(e,t){"use strict";t.Z=function(e){e.stopPropagation()}},84081:function(e,t,n){"use strict";n.d(t,{Zp:function(){return E},g$:function(){return k},KS:function(){return D},qj:function(){return S},An:function(){return I},YM:function(){return T}});var r=n(19148),o=n(51718),i=n(88902),l=n(62090),a=n(36902),s=n(74813),c=n(14961),d=n(71179),u=n(50591),p=n(11209),f=n(8557),h=n(57903),g=n(59499),m=n(67294),b=n(24306),y=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const x=(e,t)=>(0,y.jsxs)(b.Z,w(w({ref:t,style:{width:52,height:52},viewBox:"0 0 52 52"},e),{},{children:[(0,y.jsx)("path",{d:"M20.649 15.774C21.2837 15.1394 21.2837 14.1106 20.649 13.476C20.0144 12.8413 18.9856 12.8413 18.351 13.476L6.97595 24.851C6.34135 25.4856 6.34135 26.5144 6.97595 27.149L18.351 38.524C18.9856 39.1586 20.0144 39.1586 20.649 38.524C21.2837 37.8894 21.2837 36.8606 20.649 36.226L10.4231 26L20.649 15.774Z"}),(0,y.jsx)("path",{d:"M31.3509 15.774C30.7163 15.1394 30.7163 14.1106 31.3509 13.476C31.9856 12.8413 33.0144 12.8413 33.649 13.476L45.024 24.851C45.6586 25.4856 45.6586 26.5144 45.024 27.149L33.649 38.524C33.0144 39.1586 31.9856 39.1586 31.3509 38.524C30.7163 37.8894 30.7163 36.8606 31.3509 36.226L41.5769 26L31.3509 15.774Z"})]}));var C=(0,m.forwardRef)(x),O=n(26705),j=n(24978),P=n(97297);const T=[...[{value:o.YUT.Text,label:r.ZP.t("utils.tileTypes.textLabel"),subtitle:"Supports markdown, body and header styles",icon:l.Z},{value:o.YUT.Image,label:r.ZP.t("utils.tileTypes.imageLabel"),subtitle:"A picture",icon:s.Z},{value:o.YUT.Video,label:r.ZP.t("utils.tileTypes.videoLabel"),subtitle:"A video",icon:a.Z},{value:o.YUT.Code,label:r.ZP.t("utils.tileTypes.codeLabel"),subtitle:"Embed formatted code",launchDarklyKey:i.TT.CODE_TILE,icon:C},{value:o.YUT.Giphy,label:"Giphy",subtitle:"Gif from Giphy",icon:O.Z},{value:o.YUT.Table,label:r.ZP.t("utils.tileTypes.tableLabel"),subtitle:"Table",icon:j.Z}],...[{value:o.YUT.Figma,label:"Figma",subtitle:"DIsplay any public design files with the url",icon:c.Z},{value:o.YUT.Airtable,label:"Airtable",subtitle:"Embed any public Airtable spreadsheets",icon:d.Z},{value:o.YUT.Web,label:r.ZP.t("utils.tileTypes.webLabel"),subtitle:"Embed any web url",icon:u.Z},{value:o.YUT.Twitter,label:"Twitter",subtitle:"Embed a tweet",icon:p.Z},{value:o.YUT.Framer,label:"Framer",subtitle:"Embed a Framer",icon:f.Z},{value:o.YUT.Miro,label:"Miro",subtitle:"Embed a Miro",icon:h.Z},{value:o.YUT.Looker,label:"Looker",subtitle:"Embed a Looker",icon:P.Z}]],I=e=>{let t=e;return e===o.YUT.ImageGenerative&&(t=o.YUT.Image),T.filter((e=>Object.values(e).includes(t)))},k=[o.YUT.Image,o.YUT.Giphy,o.YUT.ImageGenerative],E=[o.YUT.Figma,o.YUT.Airtable,o.YUT.Web,o.YUT.Framer,o.YUT.Miro,o.YUT.Looker],D=[o.YUT.Twitter,...E],S=[o.YUT.Giphy,...D]},80838:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(59499);class o{constructor(){(0,r.Z)(this,"timeout",null),(0,r.Z)(this,"timeoutMs",0),(0,r.Z)(this,"callback",(()=>{})),(0,r.Z)(this,"stop",(()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)})),(0,r.Z)(this,"start",((e,t)=>{this.stop(),this.timeoutMs=t,this.callback=e,this.timeout=setTimeout(e,t)})),(0,r.Z)(this,"refresh",(()=>{this.stop(),this.start(this.callback,this.timeoutMs)}))}}},80375:function(e,t,n){"use strict";n.d(t,{Oo:function(){return l},Z2:function(){return r},iy:function(){return i},yh:function(){return o}});const r={duration:.45,ease:[.4,0,.1,1]},o={type:"spring",stiffness:500,damping:60,mass:1},i={type:"spring",stiffness:450,damping:50},l={type:"tween",ease:"easeInOut",duration:0}},59361:function(e,t,n){"use strict";n.d(t,{M:function(){return o},j:function(){return i}});var r=n(51718);function o(e,t){return(null===e||void 0===e?void 0:e.mediaStatus)!==r.Jpv.Ready||!t}function i(e,t){const n=new URL(e);return n.searchParams.set("time",Math.round(t).toString()),n.searchParams.set("width","800"),n.searchParams.set("height","800"),n.href}},84827:function(e,t,n){"use strict";n.d(t,{b:function(){return r},z:function(){return o}});const r=e=>new Promise((t=>{const n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight),n.toBlob((e=>{t(e)}),"image/jpeg")})),o=(e,t,n)=>{e.analyzeData((()=>t.byteLength),(()=>t),(e=>{e.media.track.forEach((e=>{if("Video"===e["@type"]){const t=e.CodecID;n("hvc1"===t)}}))}))}},83850:function(){}}]);
