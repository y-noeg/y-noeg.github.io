(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{33914:function(e,t,n){"use strict";var o=n(4730),i=n(59499),r=n(67294),s=n(4480),a=n(52260),l=n(60864),d=n(87495),c=n(85893);const p=["type","preview"],u=["attrs","content"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h={bulletList:"ul",doc:"div",heading:e=>{let{level:t,children:n}=e;const o=`h${t}`;return(0,c.jsx)(o,{children:n})},listItem:"li",orderedList:"ol",paragraph:"p",hardBreak:"br",text:e=>{let{marks:t,text:n,preview:o}=e;const i=(0,s.Zl)(l.Vx),p=(0,s.Zl)(a.R),u=(0,r.useCallback)((e=>{e.stopPropagation();const{isTomeLink:t,tomeId:n,pageId:o}=(0,d.vb)(e.target.href);if(t){const{isTomeLink:t,tomeId:r}=(0,d.vb)(window.location.href);t&&r===n&&(i(o),e.preventDefault(),p(!0))}}),[i,p]);if(t){const e=[],i=[];t.forEach((t=>{switch(t.type){case"bold":e.push("strong"),i.push({});break;case"italic":e.push("em"),i.push({});break;case"underline":e.push("u"),i.push({});break;case"code":e.push("code"),i.push({});break;case"link":e.push("a"),o?i.push({}):i.push({href:t.attrs.href,target:"_blank",onPointerDownCapture:u})}}));let r=n;for(let t=e.length-1;t>=0;t-=1){const n=e[t];r=(0,c.jsx)(n,g(g({},i[t]),{},{children:r}))}return r}return n},mentionAtom:"span",blockquote:"blockquote"},f=e=>{let{type:t,preview:n}=e,i=(0,o.Z)(e,p);const r=h[t];if(!r)return console.warn("Unknown node type:",t),null;const{attrs:s={},content:a=[]}=i,l=(0,o.Z)(i,u);return"text"===t?(0,c.jsx)(r,{marks:l.marks,text:l.text,preview:n}):"hardBreak"===t?(0,c.jsx)(r,{}):"paragraph"===t&&0===a.length?(0,c.jsx)(r,{children:(0,c.jsx)("br",{})}):"mentionAtom"===t?(0,c.jsx)(r,{className:"remirror-mention-atom-mention-atom",children:s.label}):(0,c.jsx)(r,g(g(g({},s),l),{},{children:(0,c.jsx)(c.Fragment,{children:a.map(((e,t)=>(0,c.jsx)(f,g({preview:n},e),t)))})}))};t.Z=f},12337:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return ls},config:function(){return cs},default:function(){return ds}});var o=n(64310),i=n(67294),r=n(4480),s=n(11163),a=n(37660),l=n(87495),d=n(51718),c=n(52322),p=n(93313),u=n(71652),m=n(76610),g=n(24418),h=n(7863),f=n(59016),b=n(1922),x=n(41822),v=n(17386),y=n(41664),w=n.n(y),j=n(55245),C=n(8423),P=n(85893);var O=e=>{let{email:t}=e;const n=(0,s.useRouter)();return(0,P.jsx)(C.Z,{mainMessage:"Oops! You need an invitation before you can use Tome.",children:(0,P.jsxs)(C.N,{children:["Signed in as ",t||"",". ",(0,P.jsx)("br",{}),(0,P.jsx)(w(),{href:(0,j.bM)(n),children:"Sign\xa0in"})," with a different account."]})})},_=n(87174),k=n(36948),I=n(3853),T=n(26188),Z=n(65309),S=n(43002),N=n(22817),M=n(33159),L=n(60864),D=n(37189),E=n(49335),B=n(39225),R=n(59499),z=n(37887),A=n(24306);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,$($({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.47 16.7833C52.1767 17.0752 51.7026 17.0752 51.4093 16.7833L47.2186 12.6069C46.9267 12.3164 46.9254 11.8444 47.2158 11.5524C47.2168 11.5515 47.2177 11.5506 47.2186 11.5497L50.1133 8.66156C50.9932 7.78566 52.4155 7.78566 53.2954 8.66156L55.3646 10.7236C56.2404 11.5954 56.2437 13.0122 55.3719 13.888C55.3695 13.8904 55.367 13.8929 55.3646 13.8953L52.47 16.7833ZM29.7581 38.49L24.7119 40.0052C24.4144 40.0943 24.101 39.9253 24.0119 39.6278C23.9804 39.5226 23.9804 39.4104 24.0119 39.3052L25.5267 34.2512H25.5267C25.8118 33.3 26.3283 32.4343 27.03 31.7318L44.5332 14.2154C44.826 13.9229 45.3004 13.9229 45.5932 14.2154L49.7808 18.4065C50.0735 18.6996 50.0735 19.1743 49.7808 19.4675L32.2785 36.9832C31.5761 37.6864 30.7101 38.2042 29.7581 38.49ZM52.01 29.02V46.0209V46.0208C52.007 49.3335 49.3229 52.0187 46.0101 52.023H18.0101H18.0101C14.6973 52.0187 12.0132 49.3336 12.0101 46.0209V18.0146V18.0147C12.0131 14.7019 14.6973 12.0168 18.01 12.0126H35.01C36.115 12.0126 37.0107 12.9083 37.0107 14.0133C37.0107 15.1182 36.115 16.014 35.01 16.014H18.01C16.9057 16.0152 16.0109 16.9103 16.01 18.0146V46.0209V46.0209C16.0109 47.1251 16.9057 48.0202 18.01 48.0215H46.01C47.1142 48.02 48.0088 47.125 48.01 46.0209V29.02C48.01 27.9154 48.9054 27.02 50.01 27.02C51.1146 27.02 52.01 27.9154 52.01 29.02L52.01 29.02Z",fill:"currentColor"})})))),H=n(34136),q=n(71515),W=n(22951),G=n(37308),V=n(4034),K=n(78724);var Q=()=>{const{activeMembership:e}=(0,i.useContext)(T.Z),t=(0,s.useRouter)(),n=(0,r.Zl)(L.DH),{controlCommandPrompt:o}=(0,K.br)(),a=(0,V.t2)(),{maybeIncrementFreeTomeCreationCount:l}=(0,E.Z)(),[p,{loading:u}]=(0,d.vtp)({update(e,t){let{data:n}=t;null!==n&&void 0!==n&&n.addEmptyTome&&(0,G.a)(e,n.addEmptyTome,l)},onError:e=>{m(!1),(0,L.Sd)({message:e.message})},onCompleted:e=>{let{addEmptyTome:o}=e;null!==o&&void 0!==o&&o.id&&((0,L.oG)(!1),n(null),a.closePropertyPanel(),t.push({pathname:`/${o.id}/`},void 0,{shallow:!0}))}}),m=(0,r.Zl)(c.Z);return(0,i.useCallback)((()=>{var t;!u&&e&&null!==e&&void 0!==e&&null!==(t=e.org)&&void 0!==t&&t.id&&(m(!0),p({variables:{title:B.GW,orgId:e.org.id,fetchFullPage:!0,prefetchPreviewImage:!1}}).then((()=>{o({action:K.$C.OPEN})})))}),[u,e,m,p,o])};const J=(0,f.ZP)(H.Z).withConfig({displayName:"CreateTomeButton__StyledTomeButton",componentId:"sc-1jdmvr1-0"})(["justify-content:flex-start;height:32px;font-weight:600;padding-left:14px;padding-right:16px;min-width:0;"," span{opacity:",";border-radius:8px;}"],W.qc,(e=>{let{$disabled:t}=e;return t?.4:void 0}));var X=()=>{const{remainingTomeCreationsForOrg:e}=(0,E.Z)(),{activeMembership:t}=(0,i.useContext)(T.Z),n=Q(),{t:o}=(0,b.$G)(),r=(0,f.Fg)(),s=0===e;let a;!(null!==t&&void 0!==t&&t.org)?a=o("createTomeButton.disabledLabel"):s&&(a=o("createTomeButton.disabledBecauseFreeTomeCreationLimitReachedLabel"));const l=!!a,d=(0,P.jsx)(J,{disabled:l,size:"large",color:"primary",customButtonPalette:{disabled:r.colors.workspaceCreateTomeButtonDisabled},iconOpacity:1,startIcon:(0,P.jsx)(U,{}),onClick:n,"aria-label":o("createTomeButton.ariaLabel"),"data-testid":"create_tome_button",$disabled:l,children:o("createTomeButton.label")});return l?(0,P.jsx)(q.Z,{tooltipStyle:{width:"205px",overflowWrap:"break-word",wordBreak:"break-word",whiteSpace:"break-spaces"},placement:"left",content:a,children:(0,P.jsx)("div",{"data-testid":"create_tome_button_tooltip",children:d})}):d};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,ee(ee({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,P.jsx)("path",{d:"M21.5858 28.5858L30.5858 19.5858C31.3668 18.8047 32.6332 18.8047 33.4142 19.5858L42.4142 28.5858C43.1953 29.3668 43.1953 30.6332 42.4142 31.4142C41.6332 32.1953 40.3668 32.1953 39.5858 31.4142L34 25.8284V43C34 44.1046 33.1046 45 32 45C30.8954 45 30 44.1046 30 43V25.8284L24.4142 31.4142C23.6332 32.1953 22.3668 32.1953 21.5858 31.4142C20.8047 30.6332 20.8047 29.3668 21.5858 28.5858Z"}),(0,P.jsx)("path",{fillRule:"evenodd",d:"M56 32C56 45.2548 45.2548 56 32 56C18.7452 56 8 45.2548 8 32C8 18.7452 18.7452 8 32 8C45.2548 8 56 18.7452 56 32ZM52 32C52 43.0457 43.0457 52 32 52C20.9543 52 12 43.0457 12 32C12 20.9543 20.9543 12 32 12C43.0457 12 52 20.9543 52 32Z"})]})))),ne=n(65653),oe=n(14773);const ie=(0,f.ZP)(H.Z).withConfig({displayName:"UpgradeButton__StyledTomeButton",componentId:"sc-1kyn5mm-0"})(["justify-content:flex-start;height:32px;font-weight:600;padding-left:14px;padding-right:16px;min-width:0;"," > span{font-size:",";}"],W.qc,(e=>{let{theme:t}=e;return t.fontSizes.smmd}));var re=()=>{const{t:e}=(0,b.$G)(),{openSettings:t}=(0,ne.r)(),{apolloClient:n}=(0,g.bp)(),o=(0,i.useCallback)((()=>{t(oe.u.PLANS),M.ZP.reportPaymentEvent({apolloClient:n,trackEventType:M.nM.CLICK_WORKSPACE_UPGRADE_BUTTON})}),[n,t]);return(0,P.jsx)(ie,{color:"default",startIcon:(0,P.jsx)(te,{style:{height:20,width:20}}),onClick:o,onZ0:!0,"aria-label":e("upgradeButton.ariaLabel"),"data-testid":"upgrade_button",children:e("upgradeButton.label")})},se=n(60559);const ae=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerCard",componentId:"faiso3-0"})(["padding:24px;background:",";box-shadow:",";border-radius:",";margin:16px auto 0;width:","px;"],(e=>e.theme.colors.mowebBannerBackground),(e=>e.theme.boxShadow.medium),(e=>e.theme.borderRadius.sm),se.rh.longSide),le=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerHeaderText",componentId:"faiso3-1"})(["font-weight:700;font-size:24px;line-height:1.2;font-family:",";color:",";margin-bottom:8px;"],(e=>e.theme.fonts.ui),(e=>e.theme.colors.contrast)),de=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerBodyText",componentId:"faiso3-2"})(["font-family:",";font-size:",";line-height:1.3333;color:",";"],(e=>e.theme.fonts.ui),(e=>e.theme.fontSizes.smmd),(e=>e.theme.colors.mowebBannerBody));var ce=n(85518),pe=n(50319),ue=n(24656),me=n(56793),ge=n(60928),he=n(77759),fe=n(64972),be=n(87987),xe=n(47314),ve=n(24233),ye=n(15814);const we=se.rh.longSide+2*(se.x3+se.at+se.OM),je=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeFeedWrapper",componentId:"sc-2qikca-0"})(["height:100%;overflow:auto;"]),Ce=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeHeader",componentId:"sc-2qikca-1"})(["display:flex;justify-content:space-between;height:64px;padding-top:16px;padding-right:13px;padding-bottom:","px;align-items:baseline;background-color:",";",";"],(e=>{let{isMobile:t}=e;return t?10:16}),(e=>{let{theme:t}=e;return t.colors.workspaceBackground}),(e=>{let{isMobile:t}=e;return!t&&(0,f.iv)(["position:sticky;top:0;z-index:1;"])})),Pe=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeHeaderTrailingButtonsContainer",componentId:"sc-2qikca-2"})(["display:flex;gap:8px;"]),Oe=f.ZP.div.withConfig({displayName:"TomeFeedstyles__FeedLabel",componentId:"sc-2qikca-3"})(["padding:0 8px;font-size:",";font-weight:400;line-height:17px;color:",";white-space:nowrap;",";"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.contrast40),(e=>e.$loading&&`width: 91px;\n     height: 12px;\n     border-radius: 4px;\n     background-color: ${e.theme.colors.contrast8}`)),_e=f.ZP.div.withConfig({displayName:"TomeFeedstyles__FeedContentSection",componentId:"sc-2qikca-4"})(["display:grid;grid-template-columns:repeat(auto-fill,","px);grid-gap:","px;margin-bottom:","px;"],we,24,24),ke=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholder",componentId:"sc-2qikca-5"})(["height:","px;width:","px;border-radius:12px;padding:4px;opacity:","%;"],se.rh.shortSide+44,se.rh.longSide+2*se.rh.padding,(e=>e.opacity)),Ie=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholderTop",componentId:"sc-2qikca-6"})(["height:","px;width:100%;background-color:",";border-radius:","px;"],se.rh.shortSide,(e=>e.theme.colors.contrast4),se.rh.radius),Te=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholderBottom",componentId:"sc-2qikca-7"})(["height:52px;width:100%;margin-bottom:10px;"]),Ze=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewWrapper",componentId:"sc-162nm9y-0"})([""]),Se=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewStyles",componentId:"sc-162nm9y-1"})(["width:","px;overflow:hidden;"],we),Ne=f.ZP.span.withConfig({displayName:"TomePreview__PreviewAuthorLabel",componentId:"sc-162nm9y-2"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),Me=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMenu",componentId:"sc-162nm9y-3"})(["height:28px;width:28px;border-radius:4px;display:flex;align-items:center;visibility:",";&:hover{background-color:",";}"],(e=>e.visible?"visible":"hidden"),(e=>e.theme.colors.contrast8)),Le=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMeta",componentId:"sc-162nm9y-4"})(["padding:10px 8px 0;display:flex;flex-direction:row;justify-content:space-between;align-items:center;"]),De=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMetaMain",componentId:"sc-162nm9y-5"})(["width:calc(100% - 28px);"]),Ee=f.ZP.div.withConfig({displayName:"TomePreview__PreviewSubtitle",componentId:"sc-162nm9y-6"})(["font-size:",";line-height:17px;color:",";display:flex;flex-direction:row;"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.secondaryUiText)),Be=f.ZP.span.withConfig({displayName:"TomePreview__PreviewSpacer",componentId:"sc-162nm9y-7"})(["margin-left:4px;margin-right:4px;"]),Re=f.ZP.span.withConfig({displayName:"TomePreview__PreviewTimeLabel",componentId:"sc-162nm9y-8"})(["min-width:125px;"]),ze=f.ZP.div.withConfig({displayName:"TomePreview__PreviewTitle",componentId:"sc-162nm9y-9"})(["color:",";font-size:",";font-weight:400;line-height:17px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.theme.colors.contrast),(e=>e.theme.fontSizes.sm)),Ae=se.at,Fe=f.ZP.div.withConfig({displayName:"TomePreview__EmptyPreviewSelectionOutline",componentId:"sc-162nm9y-10"})(["display:flex;border-radius:","px;border:",";margin-top:","px;"],se.rh.radius+se.x3,(e=>{let{$selected:t,theme:n}=e;return t?`${Ae}px solid ${n.colors.contentAccent}`:`${Ae}px solid transparent`}),Ae),$e=f.ZP.div.withConfig({displayName:"TomePreview__TomeEmptyPreviewTile",componentId:"sc-162nm9y-11"})(["background-color:",";width:","px;height:","px;border-radius:","px;margin:","px;"],(e=>e.theme.colors.page),se.rh.longSide,se.rh.shortSide,se.rh.radius,Ae),Ue=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewTiles",componentId:"sc-162nm9y-12"})(["","{border-radius:","px;border-width:","px;border-style:solid;border-color:transparent;box-shadow:"," margin-top:","px;}","{border-radius:","px;padding:","px;background:",";}","{background:",";max-height:","px;overflow:hidden;}"],be.pu,se.rh.radius+se.OM,se.OM,(e=>{let{$selected:t,theme:n}=e;if(t)return`0px 0px 0px ${Ae}px ${n.colors.contentAccent};`;const o=n.colors.page.slice("var(".length).slice(0,-1);return"#000000"===getComputedStyle(document.body).getPropertyValue(o)?`0px 0px 0px ${Ae}px ${n.colors.outlineBorder};`:"none;"}),Ae,be.mA,se.rh.radius,se.x3,(e=>{let{theme:t}=e;return t.colors.page}),be.R6,(e=>{let{theme:t}=e;return t.colors.page}),se.rh.shortSide);var He=(0,i.memo)((e=>{var t;let{tome:n,onTomeDelete:o,selected:r,setSelectedTomeId:a,userCanDuplicateTome:d}=e;const c=(0,s.useRouter)(),{apolloClient:p,clientId:m}=(0,g.bp)(),{activeMembership:h}=(0,i.useContext)(T.Z),f=(0,ye.m)(),x=new URL(n.canonicalUrl).pathname,{t:v}=(0,b.$G)(),y=(0,i.useCallback)((()=>{c.push(x,void 0,{shallow:!0}),(0,B.Ag)(n,p)}),[x]),w=(0,i.useCallback)((e=>{(ce.tq||ce.Em||0===(null===e||void 0===e?void 0:e.button))&&y()}),[y]),j=(0,i.useCallback)((()=>{window.open(x,"_blank"),(0,B.Ag)(n,p)}),[x]),C=(0,i.useCallback)((()=>{const e=`${new URL(window.location.href).origin}${x}`,t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),(0,L.Sd)({message:v("components.tomePreview.linkCopiedToastMessage")})}),[x,v]),[O]=(0,pe.D)(he.Z,{update(e,t){let{data:{deleteTome:n}}=t;n&&o(e,n)},optimisticResponse:{__typename:"Mutation",deleteTome:{__typename:"Tome",id:n.id,deleted:!0}}}),[_]=(0,pe.D)(fe.Z,{update(e,t){let{data:{restoreTome:n}}=t;n&&((0,G.W)(e,n),(0,B.Ag)(n,p),a(n.id),(0,l.MT)(c,"recent"))}}),k=(0,me.Z)(),I=(0,i.useCallback)((()=>{null!==h&&void 0!==h&&h.org&&k({tomeId:n.id,orgId:h.org.id,onDuplicateComplete:(e,t)=>{a(e),window.Cypress||window.open(t,"_blank")},onDuplicateError:()=>{(0,L.Sd)({message:v("components.tomePreview.permissionDeniedDuplicatingErrorToastMessage")})}})}),[null===h||void 0===h?void 0:h.org,k,a,n.id,v]),{0:Z,1:S}=(0,i.useState)(ce.tq||ce.Em),{0:N,1:M}=(0,i.useState)(!1),D=(0,i.useCallback)((e=>{(0,B.W8)(n.id,{title:e},p,m)}),[p,m,n.id]),E=(0,i.useCallback)((()=>{O({variables:{tomeId:n.id}}).then((e=>{let{data:t}=e;null!==t&&void 0!==t&&t.deleteTome?(0,L.Sd)({message:v("components.tomePreview.tomeDeletedToastMessage")}):(0,L.Sd)({message:v("components.tomePreview.canNotDeleteTomePermissionDeniedErrorToastMessage")})}))}),[]),R=(0,i.useCallback)((()=>{_({variables:{tomeId:n.id}}).then((e=>{let{data:t}=e;if(null!==t&&void 0!==t&&t.restoreTome){const e=n.canonicalUrl;(0,L.Sd)({message:v("components.tomePreview.tomeRestoredToastMessage"),action:"open",path:e})}else(0,L.Sd)({message:v("components.tomePreview.sorryPermissionDeniedErrorToastMessage")})}))}),[]),z=[{type:"option",text:v("components.tomePreview.openDropdownMenuItem"),action:y},{type:"option",text:v("components.tomePreview.openInNewTabDropdownMenuItem"),action:j},{type:"separator"},{type:"option",text:v("components.tomePreview.copyLinkDropdownMenuItem"),action:C}];d&&z.push({type:"option",text:v("components.tomePreview.duplicateDropdownMenuItem"),action:I}),n.currentUserPermission.canEdit&&z.push({type:"separator"},{type:"option",text:v("components.tomePreview.renameDropdownMenuItem"),action:f.open}),n.currentUserPermission.canManage&&(n.deleted?z.push({type:"option",text:v("components.tomePreview.restoreDropdownMenuItem"),action:R}):z.push({type:"option",text:v("components.tomePreview.deleteDropdownMenuItem"),action:E,variant:"destructive"}));const A=null===(t=n.pages)||void 0===t?void 0:t[0];return(0,P.jsxs)(Ze,{"data-testid":"tome_preview",children:[(0,P.jsx)(ve.Z,{menuWidth:180,menuPosition:"below",menuAlign:"click",rightClickActivated:!0,itemsOrFn:z,onOpenDropdown:()=>a(n.id),children:(0,P.jsxs)(Se,{onClick:()=>{ce.tq||ce.Em?w():a(n.id)},onDoubleClick:w,onMouseEnter:ce.tq||ce.Em?void 0:()=>S(!0),onMouseLeave:ce.tq||ce.Em?void 0:()=>S(!1),children:[A?(0,P.jsx)(u.Z,{theme:A.theme,children:(0,P.jsx)(Ue,{$selected:r,$themeId:A.theme.id,children:(0,P.jsx)(be.ZP,{preview:!0,page:A,tomeId:n.id,sizes:(0,se.KT)(),pageKind:ue.s.WORKSPACE,active:!1,isVisible:!1,canEdit:!1,useEditablePage:!1,isFirstPage:!0,pageVerticalMargin:0})})}):(0,P.jsx)(Fe,{$selected:r,children:(0,P.jsx)($e,{})}),(0,P.jsxs)(Le,{children:[(0,P.jsxs)(De,{children:[(0,P.jsx)(ze,{children:n.title}),(0,P.jsxs)(Ee,{children:[(0,P.jsx)(Ne,{children:n.author.name}),(0,P.jsx)(Be,{children:"\xb7"}),(0,P.jsx)(Re,{children:`${v("components.tomePreview.edited",{relativeTimeLabel:(0,ge.Z)(n.updatedAt,!1,!1)})}`})]})]}),(0,P.jsx)(ve.Z,{menuWidth:180,menuPosition:"below",menuAlign:"right",setOpenState:M,itemsOrFn:z,interceptDoubleClick:!0,children:(0,P.jsx)(Me,{visible:Z||N,onClick:e=>{e.stopPropagation(),a(n.id)},children:(0,P.jsx)(xe.Z,{style:{fillOpacity:.35,width:28,height:28}})})})]})]})}),(0,P.jsx)(ye.Z,{ref:f.ref,title:v("components.tomePreview.renameToPromptModalTitle"),primaryButtonText:v("components.tomePreview.renamePromptModalButtonLabel"),onSubmit:D,placeholder:v("components.tomePreview.renamePromptModalTitlePlaceholder")})]})})),qe=n(85684);var We=e=>{var t;let{loading:n,data:o,getTomeConnection:r,onLoadMore:s,onTomeDelete:a,feedLabel:l,isMobile:d,upgradeEligible:c}=e;const p=(0,i.useRef)(null),u=(0,i.useRef)(null),m=(0,i.useRef)(!1),{t:g}=(0,b.$G)(),{remainingTomeCreationsForOrg:h}=(0,E.Z)(),f=0!==h,x=(0,i.useCallback)((()=>{p.current&&p.current.scrollTop+p.current.clientHeight>=p.current.scrollHeight&&(m.current||(m.current=!0,s((()=>{m.current=!1}))))}),[s]),{0:v,1:y}=(0,i.useState)(null),w=n||!o?[]:(null===(t=r(o))||void 0===t?void 0:t.nodes)||[];return(0,P.jsxs)(je,{ref:p,onScroll:x,children:[d&&(0,P.jsxs)(ae,{children:[(0,P.jsx)(le,{children:g("tomeFeed.mobileBanner.header")}),(0,P.jsx)(de,{children:g("tomeFeed.mobileBanner.body")})]}),(0,P.jsxs)(Ce,{isMobile:d,children:[(0,P.jsx)(Oe,{$loading:n,children:n?null:l}),!d&&(0,P.jsxs)(Pe,{children:[c&&(0,P.jsx)(re,{}),(0,P.jsx)(X,{})]})]}),(0,P.jsx)(qe.Z,{onClick:()=>{y(null)},children:(0,P.jsx)(_e,{"data-testid":"tome_feed_content",ref:u,onClick:e=>{u.current===e.target&&y(null)},children:n?[...Array(8)].map(((e,t)=>{return(0,P.jsxs)(ke,{opacity:(n=t,n<3?100:100*Math.max(-.13*n+1.1,.3)),children:[(0,P.jsx)(Ie,{}),(0,P.jsx)(Te,{})]},t);var n})):w.map((e=>e?(0,P.jsx)(He,{tome:e,onTomeDelete:a,selected:v===e.id,setSelectedTomeId:y,userCanDuplicateTome:f},e.id):null))})})]})},Ge=n(92334),Ve=n(73515);const Ke=(e,t,n)=>{const{longSide:o,shortSide:i,padding:r}=se.rh,s=o+2*r,a=i+2*r+44,l=e-Ge.Qz-2*Ve.Bb,d=Math.floor(l/(s+24)),c=Math.ceil(t/(a+24));return Math.max(c*d+1,n)};function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:r,query:s,subscription:a,subscriptionVariables:l,updateQuery:d,getTomeConnection:c,feedLabel:p,variables:u,isMobile:m,upgradeEligible:h}=e;const f=(0,i.useRef)(null),{apolloClient:b}=(0,g.bp)();let x=Je({limit:Ke(window.innerWidth,window.innerHeight,n)},u);if(!f.current){const e=b.cache.readQuery({query:s});if(e){const t=c(e);t&&t.pageInfo&&(x=Je(Je({},x),{},{cursor:t.pageInfo.endCursor||""}))}f.current=x}const v=(0,i.useRef)(null),{loading:y,data:w,fetchMore:j,subscribeToMore:C}=(0,z.a)(s,{variables:f.current,nextFetchPolicy:"cache-only",errorPolicy:"all",onCompleted:()=>{o.v.addTiming(`workspace_query_load_${p.replace(" ","_")}`)}});(0,i.useEffect)((()=>{a&&l&&Object.values(l).every((e=>void 0!==e))&&null===v.current&&(v.current=C({document:a,variables:l,updateQuery:d}))}),[a,l,d,C]);const O=r||y;return(0,P.jsx)(We,{loading:O,data:w,getTomeConnection:c,onLoadMore:e=>{const n=w&&c(w);null!==n&&void 0!==n&&n.pageInfo.hasNextPage&&j({variables:{limit:t,cursor:n.pageInfo.endCursor}}).then((()=>{e&&e()}))},onTomeDelete:B.h6,feedLabel:p,isMobile:m,upgradeEligible:h})};var Ye=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,userId:i,isMobile:r,upgradeEligible:s}=e;const{t:a}=(0,b.$G)();return(0,P.jsx)(Xe,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.N8k,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.sharedWithMeTomes},subscription:d.Ygx,subscriptionVariables:{userId:i},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data?(0,B.gS)(e,n.data.tomeShareIndividual):e},feedLabel:a("feed.label.recentlyEdited"),isMobile:r,upgradeEligible:s})};var et=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,orgId:i,isMobile:r,upgradeEligible:s}=e;return(0,P.jsx)(Xe,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.I6k,getTomeConnection:e=>{var t,n;return null===(t=e.me)||void 0===t||null===(n=t.org)||void 0===n?void 0:n.tomes},subscription:d.PTV,subscriptionVariables:{orgId:i},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data?(0,B.pq)(e,n.data.tomeShareOrg):e},feedLabel:"Recently edited",isMobile:r,upgradeEligible:s})};var tt=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;return(0,P.jsx)(Xe,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.mxK,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.deletedTomes},feedLabel:"Recently deleted",isMobile:i,upgradeEligible:r})};var nt=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;const{t:s}=(0,b.$G)();return(0,P.jsx)(Xe,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.rjw,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.tomes},feedLabel:s("feed.label.recentlyEdited"),isMobile:i,upgradeEligible:r})};var ot=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;const{t:s}=(0,b.$G)();return(0,P.jsx)(Xe,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.yCJ,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.recentTomes},feedLabel:s("feed.label.recentlyViewed"),isMobile:i,upgradeEligible:r})},it=n(37982);const rt=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__Header",componentId:"sc-171ohze-0"})(["background-color:",";margin:0 4px 0 8px;padding:12px 0px;display:flex;justify-content:space-between;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.background})),st=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__HeaderText",componentId:"sc-171ohze-1"})(["font-weight:400;font-family:",";font-size:",";color:",";line-height:1.3333;"," width:","px;"],(e=>{let{theme:t}=e;return t.fonts.ui}),(e=>{let{theme:t}=e;return t.fontSizes.smmd}),(e=>{let{theme:t}=e;return t.colors.contrast}),W.wR,se.rh.longSide-60),at=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__LogoWrapper",componentId:"sc-171ohze-2"})(["height:24px;color:",";padding-left:32px;"],(e=>{let{theme:t}=e;return t.colors.uiAccent}));var lt=e=>{let{orgName:t}=e;const n=(0,P.jsx)("div",{children:"\xa0"});return(0,P.jsxs)(rt,{children:[(0,P.jsx)(st,{suppressHydrationWarning:!0,children:t||n}),(0,P.jsx)(at,{children:(0,P.jsx)(it.Z,{style:{height:24,width:24}})})]})},dt=n(34425),ct=n(62820),pt=n(94717),ut=n(50456);var mt=ut.ZP`
  mutation logNotificationClick($notificationId: String!) {
    logNotificationClick(input: { notificationId: $notificationId })
  }
`,gt=n(48811),ht=n(33914),ft=n(71893);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vt=f.ZP.div.withConfig({displayName:"Notification__NotificationStyles",componentId:"z9l4vg-0"})(["padding:8px 16px 8px 8px;display:flex;flex-direction:row;cursor:pointer;&:hover{background-color:",";}"],(e=>e.theme.colors.contrast8)),yt=f.ZP.div.withConfig({displayName:"Notification__UnreadIndicatorWrapper",componentId:"z9l4vg-1"})(["min-width:6px;padding-top:7px;"]),wt=f.ZP.div.withConfig({displayName:"Notification__UnreadIndicator",componentId:"z9l4vg-2"})(["width:6px;height:6px;background-color:",";border-radius:3px;"],(e=>e.theme.colors.uiAccent)),jt=f.ZP.div.withConfig({displayName:"Notification__UserProfileWrapper",componentId:"z9l4vg-3"})(["margin-left:8px;width:24px;"]),Ct=f.ZP.div.withConfig({displayName:"Notification__ContentWrapper",componentId:"z9l4vg-4"})(["margin-left:8px;display:flex;flex-direction:column;overflow:hidden;"]),Pt=f.ZP.div.withConfig({displayName:"Notification__Title",componentId:"z9l4vg-5"})(["color:",";font-size:",";line-height:17px;"],(e=>e.theme.colors.contrast),(e=>e.theme.fontSizes.sm)),Ot=f.ZP.div.withConfig({displayName:"Notification__TimeLabel",componentId:"z9l4vg-6"})([""," margin-top:4px;font-size:",";line-height:13px;"],W.OX,(e=>e.theme.fontSizes.xxs)),_t=f.ZP.div.withConfig({displayName:"Notification__CommentContent",componentId:"z9l4vg-7"})(["color:",";margin-top:4px;font-size:",";line-height:17px;user-select:auto;.selection{background-color:",";}p{margin:0;}a{","}"],(e=>e.theme.colors.notificationContent),(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.textSelection),ft.Z),kt=e=>{let{notification:t}=e;const n=(0,s.useRouter)(),{id:o,status:i}=t,{t:r}=(0,b.$G)(),[a]=(0,pe.D)(mt,{optimisticResponse:{__typename:"Mutation",logNotificationClick:!0},update(e){e.modify({id:e.identify(t),fields:{status:()=>"CLICKED"}})}});let l,d;switch(t.__typename){case"CommentNotification":{const{createdAt:e,comment:o,title:i,webUrl:r}=t;if(!o)break;const{author:s,content:a}=o;let c;try{c=a?JSON.parse(a):null}catch{c=null}l=()=>{n.push(r)},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(jt,{children:(0,P.jsx)(gt.Z,{user:s,size:24})}),(0,P.jsxs)(Ct,{children:[(0,P.jsx)(Pt,{children:i}),c&&(0,P.jsx)(_t,{children:(0,P.jsx)(ht.Z,xt({},c))}),(0,P.jsx)(Ot,{children:(0,ge.Z)(e,!1,!0)})]})]});break}case"TomeNotification":case"TileMentionNotification":{const{createdAt:e,author:o,title:i,webUrl:r}=t;if(!o||!r)break;l=()=>{n.push(r)},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(jt,{children:(0,P.jsx)(gt.Z,{user:o,size:24})}),(0,P.jsxs)(Ct,{children:[(0,P.jsx)(Pt,{children:i}),(0,P.jsx)(Ot,{children:(0,ge.Z)(e,!1,!0)})]})]});break}case"ReferralNotification":{const{createdAt:e,inviter:n,invitee:o,title:i,type:r}=t;if(!n||!o)break;l=()=>{},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(jt,{children:(0,P.jsx)(gt.Z,{user:"REFERRAL_CODE_USED"===r?o:n,size:24})}),(0,P.jsxs)(Ct,{children:[(0,P.jsx)(Pt,{children:i}),(0,P.jsx)(Ot,{children:(0,ge.Z)(e,!1,!0)})]})]});break}}return(0,P.jsxs)(vt,{onClick:()=>{a({variables:{notificationId:o}}),l&&l()},children:[(0,P.jsx)(yt,{children:"CLICKED"!==i&&(0,P.jsx)(wt,{})}),d||(0,P.jsx)(Ct,{children:r("library.notification.unsupportedNotification")})]})};var It,Tt=n(53098);function Zt(){return Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Zt.apply(this,arguments)}var St=function(e){return i.createElement("svg",Zt({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),It||(It=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.817 14.824a.625.625 0 01-.885 0l-3.937-3.938L6.06 14.82a.625.625 0 01-.885-.884l3.934-3.934-3.933-3.934a.625.625 0 01.885-.884l3.933 3.933 3.937-3.937a.625.625 0 11.884.885l-3.937 3.937 3.938 3.937a.625.625 0 010 .884z",fill:"#fff"})))};var Nt=ut.ZP`
  mutation logNotificationImpression($latestTimestamp: String!) {
    logNotificationImpression(input: { latestTimestamp: $latestTimestamp })
  }
`;const Mt=(0,f.ZP)(h.animated.div).withConfig({displayName:"NotificationFeed__NotificationFeedStyles",componentId:"sc-1ar2fcq-0"})(["position:absolute;top:","px;left:222px;width:288px;z-index:",";display:flex;flex-direction:column;background-color:",";border-radius:12px;overflow:hidden;box-shadow:",";max-height:calc( 100vh - ","px );",""],62,Tt.Ue,(e=>e.theme.colors.menuBackgroundLayer[0]),(e=>{let{theme:t}=e;return t.boxShadow.large}),46,(e=>!e.$reachMaxHeight&&"\n    // if hasn't reached max height, maintain a 8px bottom spacing.\n    padding-bottom: 8px;\n  ")),Lt=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationHeader",componentId:"sc-1ar2fcq-1"})(["height:48px;min-height:48px;font-size:",";line-height:19px;font-weight:700;display:flex;align-items:center;padding:0 16px;"],(e=>e.theme.fontSizes.smmd)),Dt=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationHeaderLabel",componentId:"sc-1ar2fcq-2"})(["flex:1;"]),Et=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationContent",componentId:"sc-1ar2fcq-3"})(["overflow:auto;display:flex;flex-direction:column;"]),Bt=f.ZP.div.withConfig({displayName:"NotificationFeed__EmptyStateContent",componentId:"sc-1ar2fcq-4"})(["height:140px;display:flex;align-items:center;font-size:",";line-height:17px;color:",";margin:0 auto;"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.contrast40)),Rt=(0,f.ZP)(pt.Y).withConfig({displayName:"NotificationFeed__CloseButton",componentId:"sc-1ar2fcq-5"})(["height:20px;width:20px;border-radius:4px;"]);var zt=e=>{let{perPage:t,isNotificationOpen:n,setIsNotificationOpen:o,style:r}=e;const s=(0,i.useRef)(),{apolloClient:a}=(0,g.bp)(),l=(0,i.useRef)(),c=(0,i.useRef)(null),p=!!c.current&&c.current.scrollHeight>c.current.clientHeight,u={limit:t};if(!s.current){const e=a.cache.readQuery({query:d.ADL});if(e&&e.me){var m;const t=null===(m=e.me)||void 0===m?void 0:m.notifications;t&&t.pageInfo&&(u.cursor=t.pageInfo.endCursor)}s.current=u}const{loading:h,data:f,fetchMore:x}=(0,d.lFd)({variables:s.current,nextFetchPolicy:"cache-only"}),v=(0,i.useCallback)((()=>{var e,n;null!==f&&void 0!==f&&null!==(e=f.me)&&void 0!==e&&null!==(n=e.notifications)&&void 0!==n&&n.pageInfo.hasNextPage&&x({variables:{limit:t,cursor:f.me.notifications.pageInfo.endCursor}})}),[f,x,t]),y=(0,i.useCallback)((()=>{c&&c.current&&c.current.scrollTop+c.current.clientHeight>=c.current.scrollHeight&&v()}),[v]);(0,i.useEffect)((()=>{c.current&&n&&y()}),[f,n,y]);const[w]=(0,pe.D)(Nt,{optimisticResponse:{__typename:"Mutation",logNotificationImpression:!0},update(e){var t,n;null!==f&&void 0!==f&&null!==(t=f.me)&&void 0!==t&&null!==(n=t.notifications)&&void 0!==n&&n.nodes&&(f.me.notifications.nodes.forEach((t=>{t&&"IMPRESSED"!==t.status&&"CLICKED"!==t.status&&e.modify({id:e.identify(t),fields:{status:()=>"IMPRESSED"}})})),e.modify({id:e.identify(f.me),fields:{unreadNotificationCount:()=>0}}))}});(0,i.useEffect)((()=>{var e,t;const o=(null===f||void 0===f||null===(e=f.me)||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.nodes)||[];if(n&&!h&&o.length>0){var i;const e=null===(i=o[0])||void 0===i?void 0:i.createdAt;(!l.current||e>l.current)&&(w({variables:{latestTimestamp:e}}),l.current=e)}}),[f,h,n,w]);const j=(0,i.useMemo)((()=>{var e,t;return((null===f||void 0===f||null===(e=f.me)||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.nodes)||[]).reduce(((e,t)=>(t&&e.push(t),e)),new Array).sort(((e,t)=>(0,dt.hT)(e.createdAt,t.createdAt)))}),[f]);let C;const{t:O}=(0,b.$G)();return C=h?(0,P.jsx)(ct.Z,{}):f&&0!==j.length?j.map((e=>(0,P.jsx)(kt,{notification:e},e.id))):(0,P.jsx)(Bt,{children:O("notificationFeed.emptyStateContentMessage")}),(0,P.jsxs)(Mt,{style:r,$reachMaxHeight:p,children:[(0,P.jsxs)(Lt,{children:[(0,P.jsx)(Dt,{children:O("notificationFeed.notificationsLabel")}),(0,P.jsx)(Rt,{onClick:()=>o(!1),children:(0,P.jsx)(St,{opacity:.4})})]}),(0,P.jsx)(Et,{ref:c,onScroll:y,children:C})]})},At=n(1653);const Ft=f.ZP.span.withConfig({displayName:"QRCodeScreen__DialogTitle",componentId:"sc-1pevjki-0"})(["font-family:'Inter';font-style:normal;font-weight:600;font-size:20px;line-height:22px;flex-grow:1;color:#ffffff;"]),$t=f.ZP.div.withConfig({displayName:"QRCodeScreen__HStack",componentId:"sc-1pevjki-1"})(["display:flex;flex-direction:row;padding:0px;margin-bottom:21px;width:258px;height:24px;gap:auto;"]),Ut=f.ZP.div.withConfig({displayName:"QRCodeScreen__VStack",componentId:"sc-1pevjki-2"})(["display:flex;flex-direction:column;justify-content:center;"]),Ht=f.ZP.div.withConfig({displayName:"QRCodeScreen__ContentContainer",componentId:"sc-1pevjki-3"})(["display:flex;flex-direction:column;align-items:center;padding:24px;gap:20px;position:absolute;width:306px;height:350px;left:calc(50% - 306px / 2);top:calc(50% - 350px / 2);"]);var qt=()=>{const e=(0,f.Fg)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.ZA,{}),(0,P.jsx)(k.hz,{width:306,height:350,children:(0,P.jsx)(Ht,{children:(0,P.jsxs)(Ut,{children:[(0,P.jsx)($t,{children:(0,P.jsx)(Ft,{children:"Scan to download"})}),(0,P.jsx)(At.Z,{value:"https://apps.apple.com/us/app/tome-for-compelling-stories/id6443572526",size:258,level:"H",bgColor:e.colors.sheetBg,fgColor:e.colors.contrast})]})})})]})},Wt=n(30362);function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Vt(Vt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M51.9952 50.0046H11.9952C9.78606 50.0046 7.9952 48.2137 7.9952 46.0046V18.0046C7.9952 15.7955 9.78606 14.0046 11.9952 14.0046H51.9952C54.2043 14.0046 55.9952 15.7955 55.9952 18.0046V46.0046C55.9952 48.2137 54.2043 50.0046 51.9952 50.0046ZM51.9952 23.0046C51.9952 22.4523 51.5475 22.0046 50.9952 22.0046H12.9952C12.4429 22.0046 11.9952 22.4523 11.9952 23.0046V27.0046C11.9952 27.5569 12.4429 28.0046 12.9952 28.0046H50.9952C51.5475 28.0046 51.9952 27.5569 51.9952 27.0046V23.0046Z"})})))),Qt=n(44196);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yt=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,Xt(Xt({ref:t,viewBox:"0 0 20 20"},e),{},{children:[(0,P.jsx)("path",{d:"M8.75 6.875C8.75 8.77348 7.35089 10.3125 5.625 10.3125C3.89911 10.3125 2.5 8.77348 2.5 6.875C2.5 4.97652 3.89911 3.4375 5.625 3.4375C7.35089 3.4375 8.75 4.97652 8.75 6.875Z"}),(0,P.jsx)("path",{d:"M4.54545 11.5625C2.03507 11.5625 0 13.2851 0 15.7955C0 16.0465 0.203507 16.25 0.454545 16.25H10.7955C11.0465 16.25 11.25 16.0465 11.25 15.7955C11.25 13.2851 9.21493 11.5625 6.70455 11.5625H4.54545Z"}),(0,P.jsx)("path",{d:"M19.5455 16.25H12.6926C12.5784 16.25 12.5 16.1261 12.5 16.0118C12.5 14.6703 12.251 13.6663 11.5267 12.7736C11.3248 12.5247 11.3541 12.142 11.6348 11.9873C12.1296 11.7147 12.6088 11.5625 13.2955 11.5625H15.4545C17.9649 11.5625 20 13.2851 20 15.7955C20 16.0465 19.7965 16.25 19.5455 16.25Z"}),(0,P.jsx)("path",{d:"M14.375 10.3125C16.1009 10.3125 17.5 8.77348 17.5 6.875C17.5 4.97652 16.1009 3.4375 14.375 3.4375C12.6491 3.4375 11.25 4.97652 11.25 6.875C11.25 8.77348 12.6491 10.3125 14.375 10.3125Z"})]})))),en=n(20225),tn=n(96012);const nn=(0,f.ZP)(en.fC).attrs({orientation:"vertical"}).withConfig({displayName:"Settingsstyles__Tabs",componentId:"w696vb-0"})(["display:grid;grid-template-areas:'menu content';grid-template-columns:166px 1fr;height:100%;outline:none;overflow:hidden;@media screen and (max-width:661px){grid-template-areas:'content';grid-template-columns:1fr;}"]),on=(0,f.ZP)(en.aV).withConfig({displayName:"Settingsstyles__Menu",componentId:"w696vb-1"})(["display:block;grid-area:menu;border-right:1px solid ",";padding:16px 12px;@media screen and (max-width:661px){display:none;}"],(e=>{let{theme:t}=e;return t.colors.contrast8})),rn=f.ZP.div.withConfig({displayName:"Settingsstyles__MenuGroup",componentId:"w696vb-2"})(["list-style-type:none;margin:0;padding:0;margin-bottom:20px;"]),sn=f.ZP.div.withConfig({displayName:"Settingsstyles__MenuGroupTitle",componentId:"w696vb-3"})(["font-size:",";line-height:1.3;padding:6px 8px;"],(e=>{let{theme:t}=e;return t.fontSizes.xxs})),an=(0,f.ZP)(en.xz).withConfig({displayName:"Settingsstyles__MenuItem",componentId:"w696vb-4"})(["align-items:center;display:flex;cursor:pointer;color:",";font-size:",";line-height:1.25;padding:4px 8px;border-radius:",";background-color:",";text-align:left;transition:background-color 0.2s ease-out;width:100%;margin-bottom:2px;&:last-child{margin-bottom:none;}svg{height:20px;width:20px;min-width:20px;margin-left:0px;margin-right:8px;fill:currentColor;}&[data-state='active']{color:",";background-color:",";}&:hover{background-color:",";}&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.contrast40}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>{let{theme:t}=e;return t.colors.tabBackground}),(e=>{let{theme:t}=e;return t.colors.tabColor}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive})),ln=(0,f.ZP)(gt.Z).withConfig({displayName:"Settingsstyles__Avatar",componentId:"w696vb-5"})(["margin-right:8px;"]),dn=f.ZP.span.withConfig({displayName:"Settingsstyles__MenuItemTextContent",componentId:"w696vb-6"})(["",""],W.wR),cn=f.ZP.div.withConfig({displayName:"Settingsstyles__Content",componentId:"w696vb-7"})(["display:flex;flex-direction:column;grid-area:content;padding:0 32px;height:100%;overflow:hidden;outline:none;"]),pn=(0,f.ZP)(en.VY).withConfig({displayName:"Settingsstyles__TabContent",componentId:"w696vb-8"})(["height:100%;-webkit-overflow-scrolling:touch;overflow-y:auto;outline:none;"]),un=(0,f.ZP)(k.r6).withConfig({displayName:"Settingsstyles__Title",componentId:"w696vb-9"})(["margin-top:24px;margin-bottom:0;"]),mn=f.ZP.div.withConfig({displayName:"Settingsstyles__TitleContainer",componentId:"w696vb-10"})(["display:flex;flex-direction:row;align-items:center;flex:1;"]),gn=f.ZP.div.withConfig({displayName:"Settingsstyles__FormContent",componentId:"w696vb-11"})(["display:flex;flex-direction:column;flex:1;"]),hn=f.ZP.label.withConfig({displayName:"Settingsstyles__Label",componentId:"w696vb-12"})(["display:block;margin-top:16px;font-size:",";line-height:14px;color:",";"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),fn=(0,f.ZP)(tn.Z).attrs({variant:"fill"}).withConfig({displayName:"Settingsstyles__Input",componentId:"w696vb-13"})([""]),bn=(0,f.ZP)(H.Z).attrs((e=>{let{disabled:t}=e;return{color:t?"default":"primary",disabled:t}})).withConfig({displayName:"Settingsstyles__Button",componentId:"w696vb-14"})(["min-width:auto;padding:0 12px;height:32px;"]),xn=f.ZP.div.withConfig({displayName:"Settingsstyles__InlineInputAndButtonContainer",componentId:"w696vb-15"})(["display:flex;gap:8px;padding-top:5px;& > ","{margin-top:0;}"],fn),vn=f.ZP.div.withConfig({displayName:"Settingsstyles__Actions",componentId:"w696vb-16"})(["display:flex;flex-direction:row;flex:0;padding:24px 0;"," + ","{margin-left:4px;}"],bn,bn),yn=f.ZP.form.withConfig({displayName:"Settingsstyles__Form",componentId:"w696vb-17"})(["display:flex;flex-direction:column;flex:1;height:100%;"]),wn=(0,f.ZP)(gn).withConfig({displayName:"Settingsstyles__WorkspaceFormContent",componentId:"w696vb-18"})(["margin-top:4px;"]);var jn=n(19148);const Cn={ADMIN:jn.ZP.t("logic.settings.adminRoleLabel"),MEMBER:jn.ZP.t("logic.settings.memberRoleLabel"),DEACTIVATED:jn.ZP.t("logic.settings.deactivatedRoleLabel")},Pn={ADMIN:jn.ZP.t("logic.settings.adminRoleActionLabelDropdownItem"),MEMBER:jn.ZP.t("logic.settings.memberRoleActionLabelDropdownItem"),DEACTIVATED:jn.ZP.t("logic.settings.deactivatedRoleActionLabelDropdownItem")};function On(e){var t;return null===(t=e.slice())||void 0===t?void 0:t.sort(((e,t)=>(0,dt.Fq)(e.name||e.email||"",t.name||t.email||"")))}var _n=n(40105),kn=n(31343);const In=f.ZP.div.withConfig({displayName:"Membersstyles__Member",componentId:"y5csc9-0"})([""," display:flex;margin-bottom:20px;"],W.qc),Tn=f.ZP.div.withConfig({displayName:"Membersstyles__MemberDetails",componentId:"y5csc9-1"})(["display:flex;flex-direction:column;justify-content:center;font-size:",";line-height:1.3;padding:0 10px;max-width:calc(100% - 36px - 55px);"],(e=>{let{theme:t}=e;return t.fontSizes.sm})),Zn=f.ZP.div.withConfig({displayName:"Membersstyles__MemberName",componentId:"y5csc9-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast})),Sn=f.ZP.span.withConfig({displayName:"Membersstyles__MemberEmail",componentId:"y5csc9-3"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast60})),Nn=f.ZP.span.withConfig({displayName:"Membersstyles__MemberAccess",componentId:"y5csc9-4"})(["color:",";margin-left:0.5ch;"],(e=>{let{theme:t}=e;return t.colors.contrast25})),Mn=f.ZP.span.withConfig({displayName:"Membersstyles__StatusTag",componentId:"y5csc9-5"})([""," margin-left:0.5ch;"],W.OX),Ln=f.ZP.span.withConfig({displayName:"Membersstyles__ResendTag",componentId:"y5csc9-6"})(["color:",";margin-left:0.5ch;cursor:pointer;&:hover{text-decoration:underline;}"],(e=>{let{theme:t}=e;return t.colors.uiAccent})),Dn=f.ZP.span.withConfig({displayName:"Membersstyles__RoleTag",componentId:"y5csc9-7"})(["display:flex;align-items:center;"," border-radius:",";padding:4px 8px;margin:4px;font-size:",";margin-right:0;margin-left:auto;"],W.OX,(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t}=e;return t.fontSizes.sm})),En=f.ZP.div.withConfig({displayName:"Membersstyles__RoleDropdownMemberRowPositioner",componentId:"y5csc9-8"})(["margin:auto 0 auto auto;padding:0;"]);var Bn=n(26190);function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,zn(zn({ref:t,viewBox:"0 0 10 10"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.854 8.859a.5.5 0 01-.708 0l-3.15-3.15-3.147 3.147a.5.5 0 01-.708-.707L4.288 5 1.142 1.855a.5.5 0 01.707-.708l3.147 3.147 3.15-3.15a.5.5 0 11.707.708l-3.15 3.15 3.15 3.15a.5.5 0 010 .707z",fill:"currentColor"})})))),Fn=n(74877),$n=n.n(Fn),Un=n(35639);const Hn=f.ZP.span.withConfig({displayName:"TokenInputstyles__Delete",componentId:"sc-18lm62h-0"})(["display:inline-flex;align-items:center;justify-content:center;cursor:pointer;padding-right:7px;color:",";",";svg{width:10px;height:10px;fill-opacity:0.4;transition:fill-opacity 0.2s ease-out;}&:hover svg{fill-opacity:0.6;}"],(e=>{let{theme:t}=e;return t.colors.contrast}),(e=>{let{visible:t}=e;return t?(0,f.iv)(["visibility:visible;"]):(0,f.iv)(["pointer-events:none;visibility:hidden;"])})),qn=f.ZP.button.attrs({type:"button"}).withConfig({displayName:"TokenInputstyles__TokenItem",componentId:"sc-18lm62h-1"})(["float:left;display:flex;align-items:center;margin:2px;padding-left:6px;height:22px;background:none;appearance:none;border-radius:",";background-color:",";color:",";transition:background-color 0.1s ease-out;&:focus{outline:1px solid ",";}",""],(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t,isEditing:n}=e;return n?"transparent":t.colors.buttonFilledBackground}),(e=>{let{theme:t,isValid:n}=e;return n?t.colors.contrast:t.colors.destructive}),(e=>{let{theme:t}=e;return t.colors.tomeBrandAccentHover}),(e=>{let{isEditing:t}=e;return!t&&(0,f.iv)(["&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.contrast12}))})),Wn=(0,f.iv)(["display:inline-flex;align-items:center;margin:0;padding:0;border:0;padding-bottom:3px;padding-top:2px;outline:none;box-shadow:none;background:none;color:",";font-size:",";font-family:",";line-height:1;caret-color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.fonts.ui}),(e=>{let{theme:t}=e;return t.colors.uiAccent})),Gn=(0,f.ZP)(Un.Z).withConfig({displayName:"TokenInputstyles__EditInput",componentId:"sc-18lm62h-2"})(["height:22px;margin-right:3px;input{"," color:",";}"],Wn,(e=>{let{theme:t}=e;return t.colors.contrast})),Vn=f.ZP.span.withConfig({displayName:"TokenInputstyles__TokenValue",componentId:"sc-18lm62h-3"})([""," color:",";margin-right:5px;"],Wn,(e=>{let{theme:t,isValid:n}=e;return n?t.colors.contrast:t.colors.destructive})),Kn=f.ZP.div.withConfig({displayName:"TokenInputstyles__TokenInputWrapper",componentId:"sc-18lm62h-4"})(["display:flex;flex:1;align-items:flex-start;"]),Qn=(0,f.ZP)($n()).withConfig({displayName:"TokenInputstyles__TokenInput",componentId:"sc-18lm62h-5"})(["display:inline;font-size:",";font-family:inherit;width:100%;min-height:32px;padding:5px 6px;margin:-2px;.token-input-token-list{display:inline;}.token-input-autosized-wrapper{float:left;overflow:hidden;margin-right:4px;input{"," margin:2px 0;padding-left:6px;","::placeholder{color:",";}::-moz-placeholder{opacity:1;}}}"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),Wn,(e=>{let{placeholder:t}=e;return t&&(0,f.iv)(["min-width:92px;"])}),(e=>{let{theme:t}=e;return t.colors.placeholderText}));function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yn=e=>{let{tokenValue:t,tokenMeta:{activated:n},onEditStart:o,onEditEnd:r,onDelete:s,readOnly:a,validate:l}=e;const d=(0,i.useRef)(null),{0:c,1:p}=(0,i.useState)(""),u=(0,i.useCallback)((()=>{p(t),o()}),[p,t,o]);(0,i.useEffect)((()=>{n&&d.current&&d.current.getInput().focus()}),[n]);const m=(0,i.useCallback)((function(){let{reset:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=0===c.length;e||t?r():r(c.trim())}),[c,r]),g=(0,i.useCallback)((e=>{p(e.target.value)}),[p]),h=(0,i.useCallback)((e=>{"Escape"===e.key&&m({reset:!0}),["Enter"," "].includes(e.key)&&(e.stopPropagation(),e.preventDefault(),m())}),[m]),f=(0,i.useCallback)((e=>{"Backspace"===e.key&&s(),"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),u())}),[s,u]),b=(0,i.useCallback)((()=>{var e;null===(e=d.current)||void 0===e||e.getInput().select()}),[d]),x=(0,i.useCallback)((()=>{m()}),[m]),v=(0,i.useMemo)((()=>!l||l(t)),[l,t]);return(0,P.jsxs)(qn,{"data-testid":"token_item","aria-label":`Edit ${t}`,onClick:Bn.Z,onDoubleClick:a?void 0:u,onKeyDown:f,isValid:v,isEditing:n,children:[n?(0,P.jsx)(Gn,{ref:d,value:c,onChange:g,onKeyDown:h,onFocus:b,onBlur:x}):(0,P.jsx)(Vn,{isValid:v,children:t}),!n&&(0,P.jsx)(Hn,{tabIndex:-1,"aria-label":`Delete ${t}`,visible:!a,onClick:e=>{e.stopPropagation(),s()},children:(0,P.jsx)(An,{})})]})};var eo=e=>{let{autoFocus:t,placeholder:n,values:o,onValuesChange:r,validate:s}=e;const{0:a,1:l}=(0,i.useState)(""),d=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(d.current&&d.current.querySelector("input")){d.current.querySelector("input").name="Search"}}),[]);return(0,P.jsx)(Kn,{onKeyDown:e=>{if("Backspace"===e.key&&!a){var t;e.preventDefault();const o=null===(t=d.current)||void 0===t?void 0:t.querySelectorAll(`.token-input-token-list ${qn}`);var n;if(o&&o.length>0)null===(n=o[o.length-1])||void 0===n||n.focus()}"Tab"===e.key&&a&&(e.preventDefault(),(()=>{var e,t,n,o;null===(e=d.current)||void 0===e||null===(t=e.querySelector("input"))||void 0===t||t.blur(),null===(n=d.current)||void 0===n||null===(o=n.querySelector("input"))||void 0===o||o.focus()})())},ref:d,children:(0,P.jsx)(Qn,{placeholder:o.length>0?void 0:n,tokenValues:o,autoFocus:t,separators:[",",";"," ","\n","\r","\r\n"],specialKeyDown:{onBackspace:0},onInputValueChange:l,onTokenValuesChange:r,customizeTokenComponent:e=>(0,P.jsx)(Yn,Xn(Xn({},e),{},{validate:s}))})})};function to(e){let{members:t,emails:n}=e;const o=(null===t||void 0===t?void 0:t.map((e=>e.email)))||[];return n.filter((e=>!1===o.includes(e)))}function no(e){let{members:t,invitations:n,emails:o,role:i,orgId:r}=e;return(0,d.oQf)({variables:{input:{role:i,emails:to({members:t,emails:o}),orgId:r}},optimisticResponse:{inviteUsers:{__typename:"InviteUsersResult",message:"",success:o}},update(e){!function(e,t,n,o){var i,r;const s=e.readQuery({query:d.gE$,variables:{includeInvitations:!0}});if(!s||null===(i=s.me)||void 0===i||!i.org)return;const a=t.map((t=>{const i=n?n.find((e=>e.email===t)):void 0;if(i)return void e.modify({id:`Invitation:${i.id}`,fields:{expired:()=>!1}});const r={__typename:"Invitation",email:t,id:t,role:o,expired:!1};return e.writeFragment({id:`Invitation:${t}`,fragment:d.Ydg,data:r,fragmentName:"InvitationFragment"})})).filter((e=>!!e));e.modify({id:e.identify(null===(r=s.me)||void 0===r?void 0:r.org),fields:{invitations:e=>[...e,...a]}})}(e,o,n,i)}})}var oo=n(1027);const io=f.ZP.form.withConfig({displayName:"Invitesstyles__InviteSection",componentId:"sc-3ku77w-0"})(["position:sticky;top:0px;display:flex;padding-bottom:20px;gap:8px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.dialogBackground})),ro=f.ZP.div.withConfig({displayName:"Invitesstyles__InputWrapper",componentId:"sc-3ku77w-1"})(["display:flex;flex:1;align-items:flex-start;background-color:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.contrast8}),(e=>{let{theme:t}=e;return t.borderRadius.sm})),so=f.ZP.div.withConfig({displayName:"Invitesstyles__RoleDropdownInvitePositioner",componentId:"sc-3ku77w-2"})(["margin:4px;"]),ao=f.ZP.span.withConfig({displayName:"Invitesstyles__MemberCount",componentId:"sc-3ku77w-3"})(["padding-left:6px;color:",";"],(e=>{let{theme:t}=e;return t.colors.memberHelpText}));var lo,co=n(57509);function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},po.apply(this,arguments)}var uo=function(e){return i.createElement("svg",po({width:8,height:6,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),lo||(lo=i.createElement("path",{d:"M1 1l2.539 3.047a.6.6 0 00.922 0L6.999 1",stroke:"#fff",strokeOpacity:.4,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};const mo=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleDropdownWrapper",componentId:"js3r27-0"})(["display:flex;align-items:center;justify-content:center;"]),go=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleName",componentId:"js3r27-1"})(["font-size:",";line-height:1.5;"],(e=>{let{theme:t}=e;return t.fontSizes.sm})),ho=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleDescription",componentId:"js3r27-2"})(["color:",";font-size:",";line-height:1.2;li:hover &{color:",";}"],(e=>{let{theme:t}=e;return t.colors.secondaryUiText}),(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.contrast})),fo=(0,f.ZP)(uo).withConfig({displayName:"RoleDropdown__DropdownArrow",componentId:"js3r27-3"})(["align-self:middle;display:inline-flex;margin:0.1em 0 0 0.35em;"]),bo=f.ZP.button.withConfig({displayName:"RoleDropdown__RoleDropdownTrigger",componentId:"js3r27-4"})(["appearance:none;background:none;cursor:pointer;display:flex;align-items:center;color:",";border-radius:",";padding:4px 8px;font-size:",";transition:background-color 0.075s ease-in-out;@media ","{&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return t.colors.secondaryUiText}),(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),co.be.mouse,(e=>{let{theme:t}=e;return t.colors.buttonTransparentBackgroundHover})),xo=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleMenu",componentId:"js3r27-5"})(["width:100%;white-space:break-spaces;"]);var vo=e=>{let{role:t,setRole:n,handleDeactivation:o}=e;const{t:r}=(0,b.$G)(),s=(0,i.useMemo)((()=>t===d.nJN.Deactivated?[{text:r("settings.members.roleDropdown.restoreAsMemberDropdownItem"),action:()=>n(d.nJN.Member)}]:[{id:"admin",text:(0,P.jsxs)(xo,{children:[(0,P.jsx)(go,{children:Pn.ADMIN}),(0,P.jsx)(ho,{children:r("settings.members.roleDropdown.adminRoleDescriptionDropdownItem")})]}),action:()=>{t!==d.nJN.Admin&&n(d.nJN.Admin)},checked:t===d.nJN.Admin},{id:"member",text:(0,P.jsxs)(xo,{children:[(0,P.jsx)(go,{children:Pn.MEMBER}),(0,P.jsx)(ho,{children:r("settings.members.roleDropdown.memberRoleDescriptionDropdownItem")})]}),action:()=>{t!==d.nJN.Member&&n(d.nJN.Member)},checked:t===d.nJN.Member},...o?[{type:"separator"},{id:"deactivate",text:(0,P.jsx)(xo,{children:(0,P.jsx)(go,{children:Pn.DEACTIVATED})}),action:o,variant:"destructive"}]:[]]),[o,t,n,r]);return(0,P.jsx)(mo,{children:(0,P.jsx)(ve.Z,{menuWidth:190,menuPosition:"below",menuAlign:"right",itemsOrFn:s,children:(0,P.jsxs)(bo,{type:"button",children:[Cn[t]," ",(0,P.jsx)(fo,{})]})})})};const yo=f.ZP.h3.withConfig({displayName:"Commonstyles__SectionHeading",componentId:"sc-8lnthi-0"})(["font-size:13px;line-height:16px;font-weight:400;margin-bottom:8px;"]),wo=f.ZP.div.withConfig({displayName:"Commonstyles__HelpText",componentId:"sc-8lnthi-1"})(["font-size:11px;line-height:13px;color:",";padding:4px 0;"],(e=>{let{theme:t}=e;return t.colors.memberHelpText}));var jo=e=>{var t;let{members:n,invitations:r}=e;const{activeMembership:s}=(0,i.useContext)(T.Z),{0:a,1:l}=(0,i.useState)([]),{0:c,1:p}=(0,i.useState)(d.nJN.Member),u=i.useRef(null),{t:m}=(0,b.$G)(jn.CJ,{keyPrefix:"settings.members.invites"}),g=!!a.length&&a.some(oo.G),[h,{loading:f}]=no({members:n,invitations:r,emails:a.filter(oo.G),role:c,orgId:(null===s||void 0===s||null===(t=s.org)||void 0===t?void 0:t.id)||""}),x=(0,i.useCallback)((async e=>{if(e.preventDefault(),g&&!f)try{var t,n,i,r;const e=await h(),o=(null===(t=e.data)||void 0===t||null===(n=t.inviteUsers)||void 0===n||n.error,(null===(i=e.data)||void 0===i||null===(r=i.inviteUsers)||void 0===r?void 0:r.success)||[]);l([]),(0,L.Sd)({message:m("numberOfUserInvitedToWorkspaceToastMessage_with_count",{count:o.length})})}catch(s){console.log(s),o.v.addError(s),(0,L.Sd)({message:m("anErrorOccurredWhileInvitingUsersToWorkspaceToastMessage")})}}),[g,f,h,l,m]),v=(0,i.useCallback)((e=>{var t;"Enter"===e.key&&document.activeElement!==u.current&&(e.preventDefault(),e.stopPropagation(),null===(t=u.current)||void 0===t||t.focus())}),[u]),y=(null===s||void 0===s?void 0:s.role)===d.nJN.Admin;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(yo,{children:[m("heading"),(0,P.jsx)(ao,{children:null===n||void 0===n?void 0:n.length})]}),(0,P.jsxs)(io,{onSubmit:x,onKeyDown:v,children:[(0,P.jsxs)(ro,{"data-testid":"invite_input",children:[(0,P.jsx)(eo,{autoFocus:!0,placeholder:m("inviteViaEmailPlaceholderText"),values:a,onValuesChange:l,validate:oo.G}),y&&(0,P.jsx)(so,{children:(0,P.jsx)(vo,{role:c,setRole:p})})]}),(0,P.jsx)(bn,{ref:u,type:"submit",disabled:!g||f,children:m("inviteButtonLabel")})]})]})};function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oo=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Po(Po({ref:t,viewBox:"0 0 48 48"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 48V48C10.7452 48 0 37.2548 0 24C5.79387e-07 10.7452 10.7452 0 24 0C37.2548 5.79387e-07 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48ZM24.0013 9.01C18.6325 9.01 14.9974 13.1536 14.9974 18.6547C14.9974 25.0447 19.1952 29.0136 24.0013 29.0136C28.8074 29.0136 33.0052 25.0446 33.0052 18.6547C33.0052 13.1537 29.37 9.01 24.0013 9.01ZM24.0013 31.9963C17.3831 31.9963 12.884 34.3063 10.3742 37.3119V37.3119C10.0254 37.7173 10.0543 38.3248 10.4401 38.6952V38.6952C18.0972 45.7686 29.9051 45.7681 37.5616 38.694V38.694C37.9474 38.3235 37.9763 37.7161 37.6273 37.3107C35.1172 34.3052 30.6187 31.9964 24.0011 31.9964L24.0013 31.9963Z",fill:"currentColor"})})))),_o=f.ZP.div.withConfig({displayName:"AvatarPending__Avatar",componentId:"cbb5sn-0"})(["color:",";width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.contrast16}),(e=>{let{size:t}=e;return t}),(e=>{let{size:t}=e;return t}));var ko=e=>{let{size:t}=e;return(0,P.jsx)(_o,{size:t,children:(0,P.jsx)(Oo,{})})};function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var To,Zo=e=>{let{invitation:t,orgId:n}=e;const{t:r}=(0,b.$G)(),{0:s,1:a}=(0,i.useState)(!1),[l]=(0,d.oQf)(),c=(0,i.useCallback)((()=>{a(!0),l({variables:{input:{role:t.role,emails:[t.email],orgId:n}},optimisticResponse:{inviteUsers:{__typename:"InviteUsersResult",message:"",success:[t.email]}},update(e){e.modify({id:e.identify(t),fields:{expired:()=>!1}})}}).then((e=>{var t,n;null!==(t=e.data)&&void 0!==t&&null!==(n=t.inviteUsers)&&void 0!==n&&n.error&&(0,L.Sd)({message:r("settings.members.resendInvite.inviteFailedReloadAndTryAgainToastErrorMessage")})})).catch((e=>{o.v.addError(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),(0,L.Sd)({message:r("settings.members.resendInvite.inviteFailedReloadAndTryAgainToastErrorMessage")})})),(0,L.Sd)({message:r("settings.members.resendInvite.newInvitationSentToastMessage")})}),[l,t,n,a,r]);return s?null:(0,P.jsx)(Ln,{onClick:c,children:r("settings.members.resendInvite.resendButtonLabel")})},So=n(59715),No=n.n(So),Mo=n(21565),Lo=n(89030),Do=n(38156);!function(e){e.GLOBAL="GLOBAL",e.LIGHT="LIGHT",e.DARK="DARK"}(To||(To={}));var Eo=To;const Bo="88px",Ro=(0,f.ZP)(Do.Z).withConfig({displayName:"Organizationstyles__ManageLogoButton",componentId:"sc-1y9qbvj-0"})(["box-shadow:",";background-color:",";&:hover{box-shadow:",";}& ","{background:",";}}"],(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBoxShadow}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBackground}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBoxShadowHover}),H.e,(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBackground})),zo=f.ZP.div.withConfig({displayName:"Organizationstyles__CheckboxContainer",componentId:"sc-1y9qbvj-1"})(["display:flex;align-items:center;margin-top:8px;margin-bottom:8px;"]),Ao=(0,f.ZP)(hn).withConfig({displayName:"Organizationstyles__CheckboxLabel",componentId:"sc-1y9qbvj-2"})(["margin-top:0;margin-left:9px;"]),Fo=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoDescription",componentId:"sc-1y9qbvj-3"})(["margin-top:8px;font-size:",";color:",";line-height:11px;a{color:",";text-decoration:underline;}"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText})),$o=(0,f.ZP)(fn).withConfig({displayName:"Organizationstyles__UploadLogoInput",componentId:"sc-1y9qbvj-4"})(["clip:rect(0 0 0 0);clip-path:inset(100%);height:1px;overflow:hidden;position:absolute;width:1px;white-space:nowrap;"]),Uo=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoManagementContainer",componentId:"sc-1y9qbvj-5"})(["margin-top:0px;height:",";width:100%;border-radius:",";"],Bo,(e=>{let{theme:t}=e;return t.borderRadius.xs})),Ho=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoBackground",componentId:"sc-1y9qbvj-6"})(["display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;height:",";width:100%;background:",";border-radius:",";cursor:",";"],Bo,(e=>{let{theme:t,logoType:n}=e;return(e=>({[Eo.GLOBAL]:e.colors.orgSettingsLogoGlobalBackground,[Eo.DARK]:e.colors.orgSettingsLogoBackground,[Eo.LIGHT]:e.colors.orgSettingsLogoBackground}))(t)[n]}),(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{cursor:t}=e;return t||"default"})),qo=f.ZP.div.withConfig({displayName:"Organizationstyles__RemoveLogoButtonBackground",componentId:"sc-1y9qbvj-7"})(["opacity:0;display:flex;transition:opacity 0.3s;position:absolute;flex-direction:column;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;background:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.orgSettingsRemoveLogoButtonBackground}),(e=>{let{theme:t}=e;return t.borderRadius.xs})),Wo=f.ZP.div.withConfig({displayName:"Organizationstyles__UploadedLogoContainer",componentId:"sc-1y9qbvj-8"})(["display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;height:",";background:transparent;&:hover ","{opacity:1;}"],Bo,qo),Go=f.ZP.h2.withConfig({displayName:"Organizationstyles__SettingsHeading",componentId:"sc-1y9qbvj-9"})(["display:block;margin-top:16px;margin-bottom:0px;font-size:",";line-height:14px;color:",";font-weight:normal;"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),Vo=f.ZP.div.withConfig({displayName:"Organizationstyles__ThemedLogoContainer",componentId:"sc-1y9qbvj-10"})(["display:grid;grid-template-columns:1fr 1fr;column-gap:16px;"]),Ko=f.ZP.p.withConfig({displayName:"Organizationstyles__UploadDescription",componentId:"sc-1y9qbvj-11"})(["font-size:11px;line-height:13px;color:",";margin:0;margin-top:8px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText})),Qo=f.ZP.div.withConfig({displayName:"FeatureCallout__Container",componentId:"sc-1izgeh4-0"})(["display:flex;flex-direction:column;align-items:flex-start;gap:8px;flex:none;order:2;flex-grow:0;"]),Jo=f.ZP.div.withConfig({displayName:"FeatureCallout__Row",componentId:"sc-1izgeh4-1"})(["width:100%;padding:12px;border-radius:",";background:",";display:flex;flex-direction:row;gap:8px;align-items:center;"],(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutBackground})),Xo=f.ZP.div.withConfig({displayName:"FeatureCallout__HeadingAndTextContainer",componentId:"sc-1izgeh4-2"})(["display:flex;flex-direction:column;gap:2px;flex-grow:2;"]),Yo=f.ZP.div.withConfig({displayName:"FeatureCallout__HeadingContainer",componentId:"sc-1izgeh4-3"})(["display:flex;gap:8px;"]),ei=f.ZP.div.withConfig({displayName:"FeatureCallout__Heading",componentId:"sc-1izgeh4-4"})(["color:",";font-size:13px;font-weight:500;line-height:16px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutTitleText})),ti=f.ZP.div.withConfig({displayName:"FeatureCallout__Text",componentId:"sc-1izgeh4-5"})(["color:",";font-size:13px;line-height:16px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutBodyText})),ni=(0,f.ZP)(H.Z).withConfig({displayName:"FeatureCallout__Button",componentId:"sc-1izgeh4-6"})(["padding:4px 10px 5px;min-width:auto;"]);var oi=e=>{let{heading:t,text:n}=e;const{t:o}=(0,b.$G)(),{openSettings:r}=(0,ne.r)(),s=(0,i.useCallback)((()=>{r(oe.u.PLANS)}),[r]);return(0,P.jsxs)(Qo,{children:[(0,P.jsx)(Go,{children:t}),(0,P.jsxs)(Jo,{children:[(0,P.jsxs)(Xo,{children:[(0,P.jsxs)(Yo,{children:[(0,P.jsx)(ei,{children:o("settings.organization.featurecallout.heading")}),(0,P.jsx)(Lo.gQ,{})]}),(0,P.jsx)(ti,{children:n})]}),(0,P.jsx)(ni,{onClick:s,children:o("settings.organization.featurecallout.buttontext")})]})]})};const ii=f.ZP.div.withConfig({displayName:"AllowedDomainsstyles__Wrapper",componentId:"sc-1yf9ojs-0"})(["","{margin-top:0;}"],Go);var ri=()=>{var e,t,n,o;const{t:i}=(0,b.$G)(jn.CJ,{keyPrefix:"settings.members.allowedDomains"}),{priceType:r}=(0,E.Z)(),s=null!==r,{data:a,refetch:l}=(0,d.O3L)(),[c]=(0,d.pFu)({onError:e=>{(0,L.Sd)({message:e.message}),l()}}),p=(null===a||void 0===a||null===(e=a.me)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.emailDomains)||[],u=null===a||void 0===a||null===(n=a.me)||void 0===n||null===(o=n.org)||void 0===o?void 0:o.id,m=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ro,{"data-testid":"allowed_domains",children:(0,P.jsx)(eo,{autoFocus:!0,placeholder:i("placeholder"),values:p,onValuesChange:e=>{const t=e.map((e=>(0,Mo.Z)(e,"@")));u&&c({variables:{orgId:u,emailDomains:t,queryEmailDomains:!0},update(e,t){var n;let{data:o}=t;const i=null===o||void 0===o||null===(n=o.updateOrganization)||void 0===n?void 0:n.emailDomains;void 0!==i&&null!==i&&e.modify({id:`Organization:${u}`,fields:{emailDomains:()=>i}})},optimisticResponse:{__typename:"Mutation",updateOrganization:{__typename:"Organization",id:u,emailDomains:t,name:"",slug:"",showTomeBranding:!1}}})},validate:No()})}),(0,P.jsx)(wo,{children:i("helpText")})]}),g=(0,P.jsx)(oi,{heading:p.length>0?i("upsell.header",{val:p,style:"long",type:"conjunction"}):"",text:i("upsell.text")});return(0,P.jsxs)(ii,{children:[(0,P.jsx)(yo,{children:i("heading")}),s?m:g]})};function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var li=()=>{var e,t,n;const o=(0,kn.s)(),r=(0,i.useRef)(),{t:s}=(0,b.$G)(),{data:a,loading:l}=(0,d.vj0)({variables:{includeInvitations:!0,includeGuests:!0,includeDeactivated:!0},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),{activeMembership:c}=(0,i.useContext)(T.Z),p=null===c||void 0===c||null===(e=c.org)||void 0===e?void 0:e.name,u=p?`${s("settings.members.membersTabInWorkspaceSettings.organizationNameAndMemberTitle",{organizationName:p})}`:`${s("settings.members.membersTabInWorkspaceSettings.membersTitle")}`,m=null===a||void 0===a||null===(t=a.me)||void 0===t?void 0:t.org,g=(null===m||void 0===m||null===(n=m.membersWithRoles)||void 0===n?void 0:n.filter((e=>{let{user:t}=e;return!!t})).map((e=>{let{user:t,role:n}=e;return ai(ai({},t),{},{email:(null===t||void 0===t?void 0:t.email)||"",role:n||d.nJN.Member})})))||[],h=(null===m||void 0===m?void 0:m.invitations)||[],f=(null===m||void 0===m?void 0:m.guests)||[],[x]=(0,d.LzE)(),v=(null===c||void 0===c?void 0:c.role)===d.nJN.Admin,y=(0,_n.Z)((e=>async t=>{v?null!==m&&void 0!==m&&m.id?await x({variables:{userId:e,orgId:m.id,role:t},update(n){n.modify({id:`Organization:${m.id}`,fields:{membersWithRoles(n,o){let{readField:i}=o;return n.map((n=>i("id",n.user)===e?{user:n.user,role:t}:n))}}})}}).catch((()=>{(0,L.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.failedToUpdateMemberRoleToastErrorMessage")})})):(0,L.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.unknownWorkspaceToastMessage")}):(0,L.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.notEnoughPermissionToastMessage")})}),[x,v,null===m||void 0===m?void 0:m.id,s]),w=(0,i.useCallback)((()=>{r.current&&(y(r.current)(d.nJN.Deactivated),o.close(),r.current=void 0)}),[o,y]),j=(0,_n.Z)((e=>()=>{o.open(),r.current=e}),[o]),C=(0,i.useCallback)((()=>{o.close()}),[o]),O=(0,i.useCallback)((()=>{r.current=void 0}),[]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(mn,{children:(0,P.jsx)(un,{children:l?(0,P.jsx)(P.Fragment,{children:"\xa0"}):u})}),!l&&(0,P.jsxs)(P.Fragment,{children:[v&&(0,P.jsx)(ri,{}),(0,P.jsx)(jo,{members:g,invitations:h}),On(g).map((e=>{var t;return(0,P.jsxs)(In,{children:[(0,P.jsx)(gt.Z,{size:36,user:e}),(0,P.jsxs)(Tn,{children:[(0,P.jsx)(Zn,{children:e.name}),(0,P.jsx)(Sn,{children:e.email})]}),v&&(null===a||void 0===a||null===(t=a.me)||void 0===t?void 0:t.id)!==e.id?(0,P.jsx)(En,{children:(0,P.jsx)(vo,{role:e.role,setRole:y(e.id),handleDeactivation:j(e.id)})}):(0,P.jsx)(Dn,{children:Cn[e.role]})]},e.id)})),On(f).map((e=>(0,P.jsxs)(In,{children:[(0,P.jsx)(gt.Z,{size:36,user:e}),(0,P.jsxs)(Tn,{children:[(0,P.jsx)(Zn,{children:e.name}),e.name!==e.email&&(0,P.jsxs)(Sn,{children:[e.email," ",(0,P.jsx)(Nn,{children:s("settings.members.membersTabInWorkspaceSettings.numberOfTomesUserCanAccess_with_count",{count:e.numGuestTomes})})]})]}),(0,P.jsx)(Dn,{children:s("settings.members.membersTabInWorkspaceSettings.guestRoleTagForGuestMember")})]},e.id))),On(h).map((e=>(0,P.jsxs)(In,{children:[(0,P.jsx)(ko,{size:36}),(0,P.jsx)(Tn,{children:(0,P.jsxs)(Sn,{children:[e.email," ",(0,P.jsx)(Mn,{children:e.expired?s("settings.members.membersTabInWorkspaceSettings.expiredInvitationStatusLabel"):s("settings.members.membersTabInWorkspaceSettings.invitedStatusTagLabel")}),(null===m||void 0===m?void 0:m.id)&&(0,P.jsx)(Zo,{invitation:e,orgId:m.id})]})}),(0,P.jsx)(Dn,{children:Cn[e.role]})]},e.id))),(0,P.jsx)(kn.Z,{ref:o.ref,title:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalTitle"),subtitle:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalSubtitle"),dismissible:!0,buttonColor:"destructive",cancelButtonText:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalCancelButtonLabel"),cancelButtonAction:C,primaryButtonContent:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalDeactivateButtonLabel"),primaryButtonAction:w,onClose:O},"confirmationModal")]})]})};var di=e=>{let{user:t}=e;const{0:n,1:o}=(0,i.useState)(t.name||""),[r,{loading:s}]=(0,d.Ioo)(),a=(0,i.useMemo)((()=>n.length>0),[n]),l=(0,i.useMemo)((()=>n!==t.name),[n,t.name]),{t:c}=(0,b.$G)(),p=(0,i.useCallback)((async e=>{if(e.preventDefault(),!s&&a&&t.id)try{await r({variables:{userId:t.id,name:n}})}catch{(0,L.Sd)({message:c("workspace.genericErrorMessage")})}}),[s,a,t.id,r,n,c]);return(0,P.jsxs)(yn,{onSubmit:p,"data-testid":"account_form",children:[(0,P.jsx)(un,{children:c("settings.title.myAccount")}),(0,P.jsxs)(wn,{children:[(0,P.jsxs)(hn,{children:[c("settings.label.nameOfUser"),(0,P.jsx)(fn,{type:"text",placeholder:c("settings.placeholder.nameOfUser"),value:n,onChange:e=>o(e.target.value),disabled:s})]}),(0,P.jsxs)(hn,{children:[c("settings.label.userEmail"),(0,P.jsx)(fn,{type:"text",placeholder:c("settings.placeholder.userEmail"),disabled:!0,value:null===t||void 0===t?void 0:t.email})]})]}),(0,P.jsx)(vn,{children:(0,P.jsx)(bn,{type:"submit",color:"primary",disabled:!a||!l||s,children:c("settings.label.updateButton")})})]})},ci=n(36409),pi=n(62830),ui=n.n(pi),mi=n(94196),gi=n(35247),hi=n(25675),fi=n.n(hi),bi=n(98838);const xi={[Eo.GLOBAL]:"All",[Eo.DARK]:"Dark",[Eo.LIGHT]:"Light"};var vi=e=>{let{logoType:t,logo:n,onUpload:o,onRemove:r}=e;const s=(0,i.useRef)(null),a=(0,i.useCallback)((()=>{var e;null===(e=s.current)||void 0===e||e.click()}),[]);return(0,P.jsx)(Uo,{children:(0,P.jsx)(u.Z,{theme:t===Eo.LIGHT?p.f8:p.$J,children:n?(0,P.jsxs)(Wo,{"data-testid":`uploaded_logo_${t.toLowerCase()}`,children:[(0,P.jsx)(Ho,{logoType:t,children:(0,P.jsx)(fi(),{src:n,layout:"fixed",objectFit:"contain",height:"36px",width:"120px",loader:bi.Z})}),(0,P.jsx)(qo,{"data-testid":"remove_logo",children:(0,P.jsx)(Ro,{type:"button",onClick:r,actionText:"Remove logo"})})]}):(0,P.jsxs)(Ho,{"data-testid":`upload_logo_${t.toLowerCase()}`,onClick:a,logoType:t,cursor:"pointer",children:[(0,P.jsx)($o,{ref:s,type:"file",id:"logoImage",name:"logoImage",accept:"image/png, image/svg+xml",onChange:o}),(0,P.jsx)(Ro,{actionText:"Upload logo"}),(0,P.jsxs)(Ko,{logoType:t,children:[xi[t]," backgrounds"]})]})})})};function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ji=e=>{var t,n,r,s,a;let{org:l}=e;const{t:c}=(0,b.$G)(),p=(0,kn.s)(),{0:u,1:m}=(0,i.useState)(),h=!(null===l||void 0===l||null===(t=l.logo)||void 0===t||!t.shouldUseThemedLogo),{apolloClient:f}=(0,g.bp)(),[x]=(0,d.pFu)(),v=(0,i.useCallback)((async()=>{l.id&&await x({variables:{orgId:l.id,logo:{shouldUseThemedLogo:!h}},update:e=>{e.modify({id:e.identify(l),fields:{logo(){return wi(wi({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{shouldUseThemedLogo:!h})}}})},optimisticResponse:{updateOrganization:{__typename:"Organization",id:l.id,name:l.name,slug:l.slug,showTomeBranding:l.showTomeBranding,logo:{__typename:"OrgLogo",shouldUseThemedLogo:!h}}}})}),[l,x,h]),y=(0,i.useCallback)((e=>{m(e),p.open()}),[p]),w=(0,i.useCallback)((()=>{m(void 0),p.close()}),[p]),j=(0,i.useCallback)((async()=>{var e;if(!l.id)return;const t=wi(wi(wi({shouldUseThemedLogo:null===(e=l.logo)||void 0===e?void 0:e.shouldUseThemedLogo},u===Eo.GLOBAL&&{imagePath:null,logoImagePathGlobal:null}),u===Eo.DARK&&{logoImagePathDark:null}),u===Eo.LIGHT&&{logoImagePathLight:null});try{await x({variables:{orgId:l.id,logo:t}}),(0,L.Sd)({message:"Logo successfully removed"})}catch(n){o.v.addError(n,{orgId:l.id}),(0,L.Sd)({message:"Logo could not be removed at this time. Please refresh and try again later."})}p.close()}),[l.id,x,null===(n=l.logo)||void 0===n?void 0:n.shouldUseThemedLogo,p,u]),C=(0,i.useCallback)(((e,t)=>{const n=(t.target.files||[])[0];if(!n)throw new Error("File not found");(0,mi.y)({apolloClient:f,orgId:l.id,onUploadComplete:async t=>{let{imagePath:n}=t;await x({variables:{orgId:l.id,logo:wi(wi(wi({},e===Eo.GLOBAL&&{logoImagePathGlobal:n,imagePath:n}),e===Eo.DARK&&{logoImagePathDark:n}),e===Eo.LIGHT&&{logoImagePathLight:n})}}),(0,L.Sd)({message:"Logo successfully added"})},file:n,onUploadError:e=>{o.v.addError(e,{orgId:l.id}),(0,L.Sd)({message:"Logo could not be updated at this time. Please refresh and try again later."})},uploadId:`orgLogo:${ui()()}`})}),[f,l.id,x]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Go,{children:c("settings.organization.logo.heading")}),(0,P.jsxs)(zo,{children:[(0,P.jsx)(gi.Z,{id:"toggle_themed_logos","data-testid":"toggle_themed_logos",height:14,width:14,checked:h,onClick:v}),(0,P.jsx)(Ao,{htmlFor:"toggle_themed_logos",children:"Use different logos for light and dark backgrounds"})]}),h?(0,P.jsxs)(Vo,{children:[(0,P.jsx)(vi,{logoType:Eo.DARK,logo:null===(r=l.logo)||void 0===r?void 0:r.imageUrlDark,onUpload:e=>C(Eo.DARK,e),onRemove:()=>y(Eo.DARK)}),(0,P.jsx)(vi,{logoType:Eo.LIGHT,logo:null===(s=l.logo)||void 0===s?void 0:s.imageUrlLight,onUpload:e=>C(Eo.LIGHT,e),onRemove:()=>y(Eo.LIGHT)})]}):(0,P.jsx)(vi,{logoType:Eo.GLOBAL,logo:null===(a=l.logo)||void 0===a?void 0:a.imageUrlGlobal,onUpload:e=>C(Eo.GLOBAL,e),onRemove:()=>y(Eo.GLOBAL)}),(0,P.jsx)(Fo,{children:"Logo appears in play mode on every tome by default. SVG and PNG files only."}),(0,P.jsx)(kn.Z,{ref:p.ref,title:"Remove logo?",subtitle:"Your logo will be removed from every tome in your workspace, including all publicly shared tomes.",dismissible:!0,buttonColor:"destructive",cancelButtonText:"Cancel",cancelButtonAction:w,primaryButtonContent:"Remove",primaryButtonAction:j},"removeLogoModal")]})},Ci=()=>{const{t:e}=(0,b.$G)();return(0,P.jsx)(oi,{heading:e("settings.organization.logo.heading"),text:e("settings.organization.featurecallout.text.logo")})},Pi=e=>{let{org:t}=e;const{t:n}=(0,b.$G)(),o=!(null===t||void 0===t||!t.showTomeBranding),[r]=(0,d.pFu)(),s=(0,i.useCallback)((()=>{t.id&&r({variables:{orgId:t.id,showTomeBrandingPreference:!o},update:e=>{e.modify({id:e.identify(t),fields:{showTomeBranding:()=>!o}})},optimisticResponse:{updateOrganization:{__typename:"Organization",id:t.id,name:t.name,slug:t.slug,logo:t.logo,showTomeBranding:!o}}})}),[t,o,r]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Go,{children:n("settings.organization.branding.heading")}),(0,P.jsxs)(zo,{children:[(0,P.jsx)(gi.Z,{id:"toggle_tome_branding","data-testid":"toggle_tome_branding",height:14,width:14,checked:o,onClick:s}),(0,P.jsx)(Ao,{htmlFor:"toggle_tome_branding",children:n("settings.organization.branding.checkboxLabel")})]})]})},Oi=()=>{const{t:e}=(0,b.$G)();return(0,P.jsx)(oi,{heading:e("settings.organization.branding.heading"),text:e("settings.organization.featurecallout.text.branding")})};var _i=e=>{var t;let{org:n,isAdmin:o,baseFrontendUrl:r}=e;const{0:s,1:a}=(0,i.useState)(n.name),{0:l,1:c}=(0,i.useState)(n.slug),[p,{loading:u}]=(0,d.pFu)(),{priceType:m}=(0,E.Z)(),{0:g,1:h}=(0,i.useState)(!1),[f,{data:b,error:x}]=(0,d.zlY)({fetchPolicy:"no-cache"}),v=s.length>0,y=s!==n.name;(0,i.useEffect)((()=>{var e;(void 0!==(null===b||void 0===b||null===(e=b.slug)||void 0===e?void 0:e.slug)||x)&&h(!1)}),[b,u,x]);const w=(0,i.useMemo)((()=>(0,ci.Z)((async e=>{f({variables:{orgName:e}})}),750)),[f]);(0,i.useEffect)((()=>{var e,t;null!==b&&void 0!==b&&null!==(e=b.slug)&&void 0!==e&&e.slug&&c(y?null===b||void 0===b||null===(t=b.slug)||void 0===t?void 0:t.slug:n.slug)}),[null===b||void 0===b||null===(t=b.slug)||void 0===t?void 0:t.slug,y,n.slug]);const j=`${r}/${l}`,C=(0,i.useCallback)((e=>{const t=e.target.value;a(t),t&&(h(!0),w(t))}),[w]),O=(0,i.useCallback)((async e=>{if(e.preventDefault(),!u&&v&&n.id)try{await p({variables:{orgId:n.id,name:s,slug:l}})}catch{(0,L.Sd)({message:"An error occurred. Try again later."})}}),[u,v,n.id,l,s,p]);return(0,P.jsxs)(yn,{onSubmit:O,children:[(0,P.jsx)(un,{children:n.name}),(0,P.jsxs)(wn,{children:[(0,P.jsxs)(hn,{children:["Workspace name",(0,P.jsxs)(xn,{children:[(0,P.jsx)(fn,{type:"text",id:"org-name",name:"org-name",value:s,onChange:C,disabled:!o}),(0,P.jsx)(bn,{type:"submit",disabled:g||!v||!y||u,children:"Update"})]})]}),(0,P.jsxs)(hn,{children:["Workspace URL",(0,P.jsx)(fn,{type:"text",id:"slug",name:"slug",disabled:!0,value:j})]}),m&&(0,P.jsx)(ji,{org:n})||(0,P.jsx)(Ci,{}),m&&(0,P.jsx)(Pi,{org:n})||(0,P.jsx)(Oi,{})]})]})},ki=n(46075),Ii=n(16963);const Ti=f.ZP.div.withConfig({displayName:"Plansstyles__PlansContainer",componentId:"sc-1f7qq2w-0"})(["display:flex;gap:16px;padding-bottom:32px;"]),Zi=f.ZP.h3.withConfig({displayName:"Plansstyles__Header",componentId:"sc-1f7qq2w-1"})(["margin:0;font-size:",";color:",";font-weight:600;"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),Si=f.ZP.div.withConfig({displayName:"Plansstyles__PricingContainer",componentId:"sc-1f7qq2w-2"})(["display:flex;flex-direction:column;gap:6px;margin-bottom:12px;"]),Ni=(0,f.iv)(["font-size:11px;line-height:13px;"]),Mi=(0,f.ZP)(H.Z).withConfig({displayName:"Plansstyles__PlansButton",componentId:"sc-1f7qq2w-3"})(["width:100%;font-size:",";",""],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{disabled:t,variant:n}=e;return"text"===n&&t&&(0,f.iv)(["outline:1px solid rgba(255,255,255,0.12);"])})),Li=f.ZP.div.withConfig({displayName:"Plansstyles__ToggleContainer",componentId:"sc-1f7qq2w-4"})([""," width:100%;display:flex;gap:8px;align-items:center;justify-content:end;padding-bottom:16px;color:",";"],Ni,(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText})),Di=f.ZP.div.withConfig({displayName:"Plansstyles__TitleContainer",componentId:"sc-1f7qq2w-5"})(["display:flex;align-items:baseline;"]),Ei=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureHeading",componentId:"sc-1f7qq2w-6"})(["font-weight:600;padding-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),Bi=f.ZP.div.withConfig({displayName:"Plansstyles__Feature",componentId:"sc-1f7qq2w-7"})(["font-weight:400;display:flex;align-items:flex-start;> *{flex:none;}","{fill:",";margin-right:6px;width:14px;height:14px;transform:translateY(-1px);}"],A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText})),Ri=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureGroup",componentId:"sc-1f7qq2w-8"})(["font-size:11px;padding-top:4px;& ",":not(:last-child){padding-bottom:6px;}"],Bi),zi=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureGroupExpandLabel",componentId:"sc-1f7qq2w-9"})(["color:",";position:relative;&:hover{color:",";cursor:pointer;","{fill:",";}}","{fill:",";position:absolute;width:13px;height:13px;}"],(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabel}),(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabelHover}),A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabelHover}),A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabel})),Ai=f.ZP.div.withConfig({displayName:"Plansstyles__Plan",componentId:"sc-1f7qq2w-10"})(["width:207px;padding:16px;border-radius:16px;background:",";color:",";"," > h3{margin-bottom:12px;}> button,a{margin-bottom:20px;}& ",":not(:last-child){margin-bottom:12px;}"],(e=>{let{theme:t}=e;return t.colors.plansSectionBackground}),(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText}),W.qc,Ri),Fi=f.ZP.div.withConfig({displayName:"Plansstyles__DowngradeModalContent",componentId:"sc-1f7qq2w-11"})(["padding-top:12px;padding-bottom:4px;color:",";",""],(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText}),W.qc),$i=(0,f.ZP)(ct.T).attrs((e=>{let{theme:t}=e;return{backgroundColor:t.colors.loadingBackground,foregroundColor:t.colors.loadingForeground}})).withConfig({displayName:"Plansstyles__Loading",componentId:"sc-1f7qq2w-12"})([""]),Ui=f.ZP.div.withConfig({displayName:"Pricing__Price",componentId:"vwrycz-0"})(["font-weight:600;font-size:28px;color:",";"],(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),Hi=f.ZP.div.withConfig({displayName:"Pricing__Period",componentId:"vwrycz-1"})([""," white-space:pre;"],Ni);var qi=e=>{let{freePlan:t,priceType:n}=e;const{t:o}=(0,b.$G)();let i=0,r="";switch(n){case d.FTz.ProMonthly:i=10,r=o("settings.plans.proPeriodMonthly");break;case d.FTz.ProAnnually:i=8,r=o("settings.plans.proPeriodAnnually")}return t&&(i=0,r=o("settings.plans.freePeriod")),(0,P.jsxs)(Si,{children:[(0,P.jsx)(Ui,{children:o("intlCurrencyWithOptionsSimplified",{val:i,notation:"compact",compactDisplay:"short"})}),(0,P.jsx)(Hi,{children:r})]})},Wi=n(24581);var Gi=(0,i.forwardRef)(((e,t)=>{let{children:n}=e;const{t:o}=(0,b.$G)(),{apolloClient:r}=(0,g.bp)(),[s]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Cancel},onError:e=>{(0,L.Sd)({message:e.message})}}),a=(0,kn.s)(),{0:l,1:c}=(0,i.useState)(!1);(0,i.useImperativeHandle)(t,(()=>({open:a.open,close:a.close})));return(0,P.jsxs)(kn.Z,{ref:a.ref,title:o("settings.plans.downgrade.modalTitle"),subtitle:o("settings.plans.downgrade.modalContent"),primaryButtonContent:l?(0,P.jsx)($i,{size:16}):o("settings.plans.downgrade.buttonTitle"),primaryButtonAction:()=>{M.ZP.reportPaymentEvent({apolloClient:r,trackEventType:M.nM.CLICK_DOWNGRADE_SUBMIT}),(async()=>{var e;c(!0);const{data:t}=await s(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n?window.location.assign(n):c(!1)})()},cancelButtonText:o("cancel"),cancelButtonAction:()=>{M.ZP.reportPaymentEvent({apolloClient:r,trackEventType:M.nM.CLICK_DOWNGRADE_CANCEL}),a.close()},buttonColor:"destructive",dismissible:!0,children:[(0,P.jsx)(Fi,{children:(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:o("settings.plans.downgrade.features.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Wi.Z,{}),o("settings.plans.downgrade.features.unlimitedCreation")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Wi.Z,{}),o("settings.plans.downgrade.features.aiCredits")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Wi.Z,{}),o("settings.plans.downgrade.features.exportToPDF")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Wi.Z,{}),o("settings.plans.downgrade.features.customLogos")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Wi.Z,{}),o("settings.plans.downgrade.features.tomeBranding")]})]})}),n]})})),Vi=n(75802);var Ki=e=>{let{heading:t,features:n,limit:o}=e;const{t:r}=(0,b.$G)(),{0:s,1:a}=(0,i.useState)((()=>n.length<=o)),l=s?n.length:o;return(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:t}),n.slice(0,l).map((e=>(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),e]},e))),!s&&(0,P.jsxs)(zi,{onClick:()=>a(!0),children:[r("settings.plans.features.moreButtonLabel",{count:n.length-l}),(0,P.jsx)(Vi.Z,{})]})]})};function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xi=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,Ji(Ji({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,P.jsx)("path",{d:"M19 26C19 24.8954 19.8954 24 21 24H43C44.1046 24 45 24.8954 45 26C45 27.1046 44.1046 28 43 28H21C19.8954 28 19 27.1046 19 26Z"}),(0,P.jsx)("path",{d:"M21 32C19.8954 32 19 32.8954 19 34C19 35.1046 19.8954 36 21 36H37C38.1046 36 39 35.1046 39 34C39 32.8954 38.1046 32 37 32H21Z"}),(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 22V38.4706C10 42.629 13.371 46 17.5294 46C17.7893 46 18 46.2107 18 46.4706V51.7299C18 53.4256 19.9777 54.3519 21.2804 53.2664L29.4437 46.4636C29.8032 46.164 30.2562 46 30.7241 46H46C50.4183 46 54 42.4183 54 38V22C54 17.5817 50.4183 14 46 14H18C13.5817 14 10 17.5817 10 22ZM14 22V38C14 40.2091 15.7909 42 18 42H21C21.5523 42 22 42.4477 22 43V46.9129C22 47.3401 22.5011 47.5705 22.8254 47.2925L28.4383 42.4815C28.8008 42.1708 29.2624 42 29.7398 42H46C48.2091 42 50 40.2091 50 38V22C50 19.7909 48.2091 18 46 18H18C15.7909 18 14 19.7909 14 22Z"})]}))));const Yi=f.ZP.div.withConfig({displayName:"ContactUs__IconContainer",componentId:"bwrsj3-0"})(["height:34px;& svg{height:100%;fill:",";}"],(e=>e.theme.colors.workspaceEnterprisePlanIcon)),er=f.ZP.div.withConfig({displayName:"ContactUs__ContactUsLabel",componentId:"bwrsj3-1"})([""," height:26px;"],Ni);var tr=()=>{const{t:e}=(0,b.$G)();return(0,P.jsxs)(Si,{children:[(0,P.jsx)(Yi,{children:(0,P.jsx)(Xi,{})}),(0,P.jsx)(er,{children:e("settings.plans.contactForPricing")})]})};const nr="PlanTypeToggle";var or;!function(e){e.ACTIVE_SUBSCRIPTION_EXISTS="ACTIVE_SUBSCRIPTION_EXISTS"}(or||(or={}));var ir=()=>{const{priceType:e,isPendingCancellation:t,refetchOrgPaymentsQuery:n}=(0,E.Z)(),{0:o,1:r}=(0,i.useState)(e??d.FTz.ProAnnually),{t:s}=(0,b.$G)(),{apolloClient:a}=(0,g.bp)(),l=(0,i.useRef)(),{0:c,1:p}=(0,i.useState)(!1),u=e=>{(0,L.Sd)({message:e.message})},[m]=(0,d.xN_)({onError:async e=>{if(e.graphQLErrors.map((e=>{var t;return null===(t=e.extensions)||void 0===t?void 0:t.code})).filter((e=>!!e)).find((e=>e===or.ACTIVE_SUBSCRIPTION_EXISTS))){var t,o;const i=await n();null!==i&&void 0!==i&&null!==(t=i.data.me)&&void 0!==t&&null!==(o=t.org)&&void 0!==o&&o.priceType||u(e)}else u(e)}});(0,i.useEffect)((()=>{const e=setTimeout(n,1e3);return()=>clearTimeout(e)}),[]);const[h]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Default},onError:e=>{(0,L.Sd)({message:e.message})}}),f=!!e,x=f?t?{enabled:!1,label:s("settings.plans.nextPlan")}:{enabled:!0,label:s("settings.plans.downgrade.buttonTitle")}:{enabled:!1,label:s("settings.plans.current")},v=(()=>{if(!f)return{enabled:!0,label:s("settings.plans.upgrade")};if(t)return{enabled:!1,label:s("settings.plans.endingSoon")};if(e===o)return{enabled:!1,label:s("settings.plans.current")};return{enabled:!0,label:s("settings.plans.change",{interval:o===d.FTz.ProAnnually?s("settings.plans.yearlyLower"):s("settings.plans.monthlyLower")})}})();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(Di,{children:[(0,P.jsx)(un,{children:s("settings.plans.plans")}),(0,P.jsxs)(Li,{children:[(0,P.jsx)("label",{htmlFor:nr,children:s("settings.plans.yearly")}),(0,P.jsx)(ki.Z,{inputId:nr,width:"24px",height:"12px",onClick:()=>{r((e=>e===d.FTz.ProMonthly?d.FTz.ProAnnually:d.FTz.ProMonthly))},onBgColor:!0,radius:4,checked:o===d.FTz.ProMonthly}),(0,P.jsx)("label",{htmlFor:nr,children:s("settings.plans.monthly")})]})]}),(0,P.jsxs)(Ti,{children:[(0,P.jsxs)(Ai,{children:[(0,P.jsx)(Zi,{children:s("settings.plans.free")}),(0,P.jsx)(qi,{priceType:o,freePlan:!0}),(0,P.jsx)(Mi,{variant:x.enabled?"contained":"text",onClick:()=>{var e;null===(e=l.current)||void 0===e||e.open(),M.ZP.reportPaymentEvent({apolloClient:a,trackEventType:M.nM.CLICK_DOWNGRADE_BUTTON})},disabled:!x.enabled,"data-testid":"free_plan_button",children:x.label}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.limitedForWorkspaces")]})]}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.aiCompute.limited")]})]})]}),(0,P.jsxs)(Ai,{children:[(0,P.jsx)(Zi,{children:s("settings.plans.pro")}),(0,P.jsx)(qi,{priceType:o,freePlan:!1}),(0,P.jsx)(Mi,{color:v.enabled?"primary":"default",variant:v.enabled?"contained":"text",onClick:async e=>{e.detail>1||(p(!0),f?await(async()=>{var e;const{data:t}=await h(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n&&window.location.assign(n)})():await(async()=>{var e;const{data:t}=await m({variables:{priceType:o}});M.ZP.reportPaymentEvent({apolloClient:a,trackEventType:M.nM.CLICK_PLANS_PURCHASE_BUTTON,properties:{priceType:o}});const n=null===t||void 0===t||null===(e=t.createStripeCheckoutSession)||void 0===e?void 0:e.checkoutUrl;n&&window.location.assign(n)})(),p(!1))},disabled:!v.enabled,"data-testid":"pro_plan_button",children:c?(0,P.jsx)($i,{size:16}):v.label}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.aiCompute.unlimitedForIndividuals")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.aiCompute.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.everythingFreePlus.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.everythingFreePlus.exportToPDF")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.everythingFreePlus.branding")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.everythingFreePlus.customLogo")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.everythingFreePlus.support")]})]})]}),(0,P.jsxs)(Ai,{children:[(0,P.jsx)(Zi,{children:s("settings.plans.enterprise")}),(0,P.jsx)(tr,{}),(0,P.jsx)(Mi,{component:"a",href:"mailto:enterprise@tome.page","data-testid":"enterprise_plan_button",children:s("settings.plans.contactUs")}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Ri,{children:[(0,P.jsx)(Ei,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.aiCompute.unlimitedForIndividuals")]}),(0,P.jsxs)(Bi,{children:[(0,P.jsx)(Ii.Z,{}),s("settings.plans.features.aiCompute.unlimitedForWorkspaces")]})]}),(0,P.jsx)(Ki,{heading:s("settings.plans.features.everythingProPlus.heading"),limit:3,features:[s("settings.plans.features.everythingProPlus.customTiles"),s("settings.plans.features.everythingProPlus.whiteGlove"),s("settings.plans.features.everythingProPlus.dedicated"),s("settings.plans.features.everythingProPlus.templates"),s("settings.plans.features.everythingProPlus.customFonts"),s("settings.plans.features.everythingProPlus.customSubDomains"),s("settings.plans.features.everythingProPlus.analytics"),s("settings.plans.features.everythingProPlus.sso")]})]})]}),(0,P.jsx)(Gi,{ref:l})]})},rr=n(67171);const sr=f.ZP.div.withConfig({displayName:"Billing__BillingContainer",componentId:"sc-1avoa3t-0"})(["display:flex;flex-direction:column;height:100%;position:relative;"]),ar=f.ZP.div.withConfig({displayName:"Billing__BillingContent",componentId:"sc-1avoa3t-1"})(["display:flex;flex-grow:1;flex-direction:column;align-items:center;justify-content:center;gap:16px;position:absolute;width:100%;height:100%;"]),lr=f.ZP.span.withConfig({displayName:"Billing__SpinnerLabel",componentId:"sc-1avoa3t-2"})(["font-size:",";line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),dr=()=>{const e=(0,f.Fg)();return(0,P.jsx)(rr.Z,{size:28,stroke:2,rotationDuration:1,background:e.colors.billingSettingsSpinnerBackground,foreground:e.colors.billingSettingsSpinnerForeground})};var cr=()=>(0,P.jsxs)(sr,{children:[(0,P.jsx)(un,{children:jn.ZP.t("settings.tab.billing")}),(0,P.jsxs)(ar,{children:[(0,P.jsx)(dr,{}),(0,P.jsx)(lr,{children:jn.ZP.t("settings.label.stripeRedirect")})]})]});const pr=(0,f.ZP)(Wt.Z).withConfig({displayName:"Settings__StyledBuilding",componentId:"hlqhwl-0"})(["margin-left:5px;"]);var ur=i.forwardRef(((e,t)=>{var n;let{baseFrontendUrl:o}=e;const{user:r,loading:s,activeMembership:a}=(0,i.useContext)(T.Z),{selectedSettingsTab:l,settingsChanged:c}=(0,ne.r)(),{priceType:p}=(0,E.Z)(),{apolloClient:u}=(0,g.bp)(),[m]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Default},onError:e=>{(0,L.Sd)({message:e.message})}}),{t:h}=(0,b.$G)();if(!r||s)return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.ZA,{}),(0,P.jsx)(k.hz,{width:883,height:532,ref:t})]});const f=(null===a||void 0===a?void 0:a.role)===d.nJN.Admin;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.ZA,{}),(0,P.jsx)(k.hz,{width:883,height:532,ref:t,"data-testid":"settings_modal",children:(0,P.jsxs)(nn,{value:l,onValueChange:e=>{const t=(0,ne.C)(e);t&&(c(t,t!==oe.u.BILLING),t===oe.u.PLANS&&M.ZP.reportPaymentEvent({apolloClient:u,trackEventType:M.nM.CLICK_PLAN_TAB}),t===oe.u.BILLING&&((async()=>{var e;const{data:t}=await m(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n&&window.location.assign(n)})(),M.ZP.reportPaymentEvent({apolloClient:u,trackEventType:M.nM.CLICK_BILLING_TAB})))},children:[(0,P.jsxs)(on,{children:[(0,P.jsxs)(rn,{children:[(0,P.jsx)(sn,{children:h("settings.tab.me")}),(0,P.jsx)(rn,{children:(0,P.jsxs)(an,{value:oe.u.ME,"data-testid":"my_account_tab",children:[!s&&r&&(0,P.jsx)(ln,{size:20,user:r}),(0,P.jsx)(dn,{children:!s&&(null===r||void 0===r?void 0:r.name)})]})})]}),(0,P.jsxs)(rn,{children:[(0,P.jsx)(sn,{children:h("settings.tab.team")}),(0,P.jsxs)(rn,{children:[(0,P.jsxs)(an,{value:oe.u.ORGANIZATION,"data-testid":"organization_tab",children:[(0,P.jsx)(pr,{}),(0,P.jsx)(dn,{children:null===a||void 0===a||null===(n=a.org)||void 0===n?void 0:n.name})]}),(0,P.jsxs)(an,{value:oe.u.MEMBERS,"data-testid":"members_tab",children:[(0,P.jsx)(Yt,{}),(0,P.jsx)(dn,{children:h("settings.tab.members")})]}),(0,P.jsxs)(an,{value:oe.u.PLANS,"data-testid":"plan_tab",children:[(0,P.jsx)(te,{}),(0,P.jsx)(dn,{children:h("settings.tab.plans")})]}),p&&(0,P.jsxs)(an,{value:oe.u.BILLING,"data-testid":"billing_tab",children:[(0,P.jsx)(Kt,{}),(0,P.jsx)(dn,{children:h("settings.tab.billing")}),(0,P.jsx)(Qt.Z,{style:{marginLeft:4,width:16,height:16}})]})]})]})]}),(0,P.jsxs)(cn,{children:[(0,P.jsx)(pn,{value:oe.u.ME,children:(0,P.jsx)(di,{user:r})}),(0,P.jsx)(pn,{value:oe.u.MEMBERS,children:(0,P.jsx)(li,{})}),(0,P.jsx)(pn,{value:oe.u.PLANS,children:(0,P.jsx)(ir,{})}),(null===a||void 0===a?void 0:a.org)&&(0,P.jsx)(pn,{value:oe.u.ORGANIZATION,children:(0,P.jsx)(_i,{org:a.org,isAdmin:f,baseFrontendUrl:o})}),p&&(0,P.jsx)(pn,{value:oe.u.BILLING,children:(0,P.jsx)(cr,{})})]})]})})]})}));function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=function(e){var t;const{0:n,1:o}=(0,i.useState)(!1),{data:r}=(0,d.tEA)(),s=(null===r||void 0===r||null===(t=r.me)||void 0===t?void 0:t.unreadNotificationCount)??0;return(0,d.xau)({skip:!e,variables:{userId:e},onData(e){var t;let{client:{cache:n},data:i}=e;const s=null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.notification;s&&null!==r&&void 0!==r&&r.me&&(n.modify({id:n.identify(r.me),fields:{notifications:e=>gr(gr({},e),{},{nodes:[s,...e.nodes]})}}),o(!0))}}),{hasUnreadNotifications:s>0||n,clearNotificationStatus:(0,i.useCallback)((()=>{o(!1)}),[])}},fr=n(64487);const br=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileStyles",componentId:"sc-13421wt-0"})(["display:flex;flex-direction:row;align-items:center;"]),xr=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileNameLabel",componentId:"sc-13421wt-1"})(["margin-left:","px;display:flex;flex-direction:column;align-items:flex-start;flex:1;overflow:hidden;"],(e=>e.theme.iconSize/2)),vr=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileName",componentId:"sc-13421wt-2"})(["font-size:",";font-weight:600;line-height:18px;width:100%;"," ",""],(e=>e.theme.fontSizes.smmd),W.wR,(e=>{let{$loading:t,theme:n}=e;return t&&(0,f.iv)(["width:63px;height:12px;border-radius:4px;margin-bottom:6px;background-color:",";"],n.colors.contrast16)})),yr=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileEmail",componentId:"sc-13421wt-3"})(["margin-top:1px;font-size:",";line-height:13px;color:",";width:100%;"," ",""],(e=>e.theme.fontSizes.xxs),(e=>e.theme.colors.contrast40),W.wR,(e=>e.$loading&&(0,f.iv)(["width:118px;height:12px;margin-top:2px;border-radius:4px;background-color:",";"],e.theme.colors.contrast8)));var wr=e=>{let{user:t,loading:n}=e;return(0,P.jsxs)(br,{children:[(0,P.jsx)(gt.Z,{size:24,user:t||{}}),(0,P.jsxs)(xr,{children:[(0,P.jsx)(vr,{"data-testid":"profile_name",$loading:n,children:null===t||void 0===t?void 0:t.name}),(0,P.jsx)(yr,{$loading:n,children:null===t||void 0===t?void 0:t.email})]}),(0,P.jsx)(uo,{})]})};const jr=(0,f.ZP)(Ge.nx).withConfig({displayName:"ProfileMenu__ProfileSidebarItem",componentId:"sc-1rl12ck-0"})(["padding-top:5px;padding-bottom:5px;"]);var Cr=e=>{let{loading:t,openSettings:n,setIsQRCodeOpen:r,user:s}=e;const{0:a,1:l}=(0,i.useState)(!1),{activeMembership:d,flags:c}=(0,i.useContext)(T.Z),{t:p}=(0,b.$G)(),u=(0,i.useCallback)((()=>{r(!0)}),[r]),m=()=>{window.open(`https://slack.com/oauth/authorize?scope=bot&client_id=1643590093635.1981156424149&state=${null===s||void 0===s?void 0:s.id}`,"_blank")},g=[];return null!==d&&void 0!==d&&d.org&&g.push({text:p("profileMenuSectionLabel.settings"),action:n}),null!==c&&void 0!==c&&c.slackbot&&g.push({text:p("profileMenuSectionLabel.addToSlack"),action:m}),g.push({text:p("profileMenuSectionLabel.logOut"),action:()=>{o.v.removeUser(),fr.e((e=>e.setUser(null))),window.location.href="/logout"}}),g.push({type:"separator"}),g.push({text:p("profileMenuSectionLabel.tomeForIOS"),action:u}),(0,P.jsx)(ve.Z,{menuWidth:200,disabled:t,menuPosition:"below",menuAlign:"right",additionalSpacing:-2,setOpenState:l,itemsOrFn:g,children:(0,P.jsx)(jr,{$selected:a,children:(0,P.jsx)(wr,{user:s,loading:t})})})};function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Or(Or({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M32 56C18.7452 56 8 45.2548 8 32C8 18.7452 18.7452 8 32 8C45.2548 8 56 18.7452 56 32V32C56 45.2548 45.2548 56 32 56ZM52 32V32.0008C52.0038 20.9551 43.0526 11.9977 32.0069 11.9939C20.9612 11.9901 12.0038 20.9413 12 31.987C11.9983 36.957 13.847 41.7495 17.186 45.4307C17.4631 45.7324 17.9322 45.7524 18.2339 45.4753C18.2577 45.4534 18.2801 45.43 18.3009 45.4051C20.7947 42.3539 25.3146 39.9958 32.0009 39.9958C38.6872 39.9958 43.2058 42.3539 45.7 45.4045C45.963 45.7186 46.4307 45.76 46.7447 45.4971C46.7696 45.4763 46.793 45.4539 46.8149 45.43C50.157 41.7562 52.0062 36.9665 52 32L52 32ZM32.0012 37.0137C27.1953 37.0137 22.9972 33.0447 22.9972 26.6548C22.9972 21.1537 26.6326 17.0101 32.0012 17.0101C37.3698 17.0101 41.0051 21.1537 41.0051 26.6548C41.0051 33.0447 36.8073 37.0137 32.0012 37.0137Z"})}))));function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tr=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Ir(Ir({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 8C22.7909 8 21 9.79086 21 12V15.5C21 15.7761 20.7761 16 20.5 16H14.0001C12.8956 16 12.0001 16.8954 12.0001 18C12.0001 19.1046 12.8956 20 14.0001 20H16L17.7901 52.2219C17.9079 54.3415 19.661 56 21.7839 56H42.2161C44.339 56 46.0921 54.3415 46.2099 52.2219L48 20H50.0001C51.1047 20 52.0001 19.1046 52.0001 18C52.0001 16.8954 51.1047 16 50.0001 16H43.5C43.2239 16 43 15.7761 43 15.5V12C43 9.79086 41.2091 8 39 8H25ZM38.75 16H25.25C25.1119 16 25 15.8881 25 15.75V13C25 12.4477 25.4477 12 26 12H38C38.5523 12 39 12.4477 39 13V15.75C39 15.8881 38.8881 16 38.75 16ZM38 26C38 24.8954 37.1046 24 36 24C34.8954 24 34 24.8954 34 26V46C34 47.1046 34.8954 48 36 48C37.1046 48 38 47.1046 38 46V26ZM28 24C29.1046 24 30 24.8954 30 26V46C30 47.1046 29.1046 48 28 48C26.8954 48 26 47.1046 26 46V26C26 24.8954 26.8954 24 28 24Z"})}))));function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nr=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Sr(Sr({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 56C45.2548 56 56 45.2548 56 32C56 18.7452 45.2548 8 32 8C18.7452 8 8 18.7452 8 32C8 45.2548 18.7452 56 32 56ZM34 20C34 18.8954 33.1046 18 32 18C30.8954 18 30 18.8954 30 20V32C30 32.5304 30.2107 33.0391 30.5858 33.4142L39.0858 41.9142C39.8668 42.6953 41.1332 42.6953 41.9142 41.9142C42.6953 41.1332 42.6953 39.8668 41.9142 39.0858L34 31.1716V20Z"})}))));function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dr=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Lr(Lr({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M13.6084 42.1C14.546 41.8557 15.3811 41.3183 15.9919 40.5662C16.6027 39.814 16.9573 38.8865 17.004 37.9187L18.5975 24.5178C18.9215 21.8711 20.0281 19.3813 21.7755 17.3672C23.523 15.3531 25.8318 13.9064 28.4063 13.2123C28.5056 12.3287 28.927 11.5127 29.5899 10.9201C30.2528 10.3276 31.1108 10 31.9999 10C32.889 10 33.747 10.3276 34.4099 10.9201C35.0728 11.5127 35.4942 12.3287 35.5935 13.2123C38.168 13.9065 40.4767 15.3532 42.224 17.3673C43.9714 19.3814 45.0779 21.8711 45.4018 24.5178L46.9954 37.9187C47.0422 38.8865 47.3969 39.8141 48.0078 40.5663C48.6187 41.3184 49.4539 41.8558 50.3916 42.1C50.9024 42.2366 51.3456 42.5551 51.6381 42.9956C51.9305 43.4361 52.0519 43.9682 51.9796 44.4919C51.9072 45.0157 51.646 45.4949 51.2451 45.8396C50.8442 46.1843 50.3312 46.3707 49.8025 46.3636H14.1973C13.6687 46.3706 13.1557 46.1842 12.7548 45.8395C12.3539 45.4948 12.0927 45.0156 12.0204 44.4918C11.9481 43.9681 12.0695 43.436 12.362 42.9955C12.6544 42.5551 13.0977 42.2366 13.6084 42.1ZM31.9998 53.6363C30.6325 53.6393 29.3135 53.1301 28.3029 52.2091C27.2922 51.2881 26.663 50.022 26.5392 48.6603C26.5359 48.5981 26.5453 48.536 26.5669 48.4777C26.5886 48.4193 26.622 48.3661 26.6651 48.3212C26.7082 48.2764 26.76 48.2408 26.8175 48.2168C26.8749 48.1929 26.9366 48.1809 26.9988 48.1818H37.0008C37.0631 48.1809 37.1248 48.1928 37.1822 48.2168C37.2396 48.2408 37.2915 48.2763 37.3346 48.3212C37.3777 48.3661 37.4111 48.4193 37.4328 48.4776C37.4544 48.536 37.4639 48.5981 37.4605 48.6603C37.3367 50.022 36.7075 51.2881 35.6968 52.2091C34.6861 53.1301 33.3672 53.6393 31.9998 53.6363Z"})}))));function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Br(Br({ref:t,viewBox:"0 0 24 24"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.9992 12.7578H18.7492V15.0078C18.7492 15.422 18.4134 15.7578 17.9992 15.7578C17.585 15.7578 17.2492 15.422 17.2492 15.0078V12.7578H14.9992C14.585 12.7578 14.2492 12.422 14.2492 12.0078C14.2492 11.5936 14.585 11.2578 14.9992 11.2578H17.2492V9.00777C17.2492 8.59356 17.585 8.25777 17.9992 8.25777C18.4134 8.25777 18.7492 8.59356 18.7492 9.00777V11.2578H20.9992C21.4134 11.2578 21.7492 11.5936 21.7492 12.0078C21.7492 12.422 21.4134 12.7578 20.9992 12.7578ZM14.9217 19.5078H2.69421C2.44179 19.5039 2.24032 19.2961 2.2442 19.0437C2.24441 19.0295 2.24529 19.0153 2.24683 19.0012C2.44701 16.9172 4.57044 14.6287 8.80806 14.6287C13.0457 14.6287 15.1688 16.9172 15.3691 19.0012C15.3964 19.2522 15.2152 19.4778 14.9642 19.5051C14.9501 19.5067 14.9359 19.5076 14.9217 19.5078ZM8.80813 13.5057C6.70438 13.5057 4.86688 11.7203 4.86688 8.84604C4.86688 6.37168 6.45804 4.50781 8.80813 4.50781C11.1582 4.50781 12.7494 6.37156 12.7494 8.84604C12.7493 11.7203 10.9117 13.5057 8.80813 13.5057Z"})})))),zr=n(10196),Ar=n(39346);const Fr=new Map([["workspace-created",_r],["workspace-deleted",Tr],["workspace-recent",Nr],["workspace-org",Wt.Z],["workspace-shared",Yt],["workspace-bell",Dr],["workspace-dot-bell",Dr],["workspace-invite",Rr],["workspace-sparkle",zr.Z]]),$r=(0,f.ZP)(Ar.Z).withConfig({displayName:"WorkspaceTabIcon__StyledBadge",componentId:"xxu4sb-0"})(["height:24px;"]),Ur=f.ZP.div.withConfig({displayName:"WorkspaceTabIcon__LoadingPlaceholder",componentId:"xxu4sb-1"})(["width:24px;height:24px;border-radius:100%;background-color:",";"],(e=>e.theme.colors.contrast12));var Hr=e=>{let{badge:t,type:n,id:o,selected:i,loading:r,className:s}=e;const a=Fr.get(n),{t:l}=(0,b.$G)(),d=()=>(0,P.jsx)(a,{style:{height:24,width:24,opacity:i?1:.5},alt:l("workspace.tabIconAltText",{id:o}),className:s});return r?(0,P.jsx)(Ur,{}):t?(0,P.jsx)($r,{children:d()}):d()};var qr=e=>{let{isNotificationOpen:t,setIsNotificationOpen:n,setIsQRCodeOpen:o,notificationMenuRef:r,tabs:a,selectedTab:d,openSettings:c}=e;const{user:p,activeMembership:u,loading:m}=(0,i.useContext)(T.Z),{hasUnreadNotifications:g,clearNotificationStatus:h}=hr(null===p||void 0===p?void 0:p.id),f=(0,s.useRouter)(),x=(0,i.useCallback)((()=>{m||(n(!t),h())}),[n,h,t,m]),{t:v}=(0,b.$G)(),{priceType:y}=(0,E.Z)();return(0,P.jsxs)(Ge.HX,{suppressHydrationWarning:!0,onClick:()=>{t&&n(!1)},children:[(0,P.jsxs)(Ge.pC,{children:[(0,P.jsx)(Cr,{loading:m,openSettings:c,setIsQRCodeOpen:o,user:p}),(0,P.jsx)(Ge.nx,{onClick:x,$loading:m,"data-testid":m?null:"workspace_sidebar_notification",children:(0,P.jsxs)(Ge.U4,{ref:r,children:[(0,P.jsx)(Hr,{id:"notifications",type:"workspace-bell",badge:g,selected:t,loading:m}),(0,P.jsx)(Ge.$o,{selected:t,$loading:m,children:m?null:v("workspace.sidebarTabLabel.notifications")})]})}),a.map((e=>(0,P.jsx)(Ge.nx,{onMouseDown:()=>m?null:(0,l.MT)(f,e.id),"data-testid":m?null:`workspace_sidebar_${e.id}`,$loading:m,children:(0,P.jsxs)(Ge.U4,{children:[(0,P.jsx)(Hr,{id:e.id,type:e.icon,selected:!t&&e.id===d,loading:m}),(0,P.jsx)(Ge.$o,{selected:!t&&e.id===d,$loading:m,children:m?null:e.text})]})},e.id))),!(null===u||void 0===u||!u.org)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ge.tm,{}),(0,P.jsx)(Ge.nx,{onMouseDown:()=>m?null:c(),$loading:m,children:(0,P.jsxs)(Ge.U4,{children:[(0,P.jsx)(Hr,{id:"invite",type:"workspace-invite",selected:!t&&"invite"===d,loading:m}),(0,P.jsx)(Ge.$o,{selected:!t&&"invite"===d,$loading:m,children:m?null:v("workspace.sidebarTabLabel.invite")})]})})]})]}),(0,P.jsx)(Ge.Q3,{children:!y&&(0,P.jsx)(Z.Cm,{})})]})},Wr=n(50222);const Gr=(0,f.iv)(["color:",";"],(e=>{let{theme:t,$warning:n}=e;return n?t.colors.workspaceBannerWarningLabel:t.colors.workspaceBannerLabel})),Vr=f.ZP.div.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerStyles",componentId:"rvmdac-0"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;height:48px;gap:12px;border-bottom:",";box-sizing:border-box;font-size:",";",""],(e=>{let{theme:t}=e;return`1px solid ${t.colors.workspaceBannerBorder}`}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),Gr),Kr=f.ZP.span.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerMessage",componentId:"rvmdac-1"})([""]),Qr=(0,f.ZP)(H.Z).withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButton",componentId:"rvmdac-2"})(["padding:0 8px;height:32px;"," > span{border-radius:",";","}"],W.qc,(e=>{let{theme:t}=e;return t.borderRadius.xs}),Gr),Jr=(0,f.ZP)(ct.T).attrs((e=>{let{theme:t}=e;return{backgroundColor:t.colors.loadingBackground,foregroundColor:t.colors.loadingForeground}})).withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonLoadingSpinner",componentId:"rvmdac-3"})([""]),Xr=f.ZP.span.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonLabel",componentId:"rvmdac-4"})([""]),Yr=f.ZP.div.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonContainer",componentId:"rvmdac-5"})(["position:relative;display:flex;align-items:center;justify-content:center;& > ","{opacity:",";}& > ","{position:absolute;opacity:",";}"],Xr,(e=>{let{$loading:t}=e;return t?0:1}),Jr,(e=>{let{$loading:t}=e;return t?1:0}));var es=e=>{let{message:t,buttonLabel:n,buttonAriaLabel:o,buttonOnClick:i,buttonLoading:r=!1,warning:s=!1,testId:a}=e;const l=(0,f.Fg)();return(0,P.jsxs)(Vr,{$warning:s,"data-testid":a,children:[(0,P.jsx)(Kr,{children:t}),(0,P.jsx)(Qr,{$warning:s,opacity:1,onZ0:!s,customButtonPalette:s?{default:l.colors.workspaceBannerButtonWarning}:void 0,onClick:i,"aria-label":o,"data-testid":a?`${a}_button`:void 0,children:(0,P.jsxs)(Yr,{$loading:r,children:[r&&(0,P.jsx)(Jr,{size:16}),(0,P.jsx)(Xr,{children:n})]})})]})};var ts=e=>{let{remainingTomeCreationsForOrg:t}=e;const{t:n}=(0,b.$G)(),{apolloClient:o}=(0,g.bp)(),i=t<=Wr.V0,{openSettings:r}=(0,ne.r)();if(!i)return null;const s=0===t;let a;a=s?n("workspace.upgradeBanner.message_limit_reached"):n(1===t?"workspace.upgradeBanner.message_with_count_one":"workspace.upgradeBanner.message_with_count_other",{count:t});return(0,P.jsx)(es,{message:a,buttonLabel:n("workspace.upgradeBanner.buttonLabel"),buttonAriaLabel:n("workspace.upgradeBanner.buttonAriaLabel"),buttonOnClick:()=>{r(oe.u.PLANS),M.ZP.reportPaymentEvent({apolloClient:o,trackEventType:M.nM.CLICK_LIMITED_TOMES_UPGRADE_BUTTON})},warning:s,testId:"upgrade_banner"})};var ns=()=>{var e;const{t:t}=(0,b.$G)(),{apolloClient:n}=(0,g.bp)(),{activeMembership:o}=(0,i.useContext)(T.Z),r=(null===o||void 0===o||null===(e=o.org)||void 0===e?void 0:e.slug)??"/",[s]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.UpdatePaymentMethod,returnPath:r},onError:e=>{(0,L.Sd)({message:e.message})}}),{0:a,1:l}=(0,i.useState)(!1);return(0,P.jsx)(es,{message:t("workspace.upgradeBanner.messagePastDue"),buttonLabel:t("workspace.upgradeBanner.buttonPastDueLabel"),buttonAriaLabel:t("workspace.upgradeBanner.buttonPastDueAriaLabel"),buttonOnClick:async()=>{var e;l(!0);const{data:t}=await s(),o=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;o?window.location.assign(o):l(!1),M.ZP.reportPaymentEvent({apolloClient:n,trackEventType:M.nM.CLICK_WORKSPACE_UPDATE_PAYMENT_BUTTON})},buttonLoading:a,warning:!0,testId:"past_due_banner"})};const os="org",is=l.Gz;function rs(e){e.preventDefault()}var ss=e=>{var t,n,r;let{isMobile:a,initialSelectedTab:l}=e;o.v.startView("workspace");const c=(0,S.Z)(),p=a??c,m=(0,f.Fg)(),{apolloClient:y,clientId:w,setWorkspaceUrl:j}=(0,g.bp)(),C=(0,s.useRouter)(),{data:B,loading:R}=(0,d._HF)(),z=C.query.referralStatus,{0:A,1:F}=(0,i.useState)(!1);(0,i.useEffect)((()=>{"false"===z&&(M.ZP.reportRedeemedReferralCodeWithExistingAccount({apolloClient:y}),F(!0))}),[z,y]);const $=(0,i.useMemo)((()=>{var e;if(!R)return(null===B||void 0===B||null===(e=B.me)||void 0===e?void 0:e.numSharedWithMeTomes)||0}),[B,R]),{isSettingsOpen:U,openSettings:H,closeSettings:q}=(0,ne.r)(),W=(0,i.useCallback)((e=>{e?(H(),M.ZP.reportPaymentEvent({apolloClient:y,trackEventType:M.nM.CLICK_OPEN_SETTINGS})):q()}),[y,q,H]),{0:G,1:V}=(0,i.useState)(!1),K=(0,i.useRef)(null),{0:Q,1:J}=(0,i.useState)(!1),{0:X,1:Y}=(0,i.useState)(!0),{t:ee}=(0,b.$G)(),te=(0,h.useSpring)({opacity:Q?"1.0":"0.0",scale:Q?"1.0":"0.95",visibility:!X||Q?"visible":"hidden",config:{duration:100}});(0,i.useEffect)((()=>("undefined"!==typeof document&&document.addEventListener("contextmenu",rs),()=>{document.removeEventListener("contextmenu",rs)})),[]),(0,i.useEffect)((()=>{Y(!1);const e=setTimeout((()=>Y(!0)),100);return()=>{clearTimeout(e)}}),[Q]);const oe=(0,i.useCallback)((()=>l||(window&&window.localStorage.getItem("workspaceTab")||os)),[l]),{0:ie,1:re}=(0,i.useState)(os),se=(0,i.useRef)(!0);(0,i.useEffect)((()=>{const e=oe();re(e)}),[oe]),(0,i.useEffect)((()=>{l&&re(l)}),[l]),(0,i.useEffect)((()=>{j(`/?tab=${ie}`),window.localStorage.setItem("workspaceTab",ie)}),[ie,j]);const{user:ae,loading:le,error:de,activeMembership:ce}=(0,i.useContext)(T.Z),{priceType:pe,isPastDue:ue,remainingTomeCreationsForOrg:me}=(0,E.Z)(),ge=!pe,he=!le&&ge,fe=!he&&!le&&ue;if((0,i.useEffect)((()=>{(0,D.A)(m.RAW_VALUES_LEGACY.background)}),[m]),(0,i.useEffect)((()=>{const e=document.getElementById("intercom-positioner-tree");e&&(e.hidden=!0)}),[]),(0,i.useEffect)((()=>{var e,t;if(le)return;se.current&&(se.current=!1,N.z.reportWorkspacePresence(y,w));const n=null===ce||void 0===ce||null===(e=ce.org)||void 0===e?void 0:e.slug;if(n&&n!==(null===(t=C.query.slug)||void 0===t?void 0:t[0])){const e={};C.query.redeem_referral&&(e.referralStatus="false"),C.replace({pathname:n,query:e})}}),[le,y,w,null===ce||void 0===ce||null===(t=ce.org)||void 0===t?void 0:t.slug,C]),(0,i.useEffect)((()=>{le||M.ZP.reportPageView({apolloClient:y,pageName:M.Xw.WORKSPACE})}),[y,le]),!le&&!ae)return de?null:(0,P.jsx)(_.Z,{});if(!le&&(null===ce||void 0===ce||!ce.org)&&0===$)return(0,P.jsx)(O,{email:null===ae||void 0===ae?void 0:ae.email});const be=[{id:"recent",text:ee("workspace.sidebarTabLabel.recent"),icon:"workspace-recent",component:ot}];null!==ce&&void 0!==ce&&ce.org&&be.push({id:"created",text:ee("workspace.sidebarTabLabel.personal"),icon:"workspace-created",component:nt}),be.push({id:"shared",text:ee("workspace.sidebarTabLabel.sharedWithMe"),icon:"workspace-shared",component:Ye}),null!==ce&&void 0!==ce&&ce.org&&(be.push({id:"org",text:ce.org.name,icon:"workspace-org",component:et}),be.push({id:"deleted",text:ee("workspace.sidebarTabLabel.deleted"),icon:"workspace-deleted",component:tt}));const xe=(be.filter((e=>e.id===ie))[0]||be[0]).component,ve=(0,P.jsx)(xe,{numTomesPerPage:16,numTomesInitial:16,loading:le,orgId:null===ce||void 0===ce||null===(n=ce.org)||void 0===n?void 0:n.id,userId:null===ae||void 0===ae?void 0:ae.id,isMobile:p,upgradeEligible:ge});return(0,P.jsx)(u.Z,{activeBodyTheme:!0,children:(0,P.jsxs)(Ve.Ac,{children:[!p&&he&&(0,P.jsx)(ts,{remainingTomeCreationsForOrg:me}),!p&&fe&&(0,P.jsx)(ns,{}),(0,P.jsxs)(Ve.di,{children:[!p&&(0,P.jsx)(qr,{isNotificationOpen:Q,setIsNotificationOpen:J,setIsQRCodeOpen:V,notificationMenuRef:K,tabs:be,selectedTab:ie,openSettings:H}),!p&&(0,P.jsx)(k.u_,{open:U,onOpenChange:e=>W(e),children:(0,P.jsx)(ur,{baseFrontendUrl:is})}),!p&&(0,P.jsx)(k.u_,{open:G,onOpenChange:e=>V(e),children:(0,P.jsx)(qt,{})}),(0,P.jsxs)(Ve.N,{suppressHydrationWarning:!0,onClick:()=>{J(!1)},children:[p&&(0,P.jsx)(lt,{orgName:null===ce||void 0===ce||null===(r=ce.org)||void 0===r?void 0:r.name}),!le&&ve]}),!p&&(0,P.jsx)(x.W,{children:(0,P.jsx)(v.Z,{})}),!p&&!le&&(0,P.jsx)(zt,{style:te,perPage:6,isNotificationOpen:Q,setIsNotificationOpen:J}),(0,P.jsx)(I.Z,{subscribeTo:L.vc}),(0,P.jsx)(Z.Bo,{isOpen:A,onClose:()=>F(!1)}),(0,P.jsx)(Z.n,{})]})]})})},as=n(57451),ls=!0;function ds(e){let{ssrLoadingTheme:t,ssrTome:n,isMobileFromUA:i,isBot:h,preloadFontData:f}=e;const{apolloClient:b}=(0,g.bp)(),x=(0,r.sJ)(c.Z),{query:{slug:v,tab:y}}=(0,s.useRouter)(),[w,j]=(0,l.tt)(v||"");let C;if(j){var O,_;const e=b.cache.readFragment({id:`Tome:${j}`,fragment:d.BMc,fragmentName:"TomeFirstPageTheme"}),t=null===e||void 0===e||null===(O=e.pages)||void 0===O||null===(_=O[0])||void 0===_?void 0:_.theme;t&&(C=t)}const k=(0,as.Z)();if(j||x){if(!k)return(0,P.jsx)(u.Z,{theme:t,preloadFontData:f,loadFonts:!0,children:(0,P.jsx)(m.Z,{})});const e=C||t||p.V6;let r;return r=(null===n||void 0===n?void 0:n.id)===j?n:null,o.v.startView("tome"),(0,P.jsx)(a.E,{id:j,preferCache:x,fetchFullPage:!0,isBot:h,isMobileFromUA:i,ssrTome:r,preloadFontData:f,loadingTheme:x?p.V6:e})}return w?(0,P.jsx)(ss,{isMobile:i,initialSelectedTab:(null===y||void 0===y?void 0:y.toString())||""}):null}const cs={unstable_excludeFiles:["node_modules/jsdom/**/*"]}},50881:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...slug]",function(){return n(12337)}])}},function(e){e.O(0,[9774,4027,2563,630,1272,8700,3285,5675,8354,2704,6592,7536,6665,9141,6936,663,7329,58,4233,4635,8657,4208,7660,2888,179],(function(){return t=50881,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
